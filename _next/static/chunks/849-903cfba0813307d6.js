(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{4756:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}},158:function(e,t,r){"use strict";r.d(t,{w_:function(){return c}});var n=r(4090),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=n.createContext&&n.createContext(a),o=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e){return t=>n.createElement(p,s({attr:u({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,u({key:r},t.attr),e(t.child)))}(e.child))}function p(e){var t=t=>{var r,{attr:a,size:i,title:l}=e,c=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,o),p=i||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:r,style:u(u({color:e.color||t.color},t.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),l&&n.createElement("title",null,l),e.children)};return void 0!==i?n.createElement(i.Consumer,null,e=>t(e)):t(a)}},8685:function(e,t,r){"use strict";let n,a,i;r.d(t,{y:function(){return q}});var o=r(6376),s={},l=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},u=function(e){return new Worker(e)};try{URL.revokeObjectURL(l(""))}catch(e){l=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},u=function(e){return new Worker(e,{type:"module"})}}var c=Uint8Array,p=Uint16Array,f=Uint32Array,h=new c([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),d=new c([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m=new c([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=function(e,t){for(var r=new p(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new f(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return[r,a]},v=g(h,2),y=v[0],w=v[1];y[28]=258,w[258]=28;for(var b=g(d,0),I=b[0],x=b[1],T=new p(32768),P=0;P<32768;++P){var E=(43690&P)>>>1|(21845&P)<<1;E=(61680&(E=(52428&E)>>>2|(13107&E)<<2))>>>4|(3855&E)<<4,T[P]=((65280&E)>>>8|(255&E)<<8)>>>1}for(var N=function(e,t,r){for(var n,a=e.length,i=0,o=new p(t);i<a;++i)++o[e[i]-1];var s=new p(t);for(i=0;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;if(r){n=new p(1<<t);var l=15-t;for(i=0;i<a;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],f=s[e[i]-1]++<<c,h=f|(1<<c)-1;f<=h;++f)n[T[f]>>>l]=u}else for(i=0,n=new p(a);i<a;++i)e[i]&&(n[i]=T[s[e[i]-1]++]>>>15-e[i]);return n},k=new c(288),P=0;P<144;++P)k[P]=8;for(var P=144;P<256;++P)k[P]=9;for(var P=256;P<280;++P)k[P]=7;for(var P=280;P<288;++P)k[P]=8;for(var D=new c(32),P=0;P<32;++P)D[P]=5;var A=N(k,9,1),O=N(D,5,1),L=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},S=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},R=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},C=function(e){return(e/8|0)+(7&e&&1)},F=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var n=new(e instanceof p?p:e instanceof f?f:c)(r-t);return n.set(e.subarray(t,r)),n},M=function(e,t,r){var n=e.length;if(!n||r&&!r.l&&n<5)return t||new c(0);var a=!t||r,i=!r||r.i;r||(r={}),t||(t=new c(3*n));var o=function(e){var r=t.length;if(e>r){var n=new c(Math.max(2*r,e));n.set(t),t=n}},s=r.f||0,l=r.p||0,u=r.b||0,p=r.l,f=r.d,g=r.m,v=r.n,w=8*n;do{if(!p){r.f=s=S(e,l,1);var b=S(e,l+1,3);if(l+=3,b){if(1==b)p=A,f=O,g=9,v=5;else if(2==b){var x=S(e,l,31)+257,T=S(e,l+10,15)+4,P=x+S(e,l+5,31)+1;l+=14;for(var E=new c(P),k=new c(19),D=0;D<T;++D)k[m[D]]=S(e,l+3*D,7);l+=3*T;for(var M=L(k),B=(1<<M)-1,U=N(k,M,1),D=0;D<P;){var j=U[S(e,l,B)];l+=15&j;var G=j>>>4;if(G<16)E[D++]=G;else{var _=0,V=0;for(16==G?(V=3+S(e,l,3),l+=2,_=E[D-1]):17==G?(V=3+S(e,l,7),l+=3):18==G&&(V=11+S(e,l,127),l+=7);V--;)E[D++]=_}}var z=E.subarray(0,x),X=E.subarray(x);g=L(z),v=L(X),p=N(z,g,1),f=N(X,v,1)}else throw"invalid block type"}else{var G=C(l)+4,W=e[G-4]|e[G-3]<<8,H=G+W;if(H>n){if(i)throw"unexpected EOF";break}a&&o(u+W),t.set(e.subarray(G,H),u),r.b=u+=W,r.p=l=8*H;continue}if(l>w){if(i)throw"unexpected EOF";break}}a&&o(u+131072);for(var K=(1<<g)-1,Z=(1<<v)-1,$=l;;$=l){var _=p[R(e,l)&K],Y=_>>>4;if((l+=15&_)>w){if(i)throw"unexpected EOF";break}if(!_)throw"invalid length/literal";if(Y<256)t[u++]=Y;else if(256==Y){$=l,p=null;break}else{var q=Y-254;if(Y>264){var D=Y-257,Q=h[D];q=S(e,l,(1<<Q)-1)+y[D],l+=Q}var J=f[R(e,l)&Z],ee=J>>>4;if(!J)throw"invalid distance";l+=15&J;var X=I[ee];if(ee>3){var Q=d[ee];X+=R(e,l)&(1<<Q)-1,l+=Q}if(l>w){if(i)throw"unexpected EOF";break}a&&o(u+131072);for(var et=u+q;u<et;u+=4)t[u]=t[u-X],t[u+1]=t[u+1-X],t[u+2]=t[u+2-X],t[u+3]=t[u+3-X];u=et}}r.l=p,r.p=$,r.b=u,p&&(s=1,r.m=g,r.d=f,r.n=v)}while(!s);return u==t.length?t:F(t,0,u)},B=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},U=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},j=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return[H,0];if(1==a){var o=new c(r[0].s+1);return o[r[0].s]=1,[o,1]}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var s=r[0],l=r[1],u=0,f=1,h=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};f!=a-1;)s=r[r[u].f<r[h].f?u++:h++],l=r[u!=f&&r[u].f<r[h].f?u++:h++],r[f++]={s:-1,f:s.f+l.f,l:s,r:l};for(var d=i[0].s,n=1;n<a;++n)i[n].s>d&&(d=i[n].s);var m=new p(d+1),g=G(r[f-1],m,0);if(g>t){var n=0,v=0,y=g-t,w=1<<y;for(i.sort(function(e,t){return m[t.s]-m[e.s]||e.f-t.f});n<a;++n){var b=i[n].s;if(m[b]>t)v+=w-(1<<g-m[b]),m[b]=t;else break}for(v>>>=y;v>0;){var I=i[n].s;m[I]<t?v-=1<<t-m[I]++-1:++n}for(;n>=0&&v;--n){var x=i[n].s;m[x]==t&&(--m[x],++v)}g=t}return[new c(m),g]},G=function(e,t,r){return -1==e.s?Math.max(G(e.l,t,r+1),G(e.r,t,r+1)):t[e.s]=r},_=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new p(++t),n=0,a=e[0],i=1,o=function(e){r[n++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[s]}return[r.subarray(0,n),t]},V=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},z=function(e,t,r){var n=r.length,a=C(t+2);e[a]=255&n,e[a+1]=n>>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},X=function(e,t,r,n,a,i,o,s,l,u,c){B(t,c++,r),++a[256];for(var f,g,v,y,w=j(a,15),b=w[0],I=w[1],x=j(i,15),T=x[0],P=x[1],E=_(b),A=E[0],O=E[1],L=_(T),S=L[0],R=L[1],C=new p(19),F=0;F<A.length;++F)C[31&A[F]]++;for(var F=0;F<S.length;++F)C[31&S[F]]++;for(var M=j(C,7),G=M[0],X=M[1],W=19;W>4&&!G[m[W-1]];--W);var H=u+5<<3,K=V(a,k)+V(i,D)+o,Z=V(a,b)+V(i,T)+o+14+3*W+V(C,G)+(2*C[16]+3*C[17]+7*C[18]);if(H<=K&&H<=Z)return z(t,c,e.subarray(l,l+u));if(B(t,c,1+(Z<K)),c+=2,Z<K){f=N(b,I,0),g=b,v=N(T,P,0),y=T;var $=N(G,X,0);B(t,c,O-257),B(t,c+5,R-1),B(t,c+10,W-4),c+=14;for(var F=0;F<W;++F)B(t,c+3*F,G[m[F]]);c+=3*W;for(var Y=[A,S],q=0;q<2;++q)for(var Q=Y[q],F=0;F<Q.length;++F){var J=31&Q[F];B(t,c,$[J]),c+=G[J],J>15&&(B(t,c,Q[F]>>>5&127),c+=Q[F]>>>12)}}else f=null,g=k,v=null,y=D;for(var F=0;F<s;++F)if(n[F]>255){var J=n[F]>>>18&31;U(t,c,f[J+257]),c+=g[J+257],J>7&&(B(t,c,n[F]>>>23&31),c+=h[J]);var ee=31&n[F];U(t,c,v[ee]),c+=y[ee],ee>3&&(U(t,c,n[F]>>>5&8191),c+=d[ee])}else U(t,c,f[n[F]]),c+=g[n[F]];return U(t,c,f[256]),c+g[256]},W=new f([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H=new c(0),K=function(e){if((15&e[0])!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"},Z="undefined"!=typeof TextDecoder&&new TextDecoder;try{Z.decode(H,{stream:!0})}catch(e){}function $(e,t,r){let n=r.length-e-1;if(t>=r[n])return n-1;if(t<=r[e])return e;let a=e,i=n,o=Math.floor((a+i)/2);for(;t<r[o]||t>=r[o+1];)t<r[o]?i=o:a=o,o=Math.floor((a+i)/2);return o}class Y extends o.Hyl{getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Pa4,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),n=function(e,t,r,n){let a=$(e,n,t),i=function(e,t,r,n){let a=[],i=[],o=[];a[0]=1;for(let s=1;s<=r;++s){i[s]=t-n[e+1-s],o[s]=n[e+s]-t;let r=0;for(let e=0;e<s;++e){let t=o[e+1],n=i[s-e],l=a[e]/(t+n);a[e]=r+t*l,r=n*l}a[s]=r}return a}(a,n,e,t),s=new o.Ltg(0,0,0,0);for(let t=0;t<=e;++t){let n=r[a-e+t],o=i[t],l=n.w*o;s.x+=n.x*l,s.y+=n.y*l,s.z+=n.z*l,s.w+=n.w*o}return s}(this.degree,this.knots,this.controlPoints,r);return 1!==n.w&&n.divideScalar(n.w),t.set(n.x,n.y,n.z)}getTangent(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Pa4,n=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=(t=this.degree,function(e){let t=e.length,r=[],n=[];for(let a=0;a<t;++a){let t=e[a];r[a]=new o.Pa4(t.x,t.y,t.z),n[a]=t.w}let a=[];for(let e=0;e<t;++e){let t=r[e].clone();for(let r=1;r<=e;++r)t.sub(a[e-r].clone().multiplyScalar(function(e,t){let r=1;for(let t=2;t<=e;++t)r*=t;let n=1;for(let e=2;e<=t;++e)n*=e;for(let r=2;r<=e-t;++r)n*=r;return r/n}(e,r)*n[r]));a[e]=t.divideScalar(n[0])}return a}(function(e,t,r,n,a){let i=a<e?a:e,s=[],l=$(e,n,t),u=function(e,t,r,n,a){let i=[];for(let e=0;e<=r;++e)i[e]=0;let o=[];for(let e=0;e<=n;++e)o[e]=i.slice(0);let s=[];for(let e=0;e<=r;++e)s[e]=i.slice(0);s[0][0]=1;let l=i.slice(0),u=i.slice(0);for(let n=1;n<=r;++n){l[n]=t-a[e+1-n],u[n]=a[e+n]-t;let r=0;for(let e=0;e<n;++e){let t=u[e+1],a=l[n-e];s[n][e]=t+a;let i=s[e][n-1]/s[n][e];s[e][n]=r+t*i,r=a*i}s[n][n]=r}for(let e=0;e<=r;++e)o[0][e]=s[e][r];for(let e=0;e<=r;++e){let t=0,a=1,l=[];for(let e=0;e<=r;++e)l[e]=i.slice(0);l[0][0]=1;for(let i=1;i<=n;++i){let n=0,u=e-i,c=r-i;e>=i&&(l[a][0]=l[t][0]/s[c+1][u],n=l[a][0]*s[u][c]);let p=u>=-1?1:-u,f=e-1<=c?i-1:r-e;for(let e=p;e<=f;++e)l[a][e]=(l[t][e]-l[t][e-1])/s[c+1][u+e],n+=l[a][e]*s[u+e][c];e<=c&&(l[a][i]=-l[t][i-1]/s[c+1][e],n+=l[a][i]*s[e][c]),o[i][e]=n;let h=t;t=a,a=h}}let c=r;for(let e=1;e<=n;++e){for(let t=0;t<=r;++t)o[e][t]*=c;c*=r-e}return o}(l,n,e,i,t),c=[];for(let e=0;e<r.length;++e){let t=r[e].clone(),n=t.w;t.x*=n,t.y*=n,t.z*=n,c[e]=t}for(let t=0;t<=i;++t){let r=c[l-e].clone().multiplyScalar(u[t][0]);for(let n=1;n<=e;++n)r.add(c[l-e+n].clone().multiplyScalar(u[t][n]));s[t]=r}for(let e=i+1;e<=a+1;++e)s[e]=new o.Ltg(0,0,0);return s}(t,this.knots,this.controlPoints,n,1)));return r.copy(a[1]).normalize(),r}constructor(e,t,r,n,a){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=n||0,this.endKnot=a||this.knots.length-1;for(let e=0;e<r.length;++e){let t=r[e];this.controlPoints[e]=new o.Ltg(t.x,t.y,t.z,t.w)}}}class q extends o.aNw{load(e,t,r,n){let a=this,i=""===a.path?o.Zp0.extractUrlBase(e):a.path,s=new o.hH6(this.manager);s.setPath(a.path),s.setResponseType("arraybuffer"),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(r){try{t(a.parse(r,i))}catch(t){n?n(t):console.error(t),a.manager.itemError(e)}},r,n)}parse(e,t){if(function(e){let t="Kaydara FBX Binary  \x00";return e.byteLength>=t.length&&t===ed(e,0,t.length)}(e))n=new er().parse(e);else{let t=ed(e);if(!function(e){let t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;for(let n=0;n<t.length;++n)if(function(t){let n=e[t-1];return e=e.slice(r+t),r++,n}(1)===t[n])return!1;return!0}(t))throw Error("THREE.FBXLoader: Unknown format.");if(7e3>ei(t))throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ei(t));n=new et().parse(t)}return new Q(new o.dpR(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),this.manager).parse(n)}constructor(e){super(e)}}class Q{parse(){a=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),n=this.parseDeformers(),o=new J().parse(n);return this.parseScene(n,o,r),i}parseConnections(){let e=new Map;return"Connections"in n&&n.Connections.connections.forEach(function(t){let r=t[0],n=t[1],a=t[2];e.has(r)||e.set(r,{parents:[],children:[]}),e.get(r).parents.push({ID:n,relationship:a}),e.has(n)||e.set(n,{parents:[],children:[]}),e.get(n).children.push({ID:r,relationship:a})}),e}parseImages(){let e={},t={};if("Video"in n.Objects){let r=n.Objects.Video;for(let n in r){let a=r[n];if(e[parseInt(n)]=a.RelativeFilename||a.Filename,"Content"in a){let e=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,i="string"==typeof a.Content&&""!==a.Content;if(e||i){let e=this.parseImage(r[n]);t[a.RelativeFilename||a.Filename]=e}}}}for(let r in e){let n=e[r];void 0!==t[n]?e[r]=t[n]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){let t;let r=e.Content,n=e.RelativeFilename||e.Filename,a=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(a){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),t="image/tga";break;default:console.warn('FBXLoader: Image type "'+a+'" is not supported.');return}if("string"==typeof r)return"data:"+t+";base64,"+r;{let e=new Uint8Array(r);return window.URL.createObjectURL(new Blob([e],{type:t}))}}parseTextures(e){let t=new Map;if("Texture"in n.Objects){let r=n.Objects.Texture;for(let n in r){let a=this.parseTexture(r[n],e);t.set(parseInt(n),a)}}return t}parseTexture(e,t){let r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;let n=e.WrapModeU,a=e.WrapModeV,i=void 0!==n?n.value:0,s=void 0!==a?a.value:0;if(r.wrapS=0===i?o.rpg:o.uWy,r.wrapT=0===s?o.rpg:o.uWy,"Scaling"in e){let t=e.Scaling.value;r.repeat.x=t[0],r.repeat.y=t[1]}if("Translation"in e){let t=e.Translation.value;r.offset.x=t[0],r.offset.y=t[1]}return r}loadTexture(e,t){let r,n;let i=this.textureLoader.path,s=a.get(e.id).children;void 0!==s&&s.length>0&&void 0!==t[s[0].ID]&&(0===(r=t[s[0].ID]).indexOf("blob:")||0===r.indexOf("data:"))&&this.textureLoader.setPath(void 0);let l=e.FileName.slice(-3).toLowerCase();if("tga"===l){let t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),n=new o.xEZ):(t.setPath(this.textureLoader.path),n=t.load(r))}else if("dds"===l){let t=this.manager.getHandler(".dds");null===t?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),n=new o.xEZ):(t.setPath(this.textureLoader.path),n=t.load(r))}else"psd"===l?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),n=new o.xEZ):n=this.textureLoader.load(r);return this.textureLoader.setPath(i),n}parseMaterials(e){let t=new Map;if("Material"in n.Objects){let r=n.Objects.Material;for(let n in r){let a=this.parseMaterial(r[n],e);null!==a&&t.set(parseInt(n),a)}}return t}parseMaterial(e,t){let r;let n=e.id,i=e.attrName,s=e.ShadingModel;if("object"==typeof s&&(s=s.value),!a.has(n))return null;let l=this.parseParameters(e,t,n);switch(s.toLowerCase()){case"phong":r=new o.xoR;break;case"lambert":r=new o.YBo;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),r=new o.xoR}return r.setValues(l),r.name=i,r}parseParameters(e,t,r){let n={};e.BumpFactor&&(n.bumpScale=e.BumpFactor.value),e.Diffuse?n.color=new o.Ilk().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&("Color"===e.DiffuseColor.type||"ColorRGB"===e.DiffuseColor.type)&&(n.color=new o.Ilk().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(n.displacementScale=e.DisplacementFactor.value),e.Emissive?n.emissive=new o.Ilk().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&("Color"===e.EmissiveColor.type||"ColorRGB"===e.EmissiveColor.type)&&(n.emissive=new o.Ilk().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(n.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(n.opacity=parseFloat(e.Opacity.value)),n.opacity<1&&(n.transparent=!0),e.ReflectionFactor&&(n.reflectivity=e.ReflectionFactor.value),e.Shininess&&(n.shininess=e.Shininess.value),e.Specular?n.specular=new o.Ilk().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&"Color"===e.SpecularColor.type&&(n.specular=new o.Ilk().fromArray(e.SpecularColor.value).convertSRGBToLinear());let i=this;return a.get(r).children.forEach(function(e){let r=e.relationship;switch(r){case"Bump":n.bumpMap=i.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":n.aoMap=i.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":n.map=i.getTexture(t,e.ID),void 0!==n.map&&(n.map.colorSpace=o.KI_);break;case"DisplacementColor":n.displacementMap=i.getTexture(t,e.ID);break;case"EmissiveColor":n.emissiveMap=i.getTexture(t,e.ID),void 0!==n.emissiveMap&&(n.emissiveMap.colorSpace=o.KI_);break;case"NormalMap":case"Maya|TEX_normal_map":n.normalMap=i.getTexture(t,e.ID);break;case"ReflectionColor":n.envMap=i.getTexture(t,e.ID),void 0!==n.envMap&&(n.envMap.mapping=o.dSO,n.envMap.colorSpace=o.KI_);break;case"SpecularColor":n.specularMap=i.getTexture(t,e.ID),void 0!==n.specularMap&&(n.specularMap.colorSpace=o.KI_);break;case"TransparentColor":case"TransparencyFactor":n.alphaMap=i.getTexture(t,e.ID),n.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}}),n}getTexture(e,t){return"LayeredTexture"in n.Objects&&t in n.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=a.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in n.Objects){let r=n.Objects.Deformer;for(let n in r){let i=r[n],o=a.get(parseInt(n));if("Skin"===i.attrType){let t=this.parseSkeleton(o,r);t.ID=n,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=o.parents[0].ID,e[n]=t}else if("BlendShape"===i.attrType){let e={id:n};e.rawTargets=this.parseMorphTargets(o,r),e.id=n,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let r=[];return e.children.forEach(function(e){let n=t[e.ID];if("Cluster"!==n.attrType)return;let a={ID:e.ID,indices:[],weights:[],transformLink:new o.yGw().fromArray(n.TransformLink.a)};"Indexes"in n&&(a.indices=n.Indexes.a,a.weights=n.Weights.a),r.push(a)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){let r=[];for(let n=0;n<e.children.length;n++){let i=e.children[n],o=t[i.ID],s={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;s.geoID=a.get(parseInt(i.ID)).children.filter(function(e){return void 0===e.relationship})[0].ID,r.push(s)}return r}parseScene(e,t,r){i=new o.ZAu;let s=this.parseModels(e.skeletons,t,r),l=n.Objects.Model,u=this;s.forEach(function(e){let t=l[e.ID];u.setLookAtProperties(e,t),a.get(e.ID).parents.forEach(function(t){let r=s.get(t.ID);void 0!==r&&r.add(e)}),null===e.parent&&i.add(e)}),this.bindSkeleton(e.skeletons,t,s),this.addGlobalSceneSettings(),i.traverse(function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);let t=ep(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}});let c=new ee().parse();1===i.children.length&&i.children[0].isGroup&&(i.children[0].animations=c,i=i.children[0]),i.animations=c}parseModels(e,t,r){let i=new Map,s=n.Objects.Model;for(let n in s){let l=parseInt(n),u=s[n],c=a.get(l),p=this.buildSkeleton(c,e,l,u.attrName);if(!p){switch(u.attrType){case"Camera":p=this.createCamera(c);break;case"Light":p=this.createLight(c);break;case"Mesh":p=this.createMesh(c,t,r);break;case"NurbsCurve":p=this.createCurve(c,t);break;case"LimbNode":case"Root":p=new o.N$j;break;default:p=new o.ZAu}p.name=u.attrName?o.iUV.sanitizeNodeName(u.attrName):"",p.userData.originalName=u.attrName,p.ID=l}this.getTransformData(p,u),i.set(l,p)}return i}buildSkeleton(e,t,r,n){let a=null;return e.parents.forEach(function(e){for(let i in t){let s=t[i];s.rawBones.forEach(function(t,i){if(t.ID===e.ID){let e=a;(a=new o.N$j).matrixWorld.copy(t.transformLink),a.name=n?o.iUV.sanitizeNodeName(n):"",a.userData.originalName=n,a.ID=r,s.bones[i]=a,null!==e&&a.add(e)}})}}),a}createCamera(e){let t,r;if(e.children.forEach(function(e){let t=n.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)}),void 0===r)t=new o.Tme;else{let e=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(e=1);let n=1;void 0!==r.NearPlane&&(n=r.NearPlane.value/1e3);let a=1e3;void 0!==r.FarPlane&&(a=r.FarPlane.value/1e3);let i=window.innerWidth,s=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(i=r.AspectWidth.value,s=r.AspectHeight.value);let l=i/s,u=45;void 0!==r.FieldOfView&&(u=r.FieldOfView.value);let c=r.FocalLength?r.FocalLength.value:null;switch(e){case 0:t=new o.cPb(u,l,n,a),null!==c&&t.setFocalLength(c);break;case 1:t=new o.iKG(-i/2,i/2,s/2,-s/2,n,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new o.Tme}}return t}createLight(e){let t,r;if(e.children.forEach(function(e){let t=n.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)}),void 0===r)t=new o.Tme;else{let e;e=void 0===r.LightType?0:r.LightType.value;let n=16777215;void 0!==r.Color&&(n=new o.Ilk().fromArray(r.Color.value).convertSRGBToLinear());let a=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(a=0);let i=0;switch(void 0!==r.FarAttenuationEnd&&(i=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value),e){case 0:t=new o.cek(n,a,i,1);break;case 1:t=new o.Ox3(n,a);break;case 2:let s=Math.PI/3;void 0!==r.InnerAngle&&(s=o.M8C.degToRad(r.InnerAngle.value));let l=0;void 0!==r.OuterAngle&&(l=Math.max(l=o.M8C.degToRad(r.OuterAngle.value),1)),t=new o.PMe(n,a,i,s,l,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new o.cek(n,a)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,r){let n;let a=null,i=null,s=[];return e.children.forEach(function(e){t.has(e.ID)&&(a=t.get(e.ID)),r.has(e.ID)&&s.push(r.get(e.ID))}),s.length>1?i=s:s.length>0?i=s[0]:(i=new o.xoR({name:o.aNw.DEFAULT_MATERIAL_NAME,color:13421772}),s.push(i)),"color"in a.attributes&&s.forEach(function(e){e.vertexColors=!0}),a.FBX_Deformer?(n=new o.TUv(a,i)).normalizeSkinWeights():n=new o.Kj0(a,i),n}createCurve(e,t){let r=e.children.reduce(function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e},null),n=new o.nls({name:o.aNw.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new o.x12(r,n)}getTransformData(e,t){let r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=ef(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&a.get(e.ID).children.forEach(function(t){if("LookAtProperty"===t.relationship){let r=n.Objects.Model[t.ID];if("Lcl_Translation"in r){let t=r.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),i.add(e.target)):e.lookAt(new o.Pa4().fromArray(t))}}})}bindSkeleton(e,t,r){let n=this.parsePoseNodes();for(let i in e){let s=e[i];a.get(parseInt(s.ID)).parents.forEach(function(e){if(t.has(e.ID)){let t=e.ID;a.get(t).parents.forEach(function(e){r.has(e.ID)&&r.get(e.ID).bind(new o.OdW(s.bones),n[e.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in n.Objects){let t=n.Objects.Pose;for(let r in t)if("BindPose"===t[r].attrType&&t[r].NbPoseNodes>0){let n=t[r].PoseNode;Array.isArray(n)?n.forEach(function(t){e[t.Node]=new o.yGw().fromArray(t.Matrix.a)}):e[n.Node]=new o.yGw().fromArray(n.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in n){if("AmbientColor"in n.GlobalSettings){let e=n.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],a=e[2];if(0!==t||0!==r||0!==a){let e=new o.Ilk(t,r,a).convertSRGBToLinear();i.add(new o.Mig(e,1))}}"UnitScaleFactor"in n.GlobalSettings&&(i.userData.unitScaleFactor=n.GlobalSettings.UnitScaleFactor.value)}}constructor(e,t){this.textureLoader=e,this.manager=t}}class J{parse(e){let t=new Map;if("Geometry"in n.Objects){let r=n.Objects.Geometry;for(let n in r){let i=a.get(parseInt(n)),o=this.parseGeometry(i,r[n],e);t.set(parseInt(n),o)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){let a=r.skeletons,i=[],o=e.parents.map(function(e){return n.Objects.Model[e.ID]});if(0===o.length)return;let s=e.children.reduce(function(e,t){return void 0!==a[t.ID]&&(e=a[t.ID]),e},null);e.children.forEach(function(e){void 0!==r.morphTargets[e.ID]&&i.push(r.morphTargets[e.ID])});let l=o[0],u={};"RotationOrder"in l&&(u.eulerOrder=ef(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);let c=ep(u);return this.genGeometry(t,s,i,c)}genGeometry(e,t,r,n){let a=new o.u9r;e.attrName&&(a.name=e.attrName);let i=this.parseGeoNode(e,t),s=this.genBuffers(i),l=new o.a$l(s.vertex,3);if(l.applyMatrix4(n),a.setAttribute("position",l),s.colors.length>0&&a.setAttribute("color",new o.a$l(s.colors,3)),t&&(a.setAttribute("skinIndex",new o.qlB(s.weightsIndices,4)),a.setAttribute("skinWeight",new o.a$l(s.vertexWeights,4)),a.FBX_Deformer=t),s.normal.length>0){let e=new o.Vkp().getNormalMatrix(n),t=new o.a$l(s.normal,3);t.applyNormalMatrix(e),a.setAttribute("normal",t)}if(s.uvs.forEach(function(e,t){a.setAttribute(0===t?"uv":"uv".concat(t),new o.a$l(s.uvs[t],2))}),i.material&&"AllSame"!==i.material.mappingType){let e=s.materialIndex[0],t=0;if(s.materialIndex.forEach(function(r,n){r!==e&&(a.addGroup(t,n-t,e),e=r,t=n)}),a.groups.length>0){let t=a.groups[a.groups.length-1],r=t.start+t.count;r!==s.materialIndex.length&&a.addGroup(r,s.materialIndex.length-r,e)}0===a.groups.length&&a.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(a,e,r,n),a}parseGeoNode(e,t){let r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return r.weightTable={},null!==t&&(r.skeleton=t,t.rawBones.forEach(function(e,t){e.indices.forEach(function(n,a){void 0===r.weightTable[n]&&(r.weightTable[n]=[]),r.weightTable[n].push({id:t,weight:e.weights[a]})})})),r}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,n=0,a=!1,i=[],o=[],s=[],l=[],u=[],c=[],p=this;return e.vertexIndices.forEach(function(f,h){let d;let m=!1;f<0&&(f^=-1,m=!0);let g=[],v=[];if(i.push(3*f,3*f+1,3*f+2),e.color){let t=el(h,r,f,e.color);s.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[f]&&e.weightTable[f].forEach(function(e){v.push(e.weight),g.push(e.id)}),v.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);let e=[0,0,0,0],t=[0,0,0,0];v.forEach(function(r,n){let a=r,i=g[n];t.forEach(function(t,r,n){if(a>t){n[r]=a,a=t;let o=e[r];e[r]=i,i=o}})}),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)u.push(v[e]),c.push(g[e])}if(e.normal){let t=el(h,r,f,e.normal);o.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(d=el(h,r,f,e.material)[0])<0&&(p.negativeMaterialIndices=!0,d=0),e.uv&&e.uv.forEach(function(e,t){let n=el(h,r,f,e);void 0===l[t]&&(l[t]=[]),l[t].push(n[0]),l[t].push(n[1])}),n++,m&&(p.genFace(t,e,i,d,o,s,l,u,c,n),r++,n=0,i=[],o=[],s=[],l=[],u=[],c=[])}),t}getNormalNewell(e){let t=new o.Pa4(0,0,0);for(let r=0;r<e.length;r++){let n=e[r],a=e[(r+1)%e.length];t.x+=(n.y-a.y)*(n.z+a.z),t.y+=(n.z-a.z)*(n.x+a.x),t.z+=(n.x-a.x)*(n.y+a.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){let t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new o.Pa4(0,1,0):new o.Pa4(0,0,1)).cross(t).normalize(),n=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:n}}flattenVertex(e,t,r){return new o.FM8(e.dot(t),e.dot(r))}genFace(e,t,r,n,a,i,s,l,u,c){let p;if(c>3){let e=[];for(let n=0;n<r.length;n+=3)e.push(new o.Pa4(t.vertexPositions[r[n]],t.vertexPositions[r[n+1]],t.vertexPositions[r[n+2]]));let{tangent:n,bitangent:a}=this.getNormalTangentAndBitangent(e),i=[];for(let t of e)i.push(this.flattenVertex(t,n,a));p=o.iDF.triangulateShape(i,[])}else p=[[0,1,2]];for(let[o,c,f]of p)e.vertex.push(t.vertexPositions[r[3*o]]),e.vertex.push(t.vertexPositions[r[3*o+1]]),e.vertex.push(t.vertexPositions[r[3*o+2]]),e.vertex.push(t.vertexPositions[r[3*c]]),e.vertex.push(t.vertexPositions[r[3*c+1]]),e.vertex.push(t.vertexPositions[r[3*c+2]]),e.vertex.push(t.vertexPositions[r[3*f]]),e.vertex.push(t.vertexPositions[r[3*f+1]]),e.vertex.push(t.vertexPositions[r[3*f+2]]),t.skeleton&&(e.vertexWeights.push(l[4*o]),e.vertexWeights.push(l[4*o+1]),e.vertexWeights.push(l[4*o+2]),e.vertexWeights.push(l[4*o+3]),e.vertexWeights.push(l[4*c]),e.vertexWeights.push(l[4*c+1]),e.vertexWeights.push(l[4*c+2]),e.vertexWeights.push(l[4*c+3]),e.vertexWeights.push(l[4*f]),e.vertexWeights.push(l[4*f+1]),e.vertexWeights.push(l[4*f+2]),e.vertexWeights.push(l[4*f+3]),e.weightsIndices.push(u[4*o]),e.weightsIndices.push(u[4*o+1]),e.weightsIndices.push(u[4*o+2]),e.weightsIndices.push(u[4*o+3]),e.weightsIndices.push(u[4*c]),e.weightsIndices.push(u[4*c+1]),e.weightsIndices.push(u[4*c+2]),e.weightsIndices.push(u[4*c+3]),e.weightsIndices.push(u[4*f]),e.weightsIndices.push(u[4*f+1]),e.weightsIndices.push(u[4*f+2]),e.weightsIndices.push(u[4*f+3])),t.color&&(e.colors.push(i[3*o]),e.colors.push(i[3*o+1]),e.colors.push(i[3*o+2]),e.colors.push(i[3*c]),e.colors.push(i[3*c+1]),e.colors.push(i[3*c+2]),e.colors.push(i[3*f]),e.colors.push(i[3*f+1]),e.colors.push(i[3*f+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(a[3*o]),e.normal.push(a[3*o+1]),e.normal.push(a[3*o+2]),e.normal.push(a[3*c]),e.normal.push(a[3*c+1]),e.normal.push(a[3*c+2]),e.normal.push(a[3*f]),e.normal.push(a[3*f+1]),e.normal.push(a[3*f+2])),t.uv&&t.uv.forEach(function(t,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(s[r][2*o]),e.uvs[r].push(s[r][2*o+1]),e.uvs[r].push(s[r][2*c]),e.uvs[r].push(s[r][2*c+1]),e.uvs[r].push(s[r][2*f]),e.uvs[r].push(s[r][2*f+1])})}addMorphTargets(e,t,r,a){if(0===r.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let i=this;r.forEach(function(r){r.rawTargets.forEach(function(r){let o=n.Objects.Geometry[r.geoID];void 0!==o&&i.genMorphGeometry(e,t,o,a,r.name)})})}genMorphGeometry(e,t,r,n,a){let i=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==r.Vertices?r.Vertices.a:[],l=void 0!==r.Indexes?r.Indexes.a:[],u=3*e.attributes.position.count,c=new Float32Array(u);for(let e=0;e<l.length;e++){let t=3*l[e];c[t]=s[3*e],c[t+1]=s[3*e+1],c[t+2]=s[3*e+2]}let p=this.genBuffers({vertexIndices:i,vertexPositions:c}),f=new o.a$l(p.vertex,3);f.name=a||r.attrName,f.applyMatrix4(n),e.morphAttributes.position.push(f)}parseNormals(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Normals.a,a=[];return"IndexToDirect"===r&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:a,mappingType:t,referenceType:r}}parseUVs(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.UV.a,a=[];return"IndexToDirect"===r&&(a=e.UVIndex.a),{dataSize:2,buffer:n,indices:a,mappingType:t,referenceType:r}}parseVertexColors(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Colors.a,a=[];"IndexToDirect"===r&&(a=e.ColorIndex.a);for(let e=0,t=new o.Ilk;e<n.length;e+=4)t.fromArray(n,e).convertSRGBToLinear().toArray(n,e);return{dataSize:4,buffer:n,indices:a,mappingType:t,referenceType:r}}parseMaterialIndices(e){let t=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};let n=e.Materials.a,a=[];for(let e=0;e<n.length;++e)a.push(e);return{dataSize:1,buffer:n,indices:a,mappingType:t,referenceType:r}}parseNurbsGeometry(e){let t,r;let n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new o.u9r;let a=n-1,i=e.KnotVector.a,s=[],l=e.Points.a;for(let e=0,t=l.length;e<t;e+=4)s.push(new o.Ltg().fromArray(l,e));if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){t=a,r=i.length-1-t;for(let e=0;e<a;++e)s.push(s[e])}let u=new Y(a,i,s,t,r).getPoints(12*s.length);return new o.u9r().setFromPoints(u)}constructor(){this.negativeMaterialIndices=!1}}class ee{parse(){let e=[],t=this.parseClips();if(void 0!==t)for(let r in t){let n=t[r],a=this.addClip(n);e.push(a)}return e}parseClips(){if(void 0===n.Objects.AnimationCurve)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=n.Objects.AnimationCurveNode,t=new Map;for(let r in e){let n=e[r];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){let e={id:n.id,attr:n.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){let t=n.Objects.AnimationCurve;for(let r in t){let n={id:t[r].id,times:t[r].KeyTime.a.map(eo),values:t[r].KeyValueFloat.a},i=a.get(n.id);if(void 0!==i){let t=i.parents[0].ID,r=i.parents[0].relationship;r.match(/X/)?e.get(t).curves.x=n:r.match(/Y/)?e.get(t).curves.y=n:r.match(/Z/)?e.get(t).curves.z=n:r.match(/DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=n)}}}parseAnimationLayers(e){let t=n.Objects.AnimationLayer,r=new Map;for(let s in t){let t=[],l=a.get(parseInt(s));void 0!==l&&(l.children.forEach(function(r,s){if(e.has(r.ID)){let l=e.get(r.ID);if(void 0!==l.curves.x||void 0!==l.curves.y||void 0!==l.curves.z){if(void 0===t[s]){let e=a.get(r.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID;if(void 0!==e){let a=n.Objects.Model[e.toString()];if(void 0===a){console.warn("THREE.FBXLoader: Encountered a unused curve.",r);return}let l={modelName:a.attrName?o.iUV.sanitizeNodeName(a.attrName):"",ID:a.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};i.traverse(function(e){e.ID===a.id&&(l.transform=e.matrix,e.userData.transformData&&(l.eulerOrder=e.userData.transformData.eulerOrder))}),l.transform||(l.transform=new o.yGw),"PreRotation"in a&&(l.preRotation=a.PreRotation.value),"PostRotation"in a&&(l.postRotation=a.PostRotation.value),t[s]=l}}t[s]&&(t[s][l.attr]=l)}else if(void 0!==l.curves.morph){if(void 0===t[s]){let e=a.get(r.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID,i=a.get(e).parents[0].ID,l=a.get(i).parents[0].ID,u=a.get(l).parents[0].ID,c=n.Objects.Model[u],p={modelName:c.attrName?o.iUV.sanitizeNodeName(c.attrName):"",morphName:n.Objects.Deformer[e].attrName};t[s]=p}t[s][l.attr]=l}}}),r.set(parseInt(s),t))}return r}parseAnimStacks(e){let t=n.Objects.AnimationStack,r={};for(let n in t){let i=a.get(parseInt(n)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let o=e.get(i[0].ID);r[n]={name:t[n].attrName,layer:o}}return r}addClip(e){let t=[],r=this;return e.layer.forEach(function(e){t=t.concat(r.generateTracks(e))}),new o.m7l(e.name,-1,t)}generateTracks(e){let t=[],r=new o.Pa4,n=new o.Pa4;if(e.transform&&e.transform.decompose(r,new o._fP,n),r=r.toArray(),n=n.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){let n=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==n&&t.push(n)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){let r=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==r&&t.push(r)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){let r=this.generateVectorTrack(e.modelName,e.S.curves,n,"scale");void 0!==r&&t.push(r)}if(void 0!==e.DeformPercent){let r=this.generateMorphTrack(e);void 0!==r&&t.push(r)}return t}generateVectorTrack(e,t,r,n){let a=this.getTimesForAllAxes(t),i=this.getKeyframeTrackValues(a,t,r);return new o.yC1(e+"."+n,a,i)}generateRotationTrack(e,t,r,n,a){let i,s;if(void 0!==t.x&&void 0!==t.y&&void 0!==t.z){let e=this.interpolateRotations(t.x,t.y,t.z,a);i=e[0],s=e[1]}void 0!==r&&((r=r.map(o.M8C.degToRad)).push(a),r=new o.USm().fromArray(r),r=new o._fP().setFromEuler(r)),void 0!==n&&((n=n.map(o.M8C.degToRad)).push(a),n=new o.USm().fromArray(n),n=new o._fP().setFromEuler(n).invert());let l=new o._fP,u=new o.USm,c=[];if(!s||!i)return new o.iLg(e+".quaternion",[],[]);for(let e=0;e<s.length;e+=3)u.set(s[e],s[e+1],s[e+2],a),l.setFromEuler(u),void 0!==r&&l.premultiply(r),void 0!==n&&l.multiply(n),e>2&&0>new o._fP().fromArray(c,(e-3)/3*4).dot(l)&&l.set(-l.x,-l.y,-l.z,-l.w),l.toArray(c,e/3*4);return new o.iLg(e+".quaternion",i,c)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,r=t.values.map(function(e){return e/100}),n=i.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new o.dUE(e.modelName+".morphTargetInfluences["+n+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),(t=t.sort(function(e,t){return e-t})).length>1){let e=1,r=t[0];for(let n=1;n<t.length;n++){let a=t[n];a!==r&&(t[e]=a,r=a,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,r){let n=[],a=-1,i=-1,o=-1;return e.forEach(function(e){if(t.x&&(a=t.x.times.indexOf(e)),t.y&&(i=t.y.times.indexOf(e)),t.z&&(o=t.z.times.indexOf(e)),-1!==a){let e=t.x.values[a];n.push(e),r[0]=e}else n.push(r[0]);if(-1!==i){let e=t.y.values[i];n.push(e),r[1]=e}else n.push(r[1]);if(-1!==o){let e=t.z.values[o];n.push(e),r[2]=e}else n.push(r[2])}),n}interpolateRotations(e,t,r,n){let a=[],i=[];a.push(e.times[0]),i.push(o.M8C.degToRad(e.values[0])),i.push(o.M8C.degToRad(t.values[0])),i.push(o.M8C.degToRad(r.values[0]));for(let s=1;s<e.values.length;s++){let l=[e.values[s-1],t.values[s-1],r.values[s-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let u=l.map(o.M8C.degToRad),c=[e.values[s],t.values[s],r.values[s]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;let p=c.map(o.M8C.degToRad),f=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],h=[Math.abs(f[0]),Math.abs(f[1]),Math.abs(f[2])];if(h[0]>=180||h[1]>=180||h[2]>=180){let t=Math.max(...h)/180,r=new o.USm(...u,n),l=new o.USm(...p,n),c=new o._fP().setFromEuler(r),f=new o._fP().setFromEuler(l);c.dot(f)&&f.set(-f.x,-f.y,-f.z,-f.w);let d=e.times[s-1],m=e.times[s]-d,g=new o._fP,v=new o.USm;for(let e=0;e<1;e+=1/t)g.copy(c.clone().slerp(f.clone(),e)),a.push(d+e*m),v.setFromQuaternion(g,n),i.push(v.x),i.push(v.y),i.push(v.z)}else a.push(e.times[s]),i.push(o.M8C.degToRad(e.values[s])),i.push(o.M8C.degToRad(t.values[s])),i.push(o.M8C.degToRad(r.values[s]))}return[a,i]}}class et{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new ea,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,r=e.split(/[\r\n]+/);return r.forEach(function(e,n){let a=e.match(/^[\s\t]*;/),i=e.match(/^[\s\t]*$/);if(a||i)return;let o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):s?t.parseNodeProperty(e,s,r[++n]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}),this.allNodes}parseNodeBegin(e,t){let r=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:r},i=this.parseNodeAttr(n),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,a):r in o?("PoseNode"===r?o.PoseNode.push(a):void 0!==o[r].id&&(o[r]={},o[r][o[r].id]=o[r]),""!==i.id&&(o[r][i.id]=a)):"number"==typeof i.id?(o[r]={},o[r][i.id]=a):"Properties70"!==r&&("PoseNode"===r?o[r]=[a]:o[r]=a),"number"==typeof i.id&&(a.id=i.id),""!==i.name&&(a.attrName=i.name),""!==i.type&&(a.attrType=i.type),this.pushStack(a)}parseNodeAttr(e){let t=e[0];""!==e[0]&&isNaN(t=parseInt(e[0]))&&(t=e[0]);let r="",n="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:r,type:n}}parseNodeProperty(e,t,r){let n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===a&&(a=r.replace(/"/g,"").replace(/,$/,"").trim());let i=this.getCurrentNode();if("Properties70"===i.name){this.parseNodeSpecialProperty(e,n,a);return}if("C"===n){let e=a.split(",").slice(1),t=parseInt(e[0]),r=parseInt(e[1]),o=a.split(",").slice(3);o=o.map(function(e){return e.trim().replace(/^"/,"")}),n="connections",function(e,t){for(let r=0,n=e.length,a=t.length;r<a;r++,n++)e[n]=t[r]}(a=[t,r],o),void 0===i[n]&&(i[n]=[])}"Node"===n&&(i.id=a),n in i&&Array.isArray(i[n])?i[n].push(a):"a"!==n?i[n]=a:i.a=a,this.setCurrentProp(i,n),"a"===n&&","!==a.slice(-1)&&(i.a=eh(a))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=eh(t.a))}parseNodeSpecialProperty(e,t,r){let n=r.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=n[0],i=n[1],o=n[2],s=n[3],l=n[4];switch(i){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=eh(l)}this.getPrevNode()[a]={type:i,type2:o,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),a)}}class er{parse(e){let t=new en(e);t.skip(23);let r=t.getUint32();if(r<6400)throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);let n=new ea;for(;!this.endOfContent(t);){let e=this.parseNode(t,r);null!==e&&n.add(e.name,e)}return n}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let r={},n=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let i=e.getUint8(),o=e.getString(i);if(0===n)return null;let s=[];for(let t=0;t<a;t++)s.push(this.parseProperty(e));let l=s.length>0?s[0]:"",u=s.length>1?s[1]:"",c=s.length>2?s[2]:"";for(r.singleProperty=1===a&&e.getOffset()===n;n>e.getOffset();){let n=this.parseNode(e,t);null!==n&&this.parseSubNode(o,r,n)}return r.propertyList=s,"number"==typeof l&&(r.id=l),""!==u&&(r.attrName=u),""!==c&&(r.attrType=c),""!==o&&(r.name=o),r}parseSubNode(e,t,r){if(!0===r.singleProperty){let e=r.propertyList[0];Array.isArray(e)?(t[r.name]=r,r.a=e):t[r.name]=e}else if("Connections"===e&&"C"===r.name){let e=[];r.propertyList.forEach(function(t,r){0!==r&&e.push(t)}),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===r.name)Object.keys(r).forEach(function(e){t[e]=r[e]});else if("Properties70"===e&&"P"===r.name){let e,n=r.propertyList[0],a=r.propertyList[1],i=r.propertyList[2],o=r.propertyList[3];0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),e="Color"===a||"ColorRGB"===a||"Vector"===a||"Vector3D"===a||0===a.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],t[n]={type:a,type2:i,flag:o,value:e}}else void 0===t[r.name]?"number"==typeof r.id?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:"PoseNode"===r.name?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):void 0===t[r.name][r.id]&&(t[r.name][r.id]=r)}parseProperty(e){let t;let r=e.getString(1);switch(r){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n;let a=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(r){case"b":case"c":return e.getBooleanArray(a);case"d":return e.getFloat64Array(a);case"f":return e.getFloat32Array(a);case"i":return e.getInt32Array(a);case"l":return e.getInt64Array(a)}let s=new en(M((K(n=new Uint8Array(e.getArrayBuffer(o))),n.subarray(2,-4)),void 0).buffer);switch(r){case"b":case"c":return s.getBooleanArray(a);case"d":return s.getFloat64Array(a);case"f":return s.getFloat32Array(a);case"i":return s.getInt32Array(a);case"l":return s.getInt64Array(a)}break;default:throw Error("THREE.FBXLoader: Unknown property type "+r)}}}class en{getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(1&this.getUint8())==1}getBooleanArray(e){let t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return(this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t)?(t=4294967295&~t,4294967295==(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e}getInt64Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,r=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let n=r.indexOf(0);return n>=0&&(r=new Uint8Array(this.dv.buffer,t,n)),this._textDecoder.decode(r)}constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}}class ea{add(e,t){this[e]=t}}function ei(e){let t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function eo(e){return e/46186158e3}let es=[];function el(e,t,r,n){let a;switch(n.mappingType){case"ByPolygonVertex":a=e;break;case"ByPolygon":a=t;break;case"ByVertice":a=r;break;case"AllSame":a=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(a=n.indices[a]);let i=a*n.dataSize,o=i+n.dataSize;return function(e,t,r,n){for(let a=r,i=0;a<n;a++,i++)e[i]=t[a];return e}(es,n.buffer,i,o)}let eu=new o.USm,ec=new o.Pa4;function ep(e){let t=new o.yGw,r=new o.yGw,n=new o.yGw,a=new o.yGw,i=new o.yGw,s=new o.yGw,l=new o.yGw,u=new o.yGw,c=new o.yGw,p=new o.yGw,f=new o.yGw,h=new o.yGw,d=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(ec.fromArray(e.translation)),e.preRotation){let t=e.preRotation.map(o.M8C.degToRad);t.push(e.eulerOrder||o.USm.DEFAULT_ORDER),r.makeRotationFromEuler(eu.fromArray(t))}if(e.rotation){let t=e.rotation.map(o.M8C.degToRad);t.push(e.eulerOrder||o.USm.DEFAULT_ORDER),n.makeRotationFromEuler(eu.fromArray(t))}if(e.postRotation){let t=e.postRotation.map(o.M8C.degToRad);t.push(e.eulerOrder||o.USm.DEFAULT_ORDER),a.makeRotationFromEuler(eu.fromArray(t)),a.invert()}e.scale&&i.scale(ec.fromArray(e.scale)),e.scalingOffset&&l.setPosition(ec.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(ec.fromArray(e.scalingPivot)),e.rotationOffset&&u.setPosition(ec.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(ec.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f.copy(e.parentMatrix),p.copy(e.parentMatrixWorld));let m=r.clone().multiply(n).multiply(a),g=new o.yGw;g.extractRotation(p);let v=new o.yGw;v.copyPosition(p);let y=v.clone().invert().multiply(p),w=g.clone().invert().multiply(y),b=new o.yGw;if(0===d)b.copy(g).multiply(m).multiply(w).multiply(i);else if(1===d)b.copy(g).multiply(w).multiply(m).multiply(i);else{let e=new o.yGw().scale(new o.Pa4().setFromMatrixScale(f)).clone().invert(),t=w.clone().multiply(e);b.copy(g).multiply(m).multiply(t).multiply(i)}let I=c.clone().invert(),x=s.clone().invert(),T=t.clone().multiply(u).multiply(c).multiply(r).multiply(n).multiply(a).multiply(I).multiply(l).multiply(s).multiply(i).multiply(x),P=new o.yGw().copyPosition(T),E=p.clone().multiply(P);return h.copyPosition(E),(T=h.clone().multiply(b)).premultiply(p.invert()),T}function ef(e){return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),"ZYX"):["ZYX","YZX","XZY","ZXY","YXZ","XYZ"][e]}function eh(e){return e.split(",").map(function(e){return parseFloat(e)})}function ed(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),new TextDecoder().decode(new Uint8Array(e,t,r))}}}]);