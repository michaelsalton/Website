"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{2175:function(t,e,i){let r;function n(t){return null!==t&&"object"==typeof t&&"function"==typeof t.start}i.d(e,{E:function(){return sp}});let s=t=>Array.isArray(t);function o(t,e){if(!Array.isArray(e))return!1;let i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}function a(t){return"string"==typeof t||Array.isArray(t)}function l(t){let e=[{},{}];return null==t||t.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function u(t,e,i,r){if("function"==typeof e){let[n,s]=l(r);e=e(void 0!==i?i:t.custom,n,s)}if("string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e){let[n,s]=l(r);e=e(void 0!==i?i:t.custom,n,s)}return e}function h(t,e,i){let r=t.getProps();return u(r,e,void 0!==i?i:r.custom,t)}let c=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],d=["initial",...c];function p(t){let e;return()=>(void 0===e&&(e=t()),e)}let f=p(()=>void 0!==window.ScrollTimeline);class m{get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=e}attachTimeline(t,e){let i=this.animations.map(i=>f()&&i.attachTimeline?i.attachTimeline(t):"function"==typeof e?e(i):void 0);return()=>{i.forEach((t,e)=>{t&&t(),this.animations[e].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}}class v extends m{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function g(t,e){return t?t[e]||t.default||t:void 0}function y(t){let e=0,i=t.next(e);for(;!i.done&&e<2e4;)e+=50,i=t.next(e);return e>=2e4?1/0:e}function w(t){return"function"==typeof t}function x(t,e){t.timeline=e,t.onfinish=null}let b=t=>Array.isArray(t)&&"number"==typeof t[0],T={linearEasing:void 0},P=function(t,e){let i=p(t);return()=>{var t;return null!==(t=T[e])&&void 0!==t?t:i()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),A=(t,e,i)=>{let r=e-t;return 0===r?1:(i-t)/r},S=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="",n=Math.max(Math.round(e/i),2);for(let e=0;e<n;e++)r+=t(A(0,n-1,e))+", ";return"linear(".concat(r.substring(0,r.length-2),")")},E=t=>{let[e,i,r,n]=t;return"cubic-bezier(".concat(e,", ").concat(i,", ").concat(r,", ").concat(n,")")},D={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:E([0,.65,.55,1]),circOut:E([.55,0,1,.45]),backIn:E([.31,.01,.66,-.59]),backOut:E([.33,1.53,.69,.99])},M={x:!1,y:!1};function k(t,e){let i=function(t,e,i){var r;if(t instanceof Element)return[t];if("string"==typeof t){let n=document;e&&(n=e.current);let s=null!==(r=null==i?void 0:i[t])&&void 0!==r?r:n.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}(t),r=new AbortController;return[i,{passive:!0,...e,signal:r.signal},()=>r.abort()]}function C(t){return e=>{"touch"===e.pointerType||M.x||M.y||t(e)}}let R=(t,e)=>!!e&&(t===e||R(t,e.parentElement)),I=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary,L=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),V=new WeakSet;function F(t){return e=>{"Enter"===e.key&&t(e)}}function O(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}let j=(t,e)=>{let i=t.currentTarget;if(!i)return;let r=F(()=>{if(V.has(i))return;O(i,"down");let t=F(()=>{O(i,"up")});i.addEventListener("keyup",t,e),i.addEventListener("blur",()=>O(i,"cancel"),e)});i.addEventListener("keydown",r,e),i.addEventListener("blur",()=>i.removeEventListener("keydown",r),e)};function N(t){return I(t)&&!(M.x||M.y)}let B=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],U=new Set(B),W=new Set(["width","height","top","left","right","bottom",...B]),G=t=>!!(t&&"object"==typeof t&&t.mix&&t.toValue),z=t=>s(t)?t[t.length-1]||0:t,X={skipAnimations:!1,useManualTiming:!1},_=t=>t,H=["read","resolveKeyframes","update","preRender","render","postRender"];function K(t,e){let i=!1,r=!0,n={delta:0,timestamp:0,isProcessing:!1},s=()=>i=!0,o=H.reduce((t,e)=>(t[e]=function(t){let e=new Set,i=new Set,r=!1,n=!1,s=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1};function a(e){s.has(e)&&(l.schedule(e),t()),e(o)}let l={schedule:function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=o&&r?e:i;return n&&s.add(t),a.has(t)||a.add(t),t},cancel:t=>{i.delete(t),s.delete(t)},process:t=>{if(o=t,r){n=!0;return}r=!0,[e,i]=[i,e],e.forEach(a),e.clear(),r=!1,n&&(n=!1,l.process(t))}};return l}(s),t),{}),{read:a,resolveKeyframes:l,update:u,preRender:h,render:c,postRender:d}=o,p=()=>{let s=X.useManualTiming?n.timestamp:performance.now();i=!1,n.delta=r?1e3/60:Math.max(Math.min(s-n.timestamp,40),1),n.timestamp=s,n.isProcessing=!0,a.process(n),l.process(n),u.process(n),h.process(n),c.process(n),d.process(n),n.isProcessing=!1,i&&e&&(r=!1,t(p))},f=()=>{i=!0,r=!0,n.isProcessing||t(p)};return{schedule:H.reduce((t,e)=>{let r=o[e];return t[e]=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i||f(),r.schedule(t,e,n)},t},{}),cancel:t=>{for(let e=0;e<H.length;e++)o[H[e]].cancel(t)},state:n,steps:o}}let{schedule:Y,cancel:q,state:Z,steps:$}=K("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:_,!0);function J(){r=void 0}let Q={now:()=>(void 0===r&&Q.set(Z.isProcessing||X.useManualTiming?Z.timestamp:performance.now()),r),set:t=>{r=t,queueMicrotask(J)}};function tt(t,e){-1===t.indexOf(e)&&t.push(e)}function te(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}class ti{add(t){return tt(this.subscriptions,t),()=>te(this.subscriptions,t)}notify(t,e,i){let r=this.subscriptions.length;if(r){if(1===r)this.subscriptions[0](t,e,i);else for(let n=0;n<r;n++){let r=this.subscriptions[n];r&&r(t,e,i)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}constructor(){this.subscriptions=[]}}let tr=t=>!isNaN(parseFloat(t)),tn={current:void 0};class ts{setCurrent(t){this.current=t,this.updatedAt=Q.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=tr(this.current))}setPrevFrameValue(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ti);let i=this.events[t].add(e);return"change"===t?()=>{i(),Y.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(let t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return tn.current&&tn.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var t;let e=Q.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;let i=Math.min(this.updatedAt-this.prevUpdatedAt,30);return t=parseFloat(this.current)-parseFloat(this.prevFrameValue),i?1e3/i*t:0}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}constructor(t,e={}){var i=this;this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=Q.now();i.updatedAt!==r&&i.setPrevFrameValue(),i.prev=i.current,i.setCurrent(t),i.current!==i.prev&&i.events.change&&i.events.change.notify(i.current),e&&i.events.renderRequest&&i.events.renderRequest.notify(i.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}}function to(t,e){return new ts(t,e)}let ta=t=>!!(t&&t.getVelocity);function tl(t,e){let i=t.getValue("willChange");if(ta(i)&&i.add)return i.add(e)}let tu=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),th="data-"+tu("framerAppearId"),tc=t=>1e3*t,td=t=>t/1e3,tp={current:!1},tf=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t;function tm(t,e,i,r){if(t===e&&i===r)return _;let n=e=>(function(t,e,i,r,n){let s,o;let a=0;do(s=tf(o=e+(i-e)/2,r,n)-t)>0?i=o:e=o;while(Math.abs(s)>1e-7&&++a<12);return o})(e,0,1,t,i);return t=>0===t||1===t?t:tf(n(t),e,r)}let tv=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,tg=t=>e=>1-t(1-e),ty=tm(.33,1.53,.69,.99),tw=tg(ty),tx=tv(tw),tb=t=>(t*=2)<1?.5*tw(t):.5*(2-Math.pow(2,-10*(t-1))),tT=t=>1-Math.sin(Math.acos(t)),tP=tg(tT),tA=tv(tT),tS=t=>/^0[^.\s]+$/u.test(t),tE=(t,e,i)=>i>e?e:i<t?t:i,tD={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},tM={...tD,transform:t=>tE(0,1,t)},tk={...tD,default:1},tC=t=>Math.round(1e5*t)/1e5,tR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,tI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tL=(t,e)=>i=>!!("string"==typeof i&&tI.test(i)&&i.startsWith(t)||e&&null!=i&&Object.prototype.hasOwnProperty.call(i,e)),tV=(t,e,i)=>r=>{if("string"!=typeof r)return r;let[n,s,o,a]=r.match(tR);return{[t]:parseFloat(n),[e]:parseFloat(s),[i]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},tF=t=>tE(0,255,t),tO={...tD,transform:t=>Math.round(tF(t))},tj={test:tL("rgb","red"),parse:tV("red","green","blue"),transform:t=>{let{red:e,green:i,blue:r,alpha:n=1}=t;return"rgba("+tO.transform(e)+", "+tO.transform(i)+", "+tO.transform(r)+", "+tC(tM.transform(n))+")"}},tN={test:tL("#"),parse:function(t){let e="",i="",r="",n="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),r=t.substring(5,7),n=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),r=t.substring(3,4),n=t.substring(4,5),e+=e,i+=i,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}},transform:tj.transform},tB=t=>({test:e=>"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>"".concat(e).concat(t)}),tU=tB("deg"),tW=tB("%"),tG=tB("px"),tz=tB("vh"),tX=tB("vw"),t_={...tW,parse:t=>tW.parse(t)/100,transform:t=>tW.transform(100*t)},tH={test:tL("hsl","hue"),parse:tV("hue","saturation","lightness"),transform:t=>{let{hue:e,saturation:i,lightness:r,alpha:n=1}=t;return"hsla("+Math.round(e)+", "+tW.transform(tC(i))+", "+tW.transform(tC(r))+", "+tC(tM.transform(n))+")"}},tK={test:t=>tj.test(t)||tN.test(t)||tH.test(t),parse:t=>tj.test(t)?tj.parse(t):tH.test(t)?tH.parse(t):tN.parse(t),transform:t=>"string"==typeof t?t:t.hasOwnProperty("red")?tj.transform(t):tH.transform(t)},tY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,tq="number",tZ="color",t$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tJ(t){let e=t.toString(),i=[],r={color:[],number:[],var:[]},n=[],s=0,o=e.replace(t$,t=>(tK.test(t)?(r.color.push(s),n.push(tZ),i.push(tK.parse(t))):t.startsWith("var(")?(r.var.push(s),n.push("var"),i.push(t)):(r.number.push(s),n.push(tq),i.push(parseFloat(t))),++s,"${}")).split("${}");return{values:i,split:o,indexes:r,types:n}}function tQ(t){return tJ(t).values}function t0(t){let{split:e,types:i}=tJ(t),r=e.length;return t=>{let n="";for(let s=0;s<r;s++)if(n+=e[s],void 0!==t[s]){let e=i[s];e===tq?n+=tC(t[s]):e===tZ?n+=tK.transform(t[s]):n+=t[s]}return n}}let t1=t=>"number"==typeof t?0:t,t2={test:function(t){var e,i;return isNaN(t)&&"string"==typeof t&&((null===(e=t.match(tR))||void 0===e?void 0:e.length)||0)+((null===(i=t.match(tY))||void 0===i?void 0:i.length)||0)>0},parse:tQ,createTransformer:t0,getAnimatableNone:function(t){let e=tQ(t);return t0(t)(e.map(t1))}},t3=new Set(["brightness","contrast","saturate","opacity"]);function t4(t){let[e,i]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;let[r]=i.match(tR)||[];if(!r)return t;let n=i.replace(r,""),s=t3.has(e)?1:0;return r!==i&&(s*=100),e+"("+s+n+")"}let t5=/\b([a-z-]*)\(.*?\)/gu,t8={...t2,getAnimatableNone:t=>{let e=t.match(t5);return e?e.map(t4).join(" "):t}},t6={...tD,transform:Math.round},t9={borderWidth:tG,borderTopWidth:tG,borderRightWidth:tG,borderBottomWidth:tG,borderLeftWidth:tG,borderRadius:tG,radius:tG,borderTopLeftRadius:tG,borderTopRightRadius:tG,borderBottomRightRadius:tG,borderBottomLeftRadius:tG,width:tG,maxWidth:tG,height:tG,maxHeight:tG,top:tG,right:tG,bottom:tG,left:tG,padding:tG,paddingTop:tG,paddingRight:tG,paddingBottom:tG,paddingLeft:tG,margin:tG,marginTop:tG,marginRight:tG,marginBottom:tG,marginLeft:tG,backgroundPositionX:tG,backgroundPositionY:tG,rotate:tU,rotateX:tU,rotateY:tU,rotateZ:tU,scale:tk,scaleX:tk,scaleY:tk,scaleZ:tk,skew:tU,skewX:tU,skewY:tU,distance:tG,translateX:tG,translateY:tG,translateZ:tG,x:tG,y:tG,z:tG,perspective:tG,transformPerspective:tG,opacity:tM,originX:t_,originY:t_,originZ:tG,zIndex:t6,size:tG,fillOpacity:tM,strokeOpacity:tM,numOctaves:t6},t7={...t9,color:tK,backgroundColor:tK,outlineColor:tK,fill:tK,stroke:tK,borderColor:tK,borderTopColor:tK,borderRightColor:tK,borderBottomColor:tK,borderLeftColor:tK,filter:t8,WebkitFilter:t8},et=t=>t7[t];function ee(t,e){let i=et(t);return i!==t8&&(i=t2),i.getAnimatableNone?i.getAnimatableNone(e):void 0}let ei=new Set(["auto","none","0"]),er=t=>t===tD||t===tG,en=(t,e)=>parseFloat(t.split(", ")[e]),es=(t,e)=>(i,r)=>{let{transform:n}=r;if("none"===n||!n)return 0;let s=n.match(/^matrix3d\((.+)\)$/u);if(s)return en(s[1],e);{let e=n.match(/^matrix\((.+)\)$/u);return e?en(e[1],t):0}},eo=new Set(["x","y","z"]),ea=B.filter(t=>!eo.has(t)),el={width:(t,e)=>{let{x:i}=t,{paddingLeft:r="0",paddingRight:n="0"}=e;return i.max-i.min-parseFloat(r)-parseFloat(n)},height:(t,e)=>{let{y:i}=t,{paddingTop:r="0",paddingBottom:n="0"}=e;return i.max-i.min-parseFloat(r)-parseFloat(n)},top:(t,e)=>{let{top:i}=e;return parseFloat(i)},left:(t,e)=>{let{left:i}=e;return parseFloat(i)},bottom:(t,e)=>{let{y:i}=t,{top:r}=e;return parseFloat(r)+(i.max-i.min)},right:(t,e)=>{let{x:i}=t,{left:r}=e;return parseFloat(r)+(i.max-i.min)},x:es(4,13),y:es(5,14)};el.translateX=el.x,el.translateY=el.y;let eu=new Set,eh=!1,ec=!1;function ed(){if(ec){let t=Array.from(eu).filter(t=>t.needsMeasurement),e=new Set(t.map(t=>t.element)),i=new Map;e.forEach(t=>{let e=function(t){let e=[];return ea.forEach(i=>{let r=t.getValue(i);void 0!==r&&(e.push([i,r.get()]),r.set(i.startsWith("scale")?1:0))}),e}(t);e.length&&(i.set(t,e),t.render())}),t.forEach(t=>t.measureInitialState()),e.forEach(t=>{t.render();let e=i.get(t);e&&e.forEach(e=>{var i;let[r,n]=e;null===(i=t.getValue(r))||void 0===i||i.set(n)})}),t.forEach(t=>t.measureEndState()),t.forEach(t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)})}ec=!1,eh=!1,eu.forEach(t=>t.complete()),eu.clear()}function ep(){eu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ec=!0)})}class ef{scheduleResolve(){this.isScheduled=!0,this.isAsync?(eu.add(this),eh||(eh=!0,Y.read(ep),Y.resolveKeyframes(ed))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:t,name:e,element:i,motionValue:r}=this;for(let n=0;n<t.length;n++)if(null===t[n]){if(0===n){let n=null==r?void 0:r.get(),s=t[t.length-1];if(void 0!==n)t[0]=n;else if(i&&e){let r=i.readValue(e,s);null!=r&&(t[0]=r)}void 0===t[0]&&(t[0]=s),r&&void 0===n&&r.set(t[0])}else t[n]=t[n-1]}}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),eu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,eu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}constructor(t,e,i,r,n,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=r,this.element=n,this.isAsync=s}}let em=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),ev=t=>e=>"string"==typeof e&&e.startsWith(t),eg=ev("--"),ey=ev("var(--"),ew=t=>!!ey(t)&&ex.test(t.split("/*")[0].trim()),ex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eb=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,eT=t=>e=>e.test(t),eP=[tD,tG,tW,tU,tX,tz,{test:t=>"auto"===t,parse:t=>t}],eA=t=>eP.find(eT(t));class eS extends ef{readKeyframes(){let{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let i=0;i<t.length;i++){let r=t[i];if("string"==typeof r&&ew(r=r.trim())){let n=function t(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_(r<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));let[n,s]=function(t){let e=eb.exec(t);if(!e)return[,];let[,i,r,n]=e;return["--".concat(null!=i?i:r),n]}(e);if(!n)return;let o=window.getComputedStyle(i).getPropertyValue(n);if(o){let t=o.trim();return em(t)?parseFloat(t):t}return ew(s)?t(s,i,r+1):s}(r,e.current);void 0!==n&&(t[i]=n),i===t.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!W.has(i)||2!==t.length)return;let[r,n]=t,s=eA(r),o=eA(n);if(s!==o){if(er(s)&&er(o))for(let e=0;e<t.length;e++){let i=t[e];"string"==typeof i&&(t[e]=parseFloat(i))}else this.needsMeasurement=!0}}resolveNoneKeyframes(){let{unresolvedKeyframes:t,name:e}=this,i=[];for(let e=0;e<t.length;e++){var r;("number"==typeof(r=t[e])?0===r:null===r||"none"===r||"0"===r||tS(r))&&i.push(e)}i.length&&function(t,e,i){let r,n=0;for(;n<t.length&&!r;){let e=t[n];"string"==typeof e&&!ei.has(e)&&tJ(e).values.length&&(r=t[n]),n++}if(r&&i)for(let n of e)t[n]=ee(i,r)}(t,i,e)}measureInitialState(){let{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;"height"===i&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=el[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;let r=e[e.length-1];void 0!==r&&t.getValue(i,r).jump(r,!1)}measureEndState(){var t;let{element:e,name:i,unresolvedKeyframes:r}=this;if(!e||!e.current)return;let n=e.getValue(i);n&&n.jump(this.measuredOrigin,!1);let s=r.length-1,o=r[s];r[s]=el[i](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(t=this.removedTransforms)||void 0===t?void 0:t.length)&&this.removedTransforms.forEach(t=>{let[i,r]=t;e.getValue(i).set(r)}),this.resolveNoneKeyframes()}constructor(t,e,i,r,n){super(t,e,i,r,n,!0)}}let eE=(t,e)=>"zIndex"!==e&&!!("number"==typeof t||Array.isArray(t)||"string"==typeof t&&(t2.test(t)||"0"===t)&&!t.startsWith("url(")),eD=t=>null!==t;function eM(t,e,i){let{repeat:r,repeatType:n="loop"}=e,s=t.filter(eD),o=r&&"loop"!==n&&r%2==1?0:s.length-1;return o&&void 0!==i?i:s[o]}class ek{calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(ep(),ed()),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=Q.now(),this.hasAttemptedResolve=!0;let{name:i,type:r,velocity:n,delay:s,onComplete:o,onUpdate:a,isGenerator:l}=this.options;if(!l&&!function(t,e,i,r){let n=t[0];if(null===n)return!1;if("display"===e||"visibility"===e)return!0;let s=t[t.length-1],o=eE(n,e),a=eE(s,e);return _(o===a,"You are trying to animate ".concat(e,' from "').concat(n,'" to "').concat(s,'". ').concat(n," is not an animatable value - to enable this animation set ").concat(n," to a value animatable to ").concat(s," via the `style` property.")),!!o&&!!a&&(function(t){let e=t[0];if(1===t.length)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}(t)||("spring"===i||w(i))&&r)}(t,i,r,n)){if(tp.current||!s){a&&a(eM(t,this.options,e)),o&&o(),this.resolveFinishedPromise();return}this.options.duration=0}let u=this.initPlayback(t,e);!1!==u&&(this._resolved={keyframes:t,finalKeyframe:e,...u},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Q.now(),this.options={autoplay:t,delay:e,type:i,repeat:r,repeatDelay:n,repeatType:s,...o},this.updateFinishedPromise()}}let eC=(t,e,i)=>t+(e-t)*i;function eR(t,e,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?t+(e-t)*6*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function eI(t,e){return i=>i>0?e:t}let eL=(t,e,i)=>{let r=t*t,n=i*(e*e-r)+r;return n<0?0:Math.sqrt(n)},eV=[tN,tj,tH],eF=t=>eV.find(e=>e.test(t));function eO(t){let e=eF(t);if(_(!!e,"'".concat(t,"' is not an animatable color. Use the equivalent color code instead.")),!e)return!1;let i=e.parse(t);return e===tH&&(i=function(t){let{hue:e,saturation:i,lightness:r,alpha:n}=t;e/=360,r/=100;let s=0,o=0,a=0;if(i/=100){let t=r<.5?r*(1+i):r+i-r*i,n=2*r-t;s=eR(n,t,e+1/3),o=eR(n,t,e),a=eR(n,t,e-1/3)}else s=o=a=r;return{red:Math.round(255*s),green:Math.round(255*o),blue:Math.round(255*a),alpha:n}}(i)),i}let ej=(t,e)=>{let i=eO(t),r=eO(e);if(!i||!r)return eI(t,e);let n={...i};return t=>(n.red=eL(i.red,r.red,t),n.green=eL(i.green,r.green,t),n.blue=eL(i.blue,r.blue,t),n.alpha=eC(i.alpha,r.alpha,t),tj.transform(n))},eN=(t,e)=>i=>e(t(i)),eB=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce(eN)},eU=new Set(["none","hidden"]);function eW(t,e){return i=>eC(t,e,i)}function eG(t){return"number"==typeof t?eW:"string"==typeof t?ew(t)?eI:tK.test(t)?ej:e_:Array.isArray(t)?ez:"object"==typeof t?tK.test(t)?ej:eX:eI}function ez(t,e){let i=[...t],r=i.length,n=t.map((t,i)=>eG(t)(t,e[i]));return t=>{for(let e=0;e<r;e++)i[e]=n[e](t);return i}}function eX(t,e){let i={...t,...e},r={};for(let n in i)void 0!==t[n]&&void 0!==e[n]&&(r[n]=eG(t[n])(t[n],e[n]));return t=>{for(let e in r)i[e]=r[e](t);return i}}let e_=(t,e)=>{let i=t2.createTransformer(e),r=tJ(t),n=tJ(e);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?eU.has(t)&&!n.values.length||eU.has(e)&&!r.values.length?eU.has(t)?i=>i<=0?t:e:i=>i>=1?e:t:eB(ez(function(t,e){var i;let r=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){let o=e.types[s],a=t.indexes[o][n[o]],l=null!==(i=t.values[a])&&void 0!==i?i:0;r[s]=l,n[o]++}return r}(r,n),n.values),i):(_(!0,"Complex values '".concat(t,"' and '").concat(e,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),eI(t,e))};function eH(t,e,i){return"number"==typeof t&&"number"==typeof e&&"number"==typeof i?eC(t,e,i):eG(t)(t,e)}function eK(t,e,i){var r,n;let s=Math.max(e-5,0);return r=i-t(s),(n=e-s)?1e3/n*r:0}let eY={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function eq(t,e){return t*Math.sqrt(1-e*e)}let eZ=["duration","bounce"],e$=["stiffness","damping","mass"];function eJ(t,e){return e.some(e=>void 0!==t[e])}function eQ(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eY.visualDuration,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eY.bounce,r="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:i}:e,{restSpeed:n,restDelta:s}=r,o=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],l={done:!1,value:o},{stiffness:u,damping:h,mass:c,duration:d,velocity:p,isResolvedFromDuration:f}=function(t){let e={velocity:eY.velocity,stiffness:eY.stiffness,damping:eY.damping,mass:eY.mass,isResolvedFromDuration:!1,...t};if(!eJ(t,e$)&&eJ(t,eZ)){if(t.visualDuration){let i=2*Math.PI/(1.2*t.visualDuration),r=i*i,n=2*tE(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:eY.mass,stiffness:r,damping:n}}else{let i=function(t){let e,i,{duration:r=eY.duration,bounce:n=eY.bounce,velocity:s=eY.velocity,mass:o=eY.mass}=t;_(r<=tc(eY.maxDuration),"Spring duration must be 10 seconds or less");let a=1-n;a=tE(eY.minDamping,eY.maxDamping,a),r=tE(eY.minDuration,eY.maxDuration,td(r)),a<1?(e=t=>{let e=t*a,i=e*r;return .001-(e-s)/eq(t,a)*Math.exp(-i)},i=t=>{let i=t*a*r,n=Math.pow(a,2)*Math.pow(t,2)*r,o=eq(Math.pow(t,2),a);return(i*s+s-n)*Math.exp(-i)*(-e(t)+.001>0?-1:1)/o}):(e=t=>-.001+Math.exp(-t*r)*((t-s)*r+1),i=t=>r*r*(s-t)*Math.exp(-t*r));let l=function(t,e,i){let r=i;for(let i=1;i<12;i++)r-=t(r)/e(r);return r}(e,i,5/r);if(r=tc(r),isNaN(l))return{stiffness:eY.stiffness,damping:eY.damping,duration:r};{let t=Math.pow(l,2)*o;return{stiffness:t,damping:2*a*Math.sqrt(o*t),duration:r}}}(t);(e={...e,...i,mass:eY.mass}).isResolvedFromDuration=!0}}return e}({...r,velocity:-td(r.velocity||0)}),m=p||0,v=h/(2*Math.sqrt(u*c)),g=a-o,w=td(Math.sqrt(u/c)),x=5>Math.abs(g);if(n||(n=x?eY.restSpeed.granular:eY.restSpeed.default),s||(s=x?eY.restDelta.granular:eY.restDelta.default),v<1){let e=eq(w,v);t=t=>a-Math.exp(-v*w*t)*((m+v*w*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}else if(1===v)t=t=>a-Math.exp(-w*t)*(g+(m+w*g)*t);else{let e=w*Math.sqrt(v*v-1);t=t=>{let i=Math.exp(-v*w*t),r=Math.min(e*t,300);return a-i*((m+v*w*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}let b={calculatedDuration:f&&d||null,next:e=>{let i=t(e);if(f)l.done=e>=d;else{let r=0;v<1&&(r=0===e?tc(m):eK(t,e,i));let o=Math.abs(r)<=n,u=Math.abs(a-i)<=s;l.done=o&&u}return l.value=l.done?a:i,l},toString:()=>{let t=Math.min(y(b),2e4),e=S(e=>b.next(t*e).value,t,30);return t+"ms "+e}};return b}function e0(t){let e,i,{keyframes:r,velocity:n=0,power:s=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:u,min:h,max:c,restDelta:d=.5,restSpeed:p}=t,f=r[0],m={done:!1,value:f},v=t=>void 0!==h&&t<h||void 0!==c&&t>c,g=t=>void 0===h?c:void 0===c?h:Math.abs(h-t)<Math.abs(c-t)?h:c,y=s*n,w=f+y,x=void 0===u?w:u(w);x!==w&&(y=x-f);let b=t=>-y*Math.exp(-t/o),T=t=>x+b(t),P=t=>{let e=b(t),i=T(t);m.done=Math.abs(e)<=d,m.value=m.done?x:i},A=t=>{v(m.value)&&(e=t,i=eQ({keyframes:[m.value,g(m.value)],velocity:eK(T,t,m.value),damping:a,stiffness:l,restDelta:d,restSpeed:p}))};return A(0),{calculatedDuration:null,next:t=>{let r=!1;return(i||void 0!==e||(r=!0,P(t),A(t)),void 0!==e&&t>=e)?i.next(t-e):(r||P(t),m)}}}let e1=tm(.42,0,1,1),e2=tm(0,0,.58,1),e3=tm(.42,0,.58,1),e4=t=>Array.isArray(t)&&"number"!=typeof t[0],e5={linear:_,easeIn:e1,easeInOut:e3,easeOut:e2,circIn:tT,circInOut:tA,circOut:tP,backIn:tw,backInOut:tx,backOut:ty,anticipate:tb},e8=t=>{if(b(t)){_(4===t.length,"Cubic bezier arrays must contain four numerical values.");let[e,i,r,n]=t;return tm(e,i,r,n)}return"string"==typeof t?(_(void 0!==e5[t],"Invalid easing type '".concat(t,"'")),e5[t]):t};function e6(t){let{duration:e=300,keyframes:i,times:r,ease:n="easeInOut"}=t,s=e4(n)?n.map(e8):e8(n),o={done:!1,value:i[0]},a=function(t,e){let{clamp:i=!0,ease:r,mixer:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t.length;if(_(s===e.length,"Both input and output ranges must be the same length"),1===s)return()=>e[0];if(2===s&&e[0]===e[1])return()=>e[1];let o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());let a=function(t,e,i){let r=[],n=i||eH,s=t.length-1;for(let i=0;i<s;i++){let s=n(t[i],t[i+1]);e&&(s=eB(Array.isArray(e)?e[i]||_:e,s)),r.push(s)}return r}(e,r,n),l=a.length,u=i=>{if(o&&i<t[0])return e[0];let r=0;if(l>1)for(;r<t.length-2&&!(i<t[r+1]);r++);let n=A(t[r],t[r+1],i);return a[r](n)};return i?e=>u(tE(t[0],t[s-1],e)):u}((r&&r.length===i.length?r:function(t){let e=[0];return function(t,e){let i=t[t.length-1];for(let r=1;r<=e;r++){let n=A(0,e,r);t.push(eC(i,1,n))}}(e,t.length-1),e}(i)).map(t=>t*e),i,{ease:Array.isArray(s)?s:i.map(()=>s||e3).splice(0,i.length-1)});return{calculatedDuration:e,next:t=>(o.value=a(t),o.done=t>=e,o)}}let e9=t=>{let e=e=>{let{timestamp:i}=e;return t(i)};return{start:()=>Y.update(e,!0),stop:()=>q(e),now:()=>Z.isProcessing?Z.timestamp:Q.now()}},e7={decay:e0,inertia:e0,tween:e6,keyframes:e6,spring:eQ},it=t=>t/100;class ie extends ek{flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){let e,i;let{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:o,velocity:a=0}=this.options,l=w(r)?r:e7[r]||e6;l!==e6&&"number"!=typeof t[0]&&(e=eB(it,eH(t[0],t[1])),t=[0,100]);let u=l({...this.options,keyframes:t});"mirror"===o&&(i=l({...this.options,keyframes:[...t].reverse(),velocity:-a})),null===u.calculatedDuration&&(u.calculatedDuration=y(u));let{calculatedDuration:h}=u,c=h+s;return{generator:u,mirroredGenerator:i,mapPercentToKeyframes:e,calculatedDuration:h,resolvedDuration:c,totalDuration:c*(n+1)-s}}onPostResolved(){let{autoplay:t=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&t?this.state=this.pendingPlayState:this.pause()}tick(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{resolved:i}=this;if(!i){let{keyframes:t}=this.options;return{done:!0,value:t[t.length-1]}}let{finalKeyframe:r,generator:n,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:a,calculatedDuration:l,totalDuration:u,resolvedDuration:h}=i;if(null===this.startTime)return n.next(0);let{delay:c,repeat:d,repeatType:p,repeatDelay:f,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),e?this.currentTime=t:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;let v=this.currentTime-c*(this.speed>=0?1:-1),g=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=u);let y=this.currentTime,w=n;if(d){let t=Math.min(this.currentTime,u)/h,e=Math.floor(t),i=t%1;!i&&t>=1&&(i=1),1===i&&e--,(e=Math.min(e,d+1))%2&&("reverse"===p?(i=1-i,f&&(i-=f/h)):"mirror"===p&&(w=s)),y=tE(0,1,i)*h}let x=g?{done:!1,value:a[0]}:w.next(y);o&&(x.value=o(x.value));let{done:b}=x;g||null===l||(b=this.speed>=0?this.currentTime>=u:this.currentTime<=0);let T=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return T&&void 0!==r&&(x.value=eM(a,this.options,r)),m&&m(x.value),T&&this.finish(),x}get duration(){let{resolved:t}=this;return t?td(t.calculatedDuration):0}get time(){return td(this.currentTime)}set time(t){t=tc(t),this.currentTime=t,null!==this.holdTime||0===this.speed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){let e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=td(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:t=e9,onPlay:e,startTime:i}=this.options;this.driver||(this.driver=t(t=>this.tick(t))),e&&e();let r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!=i?i:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=null!==(t=this.currentTime)&&void 0!==t?t:0}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:t}=this.options;t&&t()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();let{onStop:t}=this.options;t&&t()};let{name:e,motionValue:i,element:r,keyframes:n}=this.options,s=(null==r?void 0:r.KeyframeResolver)||ef;this.resolver=new s(n,(t,e)=>this.onKeyframesResolved(t,e),e,i,r),this.resolver.scheduleResolve()}}let ii=new Set(["opacity","clipPath","filter","transform"]),ir=p(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),is={anticipate:tb,backInOut:tx,circInOut:tA};class io extends ek{initPlayback(t,e){var i;let{duration:r=300,times:n,ease:s,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if("string"==typeof s&&P()&&s in is&&(s=is[s]),w((i=this.options).type)||"spring"===i.type||!function t(e){return!!("function"==typeof e&&P()||!e||"string"==typeof e&&(e in D||P())||b(e)||Array.isArray(e)&&e.every(t))}(i.ease)){let{onComplete:e,onUpdate:i,motionValue:a,element:l,...u}=this.options,h=function(t,e){let i=new ie({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0}),r={done:!1,value:t[0]},n=[],s=0;for(;!r.done&&s<2e4;)n.push((r=i.sample(s)).value),s+=10;return{times:void 0,keyframes:n,duration:s-10,ease:"linear"}}(t,u);1===(t=h.keyframes).length&&(t[1]=t[0]),r=h.duration,n=h.times,s=h.ease,o="keyframes"}let h=function(t,e,i){let{delay:r=0,duration:n=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u={[e]:i};l&&(u.offset=l);let h=function t(e,i){if(e)return"function"==typeof e&&P()?S(e,i):b(e)?E(e):Array.isArray(e)?e.map(e=>t(e,i)||D.easeOut):D[e]}(a,n);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"})}(a.owner.current,l,t,{...this.options,duration:r,times:n,ease:s});return h.startTime=null!=u?u:this.calcStartTime(),this.pendingTimeline?(x(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{let{onComplete:i}=this.options;a.set(eM(t,this.options,e)),i&&i(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:n,type:o,ease:s,keyframes:t}}get duration(){let{resolved:t}=this;if(!t)return 0;let{duration:e}=t;return td(e)}get time(){let{resolved:t}=this;if(!t)return 0;let{animation:e}=t;return td(e.currentTime||0)}set time(t){let{resolved:e}=this;if(!e)return;let{animation:i}=e;i.currentTime=tc(t)}get speed(){let{resolved:t}=this;if(!t)return 1;let{animation:e}=t;return e.playbackRate}set speed(t){let{resolved:e}=this;if(!e)return;let{animation:i}=e;i.playbackRate=t}get state(){let{resolved:t}=this;if(!t)return"idle";let{animation:e}=t;return e.playState}get startTime(){let{resolved:t}=this;if(!t)return null;let{animation:e}=t;return e.startTime}attachTimeline(t){if(this._resolved){let{resolved:e}=this;if(!e)return _;let{animation:i}=e;x(i,t)}else this.pendingTimeline=t;return _}play(){if(this.isStopped)return;let{resolved:t}=this;if(!t)return;let{animation:e}=t;"finished"===e.playState&&this.updateFinishedPromise(),e.play()}pause(){let{resolved:t}=this;if(!t)return;let{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:t}=this;if(!t)return;let{animation:e,keyframes:i,duration:r,type:n,ease:s,times:o}=t;if("idle"===e.playState||"finished"===e.playState)return;if(this.time){let{motionValue:t,onUpdate:e,onComplete:a,element:l,...u}=this.options,h=new ie({...u,keyframes:i,duration:r,type:n,ease:s,times:o,isGenerator:!0}),c=tc(this.time);t.setWithVelocity(h.sample(c-10).value,h.sample(c).value,10)}let{onStop:a}=this.options;a&&a(),this.cancel()}complete(){let{resolved:t}=this;t&&t.animation.finish()}cancel(){let{resolved:t}=this;t&&t.animation.cancel()}static supports(t){let{motionValue:e,name:i,repeatDelay:r,repeatType:n,damping:s,type:o}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;let{onUpdate:a,transformTemplate:l}=e.owner.getProps();return ir()&&i&&ii.has(i)&&!a&&!l&&!r&&"mirror"!==n&&0!==s&&"inertia"!==o}constructor(t){super(t);let{name:e,motionValue:i,element:r,keyframes:n}=this.options;this.resolver=new eS(n,(t,e)=>this.onKeyframesResolved(t,e),e,i,r),this.resolver.scheduleResolve()}}let ia={type:"spring",stiffness:500,damping:25,restSpeed:10},il=t=>({type:"spring",stiffness:550,damping:0===t?2*Math.sqrt(550):30,restSpeed:10}),iu={type:"keyframes",duration:.8},ih={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ic=(t,e)=>{let{keyframes:i}=e;return i.length>2?iu:U.has(t)?t.startsWith("scale")?il(i[1]):ia:ih},id=function(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return o=>{let a=g(r,t)||{},l=a.delay||r.delay||0,{elapsed:u=0}=r;u-=tc(l);let h={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:t=>{e.set(t),a.onUpdate&&a.onUpdate(t)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:n};!function(t){let{when:e,delay:i,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:u,elapsed:h,...c}=t;return!!Object.keys(c).length}(a)&&(h={...h,...ic(t,h)}),h.duration&&(h.duration=tc(h.duration)),h.repeatDelay&&(h.repeatDelay=tc(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let c=!1;if(!1!==h.type&&(0!==h.duration||h.repeatDelay)||(h.duration=0,0!==h.delay||(c=!0)),(tp.current||X.skipAnimations)&&(c=!0,h.duration=0,h.delay=0),c&&!s&&void 0!==e.get()){let t=eM(h.keyframes,a);if(void 0!==t)return Y.update(()=>{h.onUpdate(t),h.onComplete()}),new v([])}return!s&&io.supports(h)?new io(h):new ie(h)}};function ip(t,e){var i;let{delay:r=0,transitionOverride:n,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;n&&(o=n);let u=[],c=s&&t.animationState&&t.animationState.getState()[s];for(let e in l){let n=t.getValue(e,null!==(i=t.latestValues[e])&&void 0!==i?i:null),s=l[e];if(void 0===s||c&&function(t,e){let{protectedKeys:i,needsAnimating:r}=t,n=i.hasOwnProperty(e)&&!0!==r[e];return r[e]=!1,n}(c,e))continue;let a={delay:r,...g(o||{},e)},h=!1;if(window.MotionHandoffAnimation){let i=t.props[th];if(i){let t=window.MotionHandoffAnimation(i,e,Y);null!==t&&(a.startTime=t,h=!0)}}tl(t,e),n.start(id(e,n,s,t.shouldReduceMotion&&W.has(e)?{type:!1}:a,t,h));let d=n.animation;d&&u.push(d)}return a&&Promise.all(u).then(()=>{Y.update(()=>{a&&function(t,e){let{transitionEnd:i={},transition:r={},...n}=h(t,e)||{};for(let e in n={...n,...i}){let i=z(n[e]);t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,to(i))}}(t,a)})}),u}function im(t,e){var i;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=h(t,e,"exit"===r.type?null===(i=t.presenceContext)||void 0===i?void 0:i.custom:void 0),{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);let o=n?()=>Promise.all(ip(t,n,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{delayChildren:n=0,staggerChildren:o,staggerDirection:a}=s;return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0,o=[],a=(t.variantChildren.size-1)*r,l=1===n?function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t*r}:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return a-t*r};return Array.from(t.variantChildren).sort(iv).forEach((t,r)=>{t.notify("AnimationStart",e),o.push(im(t,e,{...s,delay:i+l(r)}).then(()=>t.notify("AnimationComplete",e)))}),Promise.all(o)}(t,e,n+i,o,a,r)}:()=>Promise.resolve(),{when:l}=s;if(!l)return Promise.all([o(),a(r.delay)]);{let[t,e]="beforeChildren"===l?[o,a]:[a,o];return t().then(()=>e())}}function iv(t,e){return t.sortNodePosition(e)}let ig=d.length,iy=[...c].reverse(),iw=c.length;function ix(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ib(){return{animate:ix(!0),whileInView:ix(),whileHover:ix(),whileTap:ix(),whileDrag:ix(),whileFocus:ix(),exit:ix()}}class iT{update(){}constructor(t){this.isMounted=!1,this.node=t}}class iP extends iT{updateAnimationControlsSubscription(){let{animate:t}=this.node.getProps();n(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),null===(t=this.unmountControls)||void 0===t||t.call(this)}constructor(t){super(t),t.animationState||(t.animationState=function(t){let e=e=>Promise.all(e.map(e=>{let{animation:i,options:r}=e;return function(t,e){let i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.notify("AnimationStart",e),Array.isArray(e))i=Promise.all(e.map(e=>im(t,e,r)));else if("string"==typeof e)i=im(t,e,r);else{let n="function"==typeof e?h(t,e,r.custom):e;i=Promise.all(ip(t,n,r))}return i.then(()=>{t.notify("AnimationComplete",e)})}(t,i,r)})),i=ib(),r=!0,l=e=>(i,r)=>{var n;let s=h(t,r,"exit"===e?null===(n=t.presenceContext)||void 0===n?void 0:n.custom:void 0);if(s){let{transition:t,transitionEnd:e,...r}=s;i={...i,...r,...e}}return i};function u(u){let{props:h}=t,c=function t(e){if(!e)return;if(!e.isControllingVariants){let i=e.parent&&t(e.parent)||{};return void 0!==e.props.initial&&(i.initial=e.props.initial),i}let i={};for(let t=0;t<ig;t++){let r=d[t],n=e.props[r];(a(n)||!1===n)&&(i[r]=n)}return i}(t.parent)||{},p=[],f=new Set,m={},v=1/0;for(let e=0;e<iw;e++){var g;let d=iy[e],y=i[d],w=void 0!==h[d]?h[d]:c[d],x=a(w),b=d===u?y.isActive:null;!1===b&&(v=e);let T=w===c[d]&&w!==h[d]&&x;if(T&&r&&t.manuallyAnimateOnMount&&(T=!1),y.protectedKeys={...m},!y.isActive&&null===b||!w&&!y.prevProp||n(w)||"boolean"==typeof w)continue;let P=(g=y.prevProp,"string"==typeof w?w!==g:!!Array.isArray(w)&&!o(w,g)),A=P||d===u&&y.isActive&&!T&&x||e>v&&x,S=!1,E=Array.isArray(w)?w:[w],D=E.reduce(l(d),{});!1===b&&(D={});let{prevResolvedValues:M={}}=y,k={...M,...D},C=e=>{A=!0,f.has(e)&&(S=!0,f.delete(e)),y.needsAnimating[e]=!0;let i=t.getValue(e);i&&(i.liveStyle=!1)};for(let t in k){let e=D[t],i=M[t];if(!m.hasOwnProperty(t))(s(e)&&s(i)?o(e,i):e===i)?void 0!==e&&f.has(t)?C(t):y.protectedKeys[t]=!0:null!=e?C(t):f.add(t)}y.prevProp=w,y.prevResolvedValues=D,y.isActive&&(m={...m,...D}),r&&t.blockInitialAnimation&&(A=!1);let R=!(T&&P)||S;A&&R&&p.push(...E.map(t=>({animation:t,options:{type:d}})))}if(f.size){let e={};f.forEach(i=>{let r=t.getBaseTarget(i),n=t.getValue(i);n&&(n.liveStyle=!0),e[i]=null!=r?r:null}),p.push({animation:e})}let y=!!p.length;return r&&(!1===h.initial||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(p):Promise.resolve()}return{animateChanges:u,setActive:function(e,r){var n;if(i[e].isActive===r)return Promise.resolve();null===(n=t.variantChildren)||void 0===n||n.forEach(t=>{var i;return null===(i=t.animationState)||void 0===i?void 0:i.setActive(e,r)}),i[e].isActive=r;let s=u(e);for(let t in i)i[t].protectedKeys={};return s},setAnimateFunction:function(i){e=i(t)},getState:()=>i,reset:()=>{i=ib(),r=!0}}}(t))}}let iA=0;class iS extends iT{update(){if(!this.node.presenceContext)return;let{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;let r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>e(this.id))}mount(){let{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}constructor(){super(...arguments),this.id=iA++}}function iE(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i)}function iD(t){return{point:{x:t.pageX,y:t.pageY}}}let iM=t=>e=>I(e)&&t(e,iD(e));function ik(t,e,i,r){return iE(t,e,iM(i),r)}let iC=(t,e)=>Math.abs(t-e);class iR{updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),q(this.updatePoint)}constructor(t,e,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:n=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{var t,e;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let i=iV(this.lastMoveEventInfo,this.history),r=null!==this.startEvent,n=(t=i.offset,e={x:0,y:0},Math.sqrt(iC(t.x,e.x)**2+iC(t.y,e.y)**2)>=3);if(!r&&!n)return;let{point:s}=i,{timestamp:o}=Z;this.history.push({...s,timestamp:o});let{onStart:a,onMove:l}=this.handlers;r||(a&&a(this.lastMoveEvent,i),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,i)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=iI(e,this.transformPagePoint),Y.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();let{onEnd:i,onSessionEnd:r,resumeAnimation:n}=this.handlers;if(this.dragSnapToOrigin&&n&&n(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=iV("pointercancel"===t.type?this.lastMoveEventInfo:iI(e,this.transformPagePoint),this.history);this.startEvent&&i&&i(t,s),r&&r(t,s)},!I(t))return;this.dragSnapToOrigin=n,this.handlers=e,this.transformPagePoint=i,this.contextWindow=r||window;let s=iI(iD(t),this.transformPagePoint),{point:o}=s,{timestamp:a}=Z;this.history=[{...o,timestamp:a}];let{onSessionStart:l}=e;l&&l(t,iV(s,this.history)),this.removeListeners=eB(ik(this.contextWindow,"pointermove",this.handlePointerMove),ik(this.contextWindow,"pointerup",this.handlePointerUp),ik(this.contextWindow,"pointercancel",this.handlePointerUp))}}function iI(t,e){return e?{point:e(t.point)}:t}function iL(t,e){return{x:t.x-e.x,y:t.y-e.y}}function iV(t,e){let{point:i}=t;return{point:i,delta:iL(i,iF(e)),offset:iL(i,e[0]),velocity:function(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,r=null,n=iF(t);for(;i>=0&&(r=t[i],!(n.timestamp-r.timestamp>tc(.1)));)i--;if(!r)return{x:0,y:0};let s=td(n.timestamp-r.timestamp);if(0===s)return{x:0,y:0};let o={x:(n.x-r.x)/s,y:(n.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}(e,0)}}function iF(t){return t[t.length-1]}function iO(t){return t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function ij(t){return t.max-t.min}function iN(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;t.origin=r,t.originPoint=eC(e.min,e.max,t.origin),t.scale=ij(i)/ij(e),t.translate=eC(i.min,i.max,t.origin)-t.originPoint,(t.scale>=.9999&&t.scale<=1.0001||isNaN(t.scale))&&(t.scale=1),(t.translate>=-.01&&t.translate<=.01||isNaN(t.translate))&&(t.translate=0)}function iB(t,e,i,r){iN(t.x,e.x,i.x,r?r.originX:void 0),iN(t.y,e.y,i.y,r?r.originY:void 0)}function iU(t,e,i){t.min=i.min+e.min,t.max=t.min+ij(e)}function iW(t,e,i){t.min=e.min-i.min,t.max=t.min+ij(e)}function iG(t,e,i){iW(t.x,e.x,i.x),iW(t.y,e.y,i.y)}function iz(t,e,i){return{min:void 0!==e?t.min+e:void 0,max:void 0!==i?t.max+i-(t.max-t.min):void 0}}function iX(t,e){let i=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,r]=[r,i]),{min:i,max:r}}function i_(t,e,i){return{min:iH(t,e),max:iH(t,i)}}function iH(t,e){return"number"==typeof t?t:t[e]||0}let iK=()=>({translate:0,scale:1,origin:0,originPoint:0}),iY=()=>({x:iK(),y:iK()}),iq=()=>({min:0,max:0}),iZ=()=>({x:iq(),y:iq()});function i$(t){return[t("x"),t("y")]}function iJ(t){let{top:e,left:i,right:r,bottom:n}=t;return{x:{min:i,max:r},y:{min:e,max:n}}}function iQ(t){return void 0===t||1===t}function i0(t){let{scale:e,scaleX:i,scaleY:r}=t;return!iQ(e)||!iQ(i)||!iQ(r)}function i1(t){return i0(t)||i2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function i2(t){var e,i;return(e=t.x)&&"0%"!==e||(i=t.y)&&"0%"!==i}function i3(t,e,i,r,n){return void 0!==n&&(t=r+n*(t-r)),r+i*(t-r)+e}function i4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;t.min=i3(t.min,e,i,r,n),t.max=i3(t.max,e,i,r,n)}function i5(t,e){let{x:i,y:r}=e;i4(t.x,i.translate,i.scale,i.originPoint),i4(t.y,r.translate,r.scale,r.originPoint)}function i8(t,e){t.min=t.min+e,t.max=t.max+e}function i6(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,s=eC(t.min,t.max,n);i4(t,e,i,s,r)}function i9(t,e){i6(t.x,e.x,e.scaleX,e.scale,e.originX),i6(t.y,e.y,e.scaleY,e.scale,e.originY)}function i7(t,e){return iJ(function(t,e){if(!e)return t;let i=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}let rt=t=>{let{current:e}=t;return e?e.ownerDocument.defaultView:null},re=new WeakMap;class ri{start(t){let{snapToCursor:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;let{dragSnapToOrigin:r}=this.getProps();this.panSession=new iR(t,{onSessionStart:t=>{let{dragSnapToOrigin:i}=this.getProps();i?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(iD(t).point)},onStart:(t,e)=>{let{drag:i,dragPropagation:r,onDragStart:n}=this.getProps();if(i&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===i||"y"===i?M[i]?null:(M[i]=!0,()=>{M[i]=!1}):M.x||M.y?null:(M.x=M.y=!0,()=>{M.x=M.y=!1}),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),i$(t=>{let e=this.getAxisMotionValue(t).get()||0;if(tW.test(e)){let{projection:i}=this.visualElement;if(i&&i.layout){let r=i.layout.layoutBox[t];if(r){let t=ij(r);e=parseFloat(e)/100*t}}}this.originPoint[t]=e}),n&&Y.postRender(()=>n(t,e)),tl(this.visualElement,"transform");let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(t,e)=>{let{dragPropagation:i,dragDirectionLock:r,onDirectionLock:n,onDrag:s}=this.getProps();if(!i&&!this.openDragLock)return;let{offset:o}=e;if(r&&null===this.currentDirection){this.currentDirection=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=null;return Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x"),i}(o),null!==this.currentDirection&&n&&n(this.currentDirection);return}this.updateAxis("x",e.point,o),this.updateAxis("y",e.point,o),this.visualElement.render(),s&&s(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>i$(t=>{var e;return"paused"===this.getAnimationState(t)&&(null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:rt(this.visualElement)})}stop(t,e){let i=this.isDragging;if(this.cancel(),!i)return;let{velocity:r}=e;this.startAnimation(r);let{onDragEnd:n}=this.getProps();n&&Y.postRender(()=>n(t,e))}cancel(){this.isDragging=!1;let{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){let{drag:r}=this.getProps();if(!i||!rr(t,r,this.currentDirection))return;let n=this.getAxisMotionValue(t),s=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(s=function(t,e,i){let{min:r,max:n}=e;return void 0!==r&&t<r?t=i?eC(r,t,i.min):Math.max(t,r):void 0!==n&&t>n&&(t=i?eC(n,t,i.max):Math.min(t,n)),t}(s,this.constraints[t],this.elastic[t])),n.set(s)}resolveConstraints(){var t;let{dragConstraints:e,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,n=this.constraints;e&&iO(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=function(t,e){let{top:i,left:r,bottom:n,right:s}=e;return{x:iz(t.x,r,s),y:iz(t.y,i,n)}}(r.layoutBox,e):this.constraints=!1,this.elastic=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.35;return!1===t?t=0:!0===t&&(t=.35),{x:i_(t,"left","right"),y:i_(t,"top","bottom")}}(i),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&i$(t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){let i={};return void 0!==e.min&&(i.min=e.min-t.min),void 0!==e.max&&(i.max=e.max-t.min),i}(r.layoutBox[t],this.constraints[t]))})}resolveRefConstraints(){var t;let{dragConstraints:e,onMeasureDragConstraints:i}=this.getProps();if(!e||!iO(e))return!1;let r=e.current;_(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:n}=this.visualElement;if(!n||!n.layout)return!1;let s=function(t,e,i){let r=i7(t,i),{scroll:n}=e;return n&&(i8(r.x,n.offset.x),i8(r.y,n.offset.y)),r}(r,n.root,this.visualElement.getTransformPagePoint()),o={x:iX((t=n.layout.layoutBox).x,s.x),y:iX(t.y,s.y)};if(i){let t=i(function(t){let{x:e,y:i}=t;return{top:i.min,right:e.max,bottom:i.max,left:e.min}}(o));this.hasMutatedConstraints=!!t,t&&(o=iJ(t))}return o}startAnimation(t){let{drag:e,dragMomentum:i,dragElastic:r,dragTransition:n,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{};return Promise.all(i$(o=>{if(!rr(o,e,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});let u={type:"inertia",velocity:i?t[o]:0,bounceStiffness:r?200:1e6,bounceDamping:r?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...n,...l};return this.startAxisValueAnimation(o,u)})).then(o)}startAxisValueAnimation(t,e){let i=this.getAxisMotionValue(t);return tl(this.visualElement,t),i.start(id(t,i,0,e,this.visualElement,!1))}stopAnimation(){i$(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){i$(t=>{var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.pause()})}getAnimationState(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}getAxisMotionValue(t){let e="_drag".concat(t.toUpperCase()),i=this.visualElement.getProps();return i[e]||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){i$(e=>{let{drag:i}=this.getProps();if(!rr(e,i,this.currentDirection))return;let{projection:r}=this.visualElement,n=this.getAxisMotionValue(e);if(r&&r.layout){let{min:i,max:s}=r.layout.layoutBox[e];n.set(t[e]-eC(i,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!iO(e)||!i||!this.constraints)return;this.stopAnimation();let r={x:0,y:0};i$(t=>{let e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){let i=e.get();r[t]=function(t,e){let i=.5,r=ij(t),n=ij(e);return n>r?i=A(e.min,e.max-r,t.min):r>n&&(i=A(t.min,t.max-n,e.min)),tE(0,1,i)}({min:i,max:i},this.constraints[t])}});let{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),i$(e=>{if(!rr(e,t,null))return;let i=this.getAxisMotionValue(e),{min:n,max:s}=this.constraints[e];i.set(eC(n,s,r[e]))})}addListeners(){if(!this.visualElement.current)return;re.set(this.visualElement,this);let t=ik(this.visualElement.current,"pointerdown",t=>{let{drag:e,dragListener:i=!0}=this.getProps();e&&i&&this.start(t)}),e=()=>{let{dragConstraints:t}=this.getProps();iO(t)&&t.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",e);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Y.read(e);let n=iE(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",t=>{let{delta:e,hasLayoutChanged:i}=t;this.isDragging&&i&&(i$(t=>{let i=this.getAxisMotionValue(t);i&&(this.originPoint[t]+=e[t].translate,i.set(i.get()+e[t].translate))}),this.visualElement.render())});return()=>{n(),t(),r(),s&&s()}}getProps(){let t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:n=!1,dragElastic:s=.35,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:r,dragConstraints:n,dragElastic:s,dragMomentum:o}}constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=iZ(),this.visualElement=t}}function rr(t,e,i){return(!0===e||e===t)&&(null===i||i===t)}class rn extends iT{mount(){let{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_}unmount(){this.removeGroupControls(),this.removeListeners()}constructor(t){super(t),this.removeGroupControls=_,this.removeListeners=_,this.controls=new ri(t)}}let rs=t=>(e,i)=>{t&&Y.postRender(()=>t(e,i))};class ro extends iT{onPointerDown(t){this.session=new iR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rt(this.node)})}createPanHandlers(){let{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:rs(t),onStart:rs(e),onMove:i,onEnd:(t,e)=>{delete this.session,r&&Y.postRender(()=>r(t,e))}}}mount(){this.removePointerDownListener=ik(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}constructor(){super(...arguments),this.removePointerDownListener=_}}var ra,rl,ru,rh=i(3827),rc=i(4090);let rd=(0,rc.createContext)(null),rp=(0,rc.createContext)({}),rf=(0,rc.createContext)({}),rm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}let rg={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t){if(!tG.test(t))return t;t=parseFloat(t)}let i=rv(t,e.target.x),r=rv(t,e.target.y);return"".concat(i,"% ").concat(r,"%")}},ry={},{schedule:rw,cancel:rx}=K(queueMicrotask,!1);class rb extends rc.Component{componentDidMount(){let{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:r}=this.props,{projection:n}=t;Object.assign(ry,rP),n&&(e.group&&e.group.add(n),i&&i.register&&r&&i.register(n),n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),rm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){let{layoutDependency:e,visualElement:i,drag:r,isPresent:n}=this.props,s=i.projection;return s&&(s.isPresent=n,r||t.layoutDependency!==e||void 0===e?s.willUpdate():this.safeToRemove(),t.isPresent===n||(n?s.promote():s.relegate()||Y.postRender(()=>{let t=s.getStack();t&&t.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),rw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){let{safeToRemove:t}=this.props;t&&t()}render(){return null}}function rT(t){let[e,i]=function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=(0,rc.useContext)(rd);if(null===e)return[!0,null];let{isPresent:i,onExitComplete:r,register:n}=e,s=(0,rc.useId)();(0,rc.useEffect)(()=>{t&&n(s)},[t]);let o=(0,rc.useCallback)(()=>t&&r&&r(s),[s,r,t]);return!i&&r?[!1,o]:[!0]}(),r=(0,rc.useContext)(rp);return(0,rh.jsx)(rb,{...t,layoutGroup:r,switchLayoutGroup:(0,rc.useContext)(rf),isPresent:e,safeToRemove:i})}let rP={borderRadius:{...rg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rg,borderTopRightRadius:rg,borderBottomLeftRadius:rg,borderBottomRightRadius:rg,boxShadow:{correct:(t,e)=>{let{treeScale:i,projectionDelta:r}=e,n=t2.parse(t);if(n.length>5)return t;let s=t2.createTransformer(t),o="number"!=typeof n[0]?1:0,a=r.x.scale*i.x,l=r.y.scale*i.y;n[0+o]/=a,n[1+o]/=l;let u=eC(a,l,.5);return"number"==typeof n[2+o]&&(n[2+o]/=u),"number"==typeof n[3+o]&&(n[3+o]/=u),s(n)}}},rA=(t,e)=>t.depth-e.depth;class rS{add(t){tt(this.children,t),this.isDirty=!0}remove(t){te(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(rA),this.isDirty=!1,this.children.forEach(t)}constructor(){this.children=[],this.isDirty=!1}}function rE(t){let e=ta(t)?t.get():t;return G(e)?e.toValue():e}let rD=["TopLeft","TopRight","BottomLeft","BottomRight"],rM=rD.length,rk=t=>"string"==typeof t?parseFloat(t):t,rC=t=>"number"==typeof t||tG.test(t);function rR(t,e){return void 0!==t[e]?t[e]:t.borderRadius}let rI=rV(0,.5,tP),rL=rV(.5,.95,_);function rV(t,e,i){return r=>r<t?0:r>e?1:i(A(t,e,r))}function rF(t,e){t.min=e.min,t.max=e.max}function rO(t,e){rF(t.x,e.x),rF(t.y,e.y)}function rj(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function rN(t,e,i,r,n){return t-=e,t=r+1/i*(t-r),void 0!==n&&(t=r+1/n*(t-r)),t}function rB(t,e,i,r,n){let[s,o,a]=i;!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,n=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t;if(tW.test(e)&&(e=parseFloat(e),e=eC(o.min,o.max,e/100)-o.min),"number"!=typeof e)return;let a=eC(s.min,s.max,r);t===s&&(a-=e),t.min=rN(t.min,e,i,a,n),t.max=rN(t.max,e,i,a,n)}(t,e[s],e[o],e[a],e.scale,r,n)}let rU=["x","scaleX","originX"],rW=["y","scaleY","originY"];function rG(t,e,i,r){rB(t.x,e,rU,i?i.x:void 0,r?r.x:void 0),rB(t.y,e,rW,i?i.y:void 0,r?r.y:void 0)}function rz(t){return 0===t.translate&&1===t.scale}function rX(t){return rz(t.x)&&rz(t.y)}function r_(t,e){return t.min===e.min&&t.max===e.max}function rH(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function rK(t,e){return rH(t.x,e.x)&&rH(t.y,e.y)}function rY(t){return ij(t.x)/ij(t.y)}function rq(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class rZ{add(t){tt(this.members,t),t.scheduleRender()}remove(t){if(te(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){let t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){let e;let i=this.members.findIndex(e=>t===e);if(0===i)return!1;for(let t=i;t>=0;t--){let i=this.members[t];if(!1!==i.isPresent){e=i;break}}return!!e&&(this.promote(e),!0)}promote(t,e){let i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);let{crossfade:r}=t.options;!1===r&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{let{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}constructor(){this.members=[]}}let r$={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},rJ=void 0!==window.MotionDebug,rQ=["","X","Y","Z"],r0={visibility:"hidden"},r1=0;function r2(t,e,i,r){let{latestValues:n}=e;n[t]&&(i[t]=n[t],e.setStaticValue(t,0),r&&(r[t]=0))}function r3(t){let{attachResizeListener:e,defaultParent:i,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}=t;return class{addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new ti),this.eventHandlers.get(t).add(e)}notifyListeners(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];let n=this.eventHandlers.get(t);n&&n.notify(...i)}hasListeners(t){return this.eventHandlers.has(t)}mount(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;let{layoutId:r,layout:n,visualElement:s}=this.options;if(s&&!s.current&&s.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),i&&(n||r)&&(this.isLayoutDirty=!0),e){let i;let r=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,i&&i(),i=function(t,e){let i=Q.now(),r=n=>{let{timestamp:s}=n,o=s-i;o>=e&&(q(r),t(o-e))};return Y.read(r,!0),()=>q(r)}(r,250),rm.hasAnimatedSinceResize&&(rm.hasAnimatedSinceResize=!1,this.nodes.forEach(ni))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||n)&&this.addEventListener("didUpdate",t=>{let{delta:e,hasLayoutChanged:i,hasRelativeTargetChanged:r,layout:n}=t;if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let o=this.options.transition||s.getDefaultTransition()||nh,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=s.getProps(),u=!this.targetLayout||!rK(this.targetLayout,n)||r,h=!i&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||h||i&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,h);let t={...g(o,"layout"),onPlay:a,onComplete:l};(s.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else i||ni(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,q(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ns),this.animationId++)}getTransformTemplate(){let{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function t(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;let{visualElement:i}=e.options;if(!i)return;let r=i.props[th];if(window.MotionHasOptimisedAnimation(r,"transform")){let{layout:t,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Y,!(t||i))}let{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&t(n)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let t=0;t<this.path.length;t++){let e=this.path[t];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}let{layoutId:e,layout:i}=this.options;if(void 0===e&&!i)return;let r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(r7);return}this.isUpdating||this.nodes.forEach(nt),this.isUpdating=!1,this.nodes.forEach(ne),this.nodes.forEach(r4),this.nodes.forEach(r5),this.clearAllSnapshots();let t=Q.now();Z.delta=tE(0,1e3/60,t-Z.timestamp),Z.timestamp=t,Z.isProcessing=!0,$.update.process(Z),$.preRender.process(Z),$.render.process(Z),Z.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(r9),this.sharedNodes.forEach(no)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Y.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Y.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let t=0;t<this.path.length;t++)this.path[t].updateScroll();let t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=iZ(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",e=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e){let e=n(this.instance);this.scroll={animationId:this.root.animationId,phase:t,isRoot:e,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:e}}}resetTransform(){if(!s)return;let t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,e=this.projectionDelta&&!rX(this.projectionDelta),i=this.getTransformTemplate(),r=i?i(this.latestValues,""):void 0,n=r!==this.prevTransformTemplateValue;t&&(e||i1(this.latestValues)||n)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){var t;let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],i=this.measurePageBox(),r=this.removeElementScroll(i);return e&&(r=this.removeTransform(r)),np((t=r).x),np(t.y),{animationId:this.root.animationId,measuredBox:i,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var t;let{visualElement:e}=this.options;if(!e)return iZ();let i=e.measureViewportBox();if(!((null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)||this.path.some(nm))){let{scroll:t}=this.root;t&&(i8(i.x,t.offset.x),i8(i.y,t.offset.y))}return i}removeElementScroll(t){var e;let i=iZ();if(rO(i,t),null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)return i;for(let e=0;e<this.path.length;e++){let r=this.path[e],{scroll:n,options:s}=r;r!==this.root&&n&&s.layoutScroll&&(n.wasRoot&&rO(i,t),i8(i.x,n.offset.x),i8(i.y,n.offset.y))}return i}applyTransform(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=iZ();rO(i,t);for(let t=0;t<this.path.length;t++){let r=this.path[t];!e&&r.options.layoutScroll&&r.scroll&&r!==r.root&&i9(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),i1(r.latestValues)&&i9(i,r.latestValues)}return i1(this.latestValues)&&i9(i,this.latestValues),i}removeTransform(t){let e=iZ();rO(e,t);for(let t=0;t<this.path.length;t++){let i=this.path[t];if(!i.instance||!i1(i.latestValues))continue;i0(i.latestValues)&&i.updateSnapshot();let r=iZ();rO(r,i.measurePageBox()),rG(e,i.latestValues,i.snapshot?i.snapshot.layoutBox:void 0,r)}return i1(this.latestValues)&&rG(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Z.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var t,e,i,r;let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);let o=!!this.resumingFrom||this!==s;if(!(n||o&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:a,layoutId:l}=this.options;if(this.layout&&(a||l)){if(this.resolvedRelativeTargetAt=Z.timestamp,!this.targetDelta&&!this.relativeTarget){let t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=iZ(),this.relativeTargetOrigin=iZ(),iG(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),rO(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=iZ(),this.targetWithTransforms=iZ()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),e=this.target,i=this.relativeTarget,r=this.relativeParent.target,iU(e.x,i.x,r.x),iU(e.y,i.y,r.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rO(this.target,this.layout.layoutBox),i5(this.target,this.targetDelta)):rO(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let t=this.getClosestProjectingParent();t&&!!t.resumingFrom==!!this.resumingFrom&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=iZ(),this.relativeTargetOrigin=iZ(),iG(this.relativeTargetOrigin,this.target,t.target),rO(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}rJ&&r$.resolvedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||i0(this.parent.latestValues)||i2(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;let e=this.getLead(),i=!!this.resumingFrom||this!==e,r=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(r=!1),i&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Z.timestamp&&(r=!1),r)return;let{layout:n,layoutId:s}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(n||s))return;rO(this.layoutCorrected,this.layout.layoutBox);let o=this.treeScale.x,a=this.treeScale.y;!function(t,e,i){let r,n,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=i.length;if(o){e.x=e.y=1;for(let a=0;a<o;a++){n=(r=i[a]).projectionDelta;let{visualElement:o}=r.options;(!o||!o.props.style||"contents"!==o.props.style.display)&&(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&i9(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),n&&(e.x*=n.x.scale,e.y*=n.y.scale,i5(t,n)),s&&i1(r.latestValues)&&i9(t,r.latestValues))}e.x<1.0000000000001&&e.x>.999999999999&&(e.x=1),e.y<1.0000000000001&&e.y>.999999999999&&(e.y=1)}}(this.layoutCorrected,this.treeScale,this.path,i),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=iZ());let{target:l}=e;if(!l){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(rj(this.prevProjectionDelta.x,this.projectionDelta.x),rj(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),iB(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&rq(this.projectionDelta.x,this.prevProjectionDelta.x)&&rq(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),rJ&&r$.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var t;let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){let t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iY(),this.projectionDelta=iY(),this.projectionDeltaWithTransform=iY()}setAnimationOrigin(t){let e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.snapshot,n=r?r.latestValues:{},s={...this.latestValues},o=iY();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!i;let a=iZ(),l=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),h=!u||u.members.length<=1,c=!!(l&&!h&&!0===this.options.crossfade&&!this.path.some(nu));this.animationProgress=0,this.mixTargetDelta=i=>{let r=i/1e3;if(na(o.x,t.x,r),na(o.y,t.y,r),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,d,p,f;iG(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,nl(p.x,f.x,a.x,r),nl(p.y,f.y,a.y,r),e&&(u=this.relativeTarget,d=e,r_(u.x,d.x)&&r_(u.y,d.y))&&(this.isProjectionDirty=!1),e||(e=iZ()),rO(e,this.relativeTarget)}l&&(this.animationValues=s,function(t,e,i,r,n,s){n?(t.opacity=eC(0,void 0!==i.opacity?i.opacity:1,rI(r)),t.opacityExit=eC(void 0!==e.opacity?e.opacity:1,0,rL(r))):s&&(t.opacity=eC(void 0!==e.opacity?e.opacity:1,void 0!==i.opacity?i.opacity:1,r));for(let n=0;n<rM;n++){let s="border".concat(rD[n],"Radius"),o=rR(e,s),a=rR(i,s);(void 0!==o||void 0!==a)&&(o||(o=0),a||(a=0),0===o||0===a||rC(o)===rC(a)?(t[s]=Math.max(eC(rk(o),rk(a),r),0),(tW.test(a)||tW.test(o))&&(t[s]+="%")):t[s]=a)}(e.rotate||i.rotate)&&(t.rotate=eC(e.rotate||0,i.rotate||0,r))}(s,n,this.latestValues,r,c,h)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(q(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Y.update(()=>{rm.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e,i){let r=ta(t)?t:to(t);return r.start(id("",r,1e3,i)),r.animation}(0,0,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let t=this.getLead(),{targetWithTransforms:e,target:i,layout:r,latestValues:n}=t;if(e&&i&&r){if(this!==t&&this.layout&&r&&nf(this.options.animationType,this.layout.layoutBox,r.layoutBox)){i=this.target||iZ();let e=ij(this.layout.layoutBox.x);i.x.min=t.target.x.min,i.x.max=i.x.min+e;let r=ij(this.layout.layoutBox.y);i.y.min=t.target.y.min,i.y.max=i.y.min+r}rO(e,i),i9(e,n),iB(this.projectionDeltaWithTransform,this.layoutCorrected,e,n)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new rZ),this.sharedNodes.get(t).add(e);let i=e.options.initialPromotionConfig;e.promote({transition:i?i.transition:void 0,preserveFollowOpacity:i&&i.shouldPreserveFollowOpacity?i.shouldPreserveFollowOpacity(e):void 0})}isLead(){let t=this.getStack();return!t||t.lead===this}getLead(){var t;let{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;let{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){let{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote(){let{needsReset:t,transition:e,preserveFollowOpacity:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.getStack();r&&r.promote(this,i),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){let t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){let{visualElement:t}=this.options;if(!t)return;let e=!1,{latestValues:i}=t;if((i.z||i.rotate||i.rotateX||i.rotateY||i.rotateZ||i.skewX||i.skewY)&&(e=!0),!e)return;let r={};i.z&&r2("z",t,r,this.animationValues);for(let e=0;e<rQ.length;e++)r2("rotate".concat(rQ[e]),t,r,this.animationValues),r2("skew".concat(rQ[e]),t,r,this.animationValues);for(let e in t.render(),r)t.setStaticValue(e,r[e]),this.animationValues&&(this.animationValues[e]=r[e]);t.scheduleRender()}getProjectionStyles(t){var e,i;if(!this.instance||this.isSVG)return;if(!this.isVisible)return r0;let r={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=rE(null==t?void 0:t.pointerEvents)||"",r.transform=n?n(this.latestValues,""):"none",r;let s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){let e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=rE(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!i1(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1),e}let o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=function(t,e,i){let r="",n=t.x.translate/e.x,s=t.y.translate/e.y,o=(null==i?void 0:i.z)||0;if((n||s||o)&&(r="translate3d(".concat(n,"px, ").concat(s,"px, ").concat(o,"px) ")),(1!==e.x||1!==e.y)&&(r+="scale(".concat(1/e.x,", ").concat(1/e.y,") ")),i){let{transformPerspective:t,rotate:e,rotateX:n,rotateY:s,skewX:o,skewY:a}=i;t&&(r="perspective(".concat(t,"px) ").concat(r)),e&&(r+="rotate(".concat(e,"deg) ")),n&&(r+="rotateX(".concat(n,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) ")),o&&(r+="skewX(".concat(o,"deg) ")),a&&(r+="skewY(".concat(a,"deg) "))}let a=t.x.scale*e.x,l=t.y.scale*e.y;return(1!==a||1!==l)&&(r+="scale(".concat(a,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),n&&(r.transform=n(o,r.transform));let{x:a,y:l}=this.projectionDelta;for(let t in r.transformOrigin="".concat(100*a.origin,"% ").concat(100*l.origin,"% 0"),s.animationValues?r.opacity=s===this?null!==(i=null!==(e=o.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:r.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0,ry){if(void 0===o[t])continue;let{correct:e,applyTo:i}=ry[t],n="none"===r.transform?o[t]:e(o[t],s);if(i){let t=i.length;for(let e=0;e<t;e++)r[i[e]]=n}else r[t]=n}return this.options.layoutId&&(r.pointerEvents=s===this?rE(null==t?void 0:t.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()}),this.root.nodes.forEach(r7),this.root.sharedNodes.clear()}constructor(t={},e=null==i?void 0:i()){this.id=r1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,rJ&&(r$.totalNodes=r$.resolvedTargetDeltas=r$.recalculatedProjection=0),this.nodes.forEach(r8),this.nodes.forEach(nr),this.nodes.forEach(nn),this.nodes.forEach(r6),rJ&&window.MotionDebug.record(r$)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=e?e.root||e:this,this.path=e?[...e.path,e]:[],this.parent=e,this.depth=e?e.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new rS)}}}function r4(t){t.updateLayout()}function r5(t){var e;let i=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){let{layoutBox:e,measuredBox:r}=t.layout,{animationType:n}=t.options,s=i.source!==t.layout.source;"size"===n?i$(t=>{let r=s?i.measuredBox[t]:i.layoutBox[t],n=ij(r);r.min=e[t].min,r.max=r.min+n}):nf(n,i.layoutBox,e)&&i$(r=>{let n=s?i.measuredBox[r]:i.layoutBox[r],o=ij(e[r]);n.max=n.min+o,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[r].max=t.relativeTarget[r].min+o)});let o=iY();iB(o,e,i.layoutBox);let a=iY();s?iB(a,t.applyTransform(r,!0),i.measuredBox):iB(a,e,i.layoutBox);let l=!rX(o),u=!1;if(!t.resumeFrom){let r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){let{snapshot:n,layout:s}=r;if(n&&s){let o=iZ();iG(o,i.layoutBox,n.layoutBox);let a=iZ();iG(a,e,s.layoutBox),rK(o,a)||(u=!0),r.options.layoutRoot&&(t.relativeTarget=a,t.relativeTargetOrigin=o,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:i,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(t.isLead()){let{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function r8(t){rJ&&r$.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function r6(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function r9(t){t.clearSnapshot()}function r7(t){t.clearMeasurements()}function nt(t){t.isLayoutDirty=!1}function ne(t){let{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ni(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function nr(t){t.resolveTargetDelta()}function nn(t){t.calcProjection()}function ns(t){t.resetSkewAndRotation()}function no(t){t.removeLeadSnapshot()}function na(t,e,i){t.translate=eC(e.translate,0,i),t.scale=eC(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function nl(t,e,i,r){t.min=eC(e.min,i.min,r),t.max=eC(e.max,i.max,r)}function nu(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}let nh={duration:.45,ease:[.4,0,.1,1]},nc=t=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),nd=nc("applewebkit/")&&!nc("chrome/")?Math.round:_;function np(t){t.min=nd(t.min),t.max=nd(t.max)}function nf(t,e,i){return"position"===t||"preserve-aspect"===t&&!(.2>=Math.abs(rY(e)-rY(i)))}function nm(t){var e;return t!==t.root&&(null===(e=t.scroll)||void 0===e?void 0:e.wasRoot)}let nv=r3({attachResizeListener:(t,e)=>iE(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ng={current:void 0},ny=r3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ng.current){let t=new nv({});t.mount(window),t.setOptions({layoutScroll:!0}),ng.current=t}return ng.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>"fixed"===window.getComputedStyle(t).position});function nw(t,e,i){let{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover","Start"===i);let n=r["onHover"+i];n&&Y.postRender(()=>n(e,iD(e)))}class nx extends iT{mount(){let{current:t}=this.node;t&&(this.unmount=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},[r,n,s]=k(t,i),o=C(t=>{let{target:i}=t,r=e(t);if("function"!=typeof r||!i)return;let s=C(t=>{r(t),i.removeEventListener("pointerleave",s)});i.addEventListener("pointerleave",s,n)});return r.forEach(t=>{t.addEventListener("pointerenter",o,n)}),s}(t,t=>(nw(this.node,t,"Start"),t=>nw(this.node,t,"End"))))}unmount(){}}class nb extends iT{onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=eB(iE(this.node.current,"focus",()=>this.onFocus()),iE(this.node.current,"blur",()=>this.onBlur()))}unmount(){}constructor(){super(...arguments),this.isActive=!1}}function nT(t,e,i){let{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap","Start"===i);let n=r["onTap"+("End"===i?"":i)];n&&Y.postRender(()=>n(e,iD(e)))}class nP extends iT{mount(){let{current:t}=this.node;t&&(this.unmount=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},[r,n,s]=k(t,i),o=t=>{let r=t.currentTarget;if(!N(t)||V.has(r))return;V.add(r);let s=e(t),o=(t,e)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),N(t)&&V.has(r)&&(V.delete(r),"function"==typeof s&&s(t,{success:e}))},a=t=>{o(t,i.useGlobalTarget||R(r,t.target))},l=t=>{o(t,!1)};window.addEventListener("pointerup",a,n),window.addEventListener("pointercancel",l,n)};return r.forEach(t=>{L.has(t.tagName)||-1!==t.tabIndex||null!==t.getAttribute("tabindex")||(t.tabIndex=0),(i.useGlobalTarget?window:t).addEventListener("pointerdown",o,n),t.addEventListener("focus",t=>j(t,n),n)}),s}(t,t=>(nT(this.node,t,"Start"),(t,e)=>{let{success:i}=e;return nT(this.node,t,i?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}let nA=new WeakMap,nS=new WeakMap,nE=t=>{let e=nA.get(t.target);e&&e(t)},nD=t=>{t.forEach(nE)},nM={some:0,all:1};class nk extends iT{startObserver(){this.unmount();let{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:r="some",once:n}=t,s={root:e?e.current:void 0,rootMargin:i,threshold:"number"==typeof r?r:nM[r]};return function(t,e,i){let r=function(t){let{root:e,...i}=t,r=e||document;nS.has(r)||nS.set(r,{});let n=nS.get(r),s=JSON.stringify(i);return n[s]||(n[s]=new IntersectionObserver(nD,{root:e,...i})),n[s]}(e);return nA.set(t,i),r.observe(t),()=>{nA.delete(t),r.unobserve(t)}}(this.node.current,s,t=>{let{isIntersecting:e}=t;if(this.isInView===e||(this.isInView=e,n&&!e&&this.hasEnteredView))return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);let{onViewportEnter:i,onViewportLeave:r}=this.node.getProps(),s=e?i:r;s&&s(t)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:t,prevProps:e}=this.node;["amount","margin","root"].some(function(t){let{viewport:e={}}=t,{viewport:i={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=>e[t]!==i[t]}(t,e))&&this.startObserver()}unmount(){}constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}}let nC=(0,rc.createContext)({strict:!1}),nR=(0,rc.createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),nI=(0,rc.createContext)({});function nL(t){return n(t.animate)||d.some(e=>a(t[e]))}function nV(t){return!!(nL(t)||t.variants)}function nF(t){return Array.isArray(t)?t.join(" "):t}let nO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nj={};for(let t in nO)nj[t]={isEnabled:e=>nO[t].some(t=>!!e[t])};let nN=Symbol.for("motionComponentSymbol"),nB=rc.useLayoutEffect,nU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nW(t){if("string"!=typeof t||t.includes("-"));else if(nU.indexOf(t)>-1||/[A-Z]/u.test(t))return!0;return!1}let nG=t=>(e,i)=>{let r=(0,rc.useContext)(nI),s=(0,rc.useContext)(rd),o=()=>(function(t,e,i,r){let{scrapeMotionValuesFromProps:s,createRenderState:o,onUpdate:a}=t,l={latestValues:function(t,e,i,r){let s={},o=r(t,{});for(let t in o)s[t]=rE(o[t]);let{initial:a,animate:l}=t,h=nL(t),c=nV(t);e&&c&&!h&&!1!==t.inherit&&(void 0===a&&(a=e.initial),void 0===l&&(l=e.animate));let d=!!i&&!1===i.initial,p=(d=d||!1===a)?l:a;if(p&&"boolean"!=typeof p&&!n(p)){let e=Array.isArray(p)?p:[p];for(let i=0;i<e.length;i++){let r=u(t,e[i]);if(r){let{transitionEnd:t,transition:e,...i}=r;for(let t in i){let e=i[t];if(Array.isArray(e)){let t=d?e.length-1:0;e=e[t]}null!==e&&(s[t]=e)}for(let e in t)s[e]=t[e]}}}return s}(e,i,r,s),renderState:o()};return a&&(l.onMount=t=>a({props:e,current:t,...l}),l.onUpdate=t=>a(t)),l})(t,e,r,s);return i?o():function(t){let e=(0,rc.useRef)(null);return null===e.current&&(e.current=t()),e.current}(o)},nz=(t,e)=>e&&"number"==typeof t?e.transform(t):t,nX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},n_=B.length;function nH(t,e,i){let{style:r,vars:n,transformOrigin:s}=t,o=!1,a=!1;for(let t in e){let i=e[t];if(U.has(t)){o=!0;continue}if(eg(t)){n[t]=i;continue}{let e=nz(i,t9[t]);t.startsWith("origin")?(a=!0,s[t]=e):r[t]=e}}if(!e.transform&&(o||i?r.transform=function(t,e,i){let r="",n=!0;for(let s=0;s<n_;s++){let o=B[s],a=t[o];if(void 0===a)continue;let l=!0;if(!(l="number"==typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a))||i){let t=nz(a,t9[o]);if(!l){n=!1;let e=nX[o]||o;r+="".concat(e,"(").concat(t,") ")}i&&(e[o]=t)}}return r=r.trim(),i?r=i(e,n?"":r):n&&(r="none"),r}(e,t.transform,i):r.transform&&(r.transform="none")),a){let{originX:t="50%",originY:e="50%",originZ:i=0}=s;r.transformOrigin="".concat(t," ").concat(e," ").concat(i)}}let nK={offset:"stroke-dashoffset",array:"stroke-dasharray"},nY={offset:"strokeDashoffset",array:"strokeDasharray"};function nq(t,e,i){return"string"==typeof t?t:tG.transform(e+i*t)}function nZ(t,e,i,r){let{attrX:n,attrY:s,attrScale:o,originX:a,originY:l,pathLength:u,pathSpacing:h=1,pathOffset:c=0,...d}=e;if(nH(t,d,r),i){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};let{attrs:p,style:f,dimensions:m}=t;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==a||void 0!==l||f.transform)&&(f.transformOrigin=function(t,e,i){let r=nq(e,t.x,t.width),n=nq(i,t.y,t.height);return"".concat(r," ").concat(n)}(m,void 0!==a?a:.5,void 0!==l?l:.5)),void 0!==n&&(p.x=n),void 0!==s&&(p.y=s),void 0!==o&&(p.scale=o),void 0!==u&&function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=!(arguments.length>4)||void 0===arguments[4]||arguments[4];t.pathLength=1;let s=n?nK:nY;t[s.offset]=tG.transform(-r);let o=tG.transform(e),a=tG.transform(i);t[s.array]="".concat(o," ").concat(a)}(p,u,h,c,!1)}let n$=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),nJ=()=>({...n$(),attrs:{}}),nQ=t=>"string"==typeof t&&"svg"===t.toLowerCase();function n0(t,e,i,r){let{style:n,vars:s}=e;for(let e in Object.assign(t.style,n,r&&r.getProjectionStyles(i)),s)t.style.setProperty(e,s[e])}let n1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function n2(t,e,i,r){for(let i in n0(t,e,void 0,r),e.attrs)t.setAttribute(n1.has(i)?i:tu(i),e.attrs[i])}function n3(t,e){let{layout:i,layoutId:r}=e;return U.has(t)||t.startsWith("origin")||(i||void 0!==r)&&(!!ry[t]||"opacity"===t)}function n4(t,e,i){var r;let{style:n}=t,s={};for(let o in n)(ta(n[o])||e.style&&ta(e.style[o])||n3(o,t)||(null===(r=null==i?void 0:i.getValue(o))||void 0===r?void 0:r.liveStyle)!==void 0)&&(s[o]=n[o]);return s}function n5(t,e,i){let r=n4(t,e,i);for(let i in t)(ta(t[i])||ta(e[i]))&&(r[-1!==B.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=t[i]);return r}let n8=["x","y","width","height","cx","cy","r"],n6={useVisualState:nG({scrapeMotionValuesFromProps:n5,createRenderState:nJ,onUpdate:t=>{let{props:e,prevProps:i,current:r,renderState:n,latestValues:s}=t;if(!r)return;let o=!!e.drag;if(!o){for(let t in s)if(U.has(t)){o=!0;break}}if(!o)return;let a=!i;if(i)for(let t=0;t<n8.length;t++){let r=n8[t];e[r]!==i[r]&&(a=!0)}a&&Y.read(()=>{!function(t,e){try{e.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}}(r,n),Y.render(()=>{nZ(n,s,nQ(r.tagName),e.transformTemplate),n2(r,n)})})}})},n9={useVisualState:nG({scrapeMotionValuesFromProps:n4,createRenderState:n$})};function n7(t,e,i){for(let r in e)ta(e[r])||n3(r,i)||(t[r]=e[r])}let st=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function se(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||st.has(t)}let si=t=>!se(t);try{(ra=require("@emotion/is-prop-valid").default)&&(si=t=>t.startsWith("on")?!se(t):ra(t))}catch(t){}let sr={current:null},sn={current:!1},ss=[...eP,tK,t2],so=t=>ss.find(eT(t)),sa=new WeakMap,sl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class su{scrapeMotionValuesFromProps(t,e,i){return{}}mount(t){this.current=t,sa.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,e)=>this.bindToMotionValue(e,t)),sn.current||function(){if(sn.current=!0,window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion)"),e=()=>sr.current=t.matches;t.addListener(e),e()}else sr.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||sr.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let t in sa.delete(this.current),this.projection&&this.projection.unmount(),q(this.notifyUpdate),q(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[t].clear();for(let t in this.features){let e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){let i;this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();let r=U.has(t),n=e.on("change",e=>{this.latestValues[t]=e,this.props.onUpdate&&Y.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=e.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{n(),s(),i&&i(),e.owner&&e.stop()})}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in nj){let e=nj[t];if(!e)continue;let{isEnabled:i,Feature:r}=e;if(!this.features[t]&&r&&i(this.props)&&(this.features[t]=new r(this)),this.features[t]){let e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):iZ()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let e=0;e<sl.length;e++){let i=sl[e];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);let r=t["on"+i];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=function(t,e,i){for(let r in e){let n=e[r],s=i[r];if(ta(n))t.addValue(r,n);else if(ta(s))t.addValue(r,to(n,{owner:t}));else if(s!==n){if(t.hasValue(r)){let e=t.getValue(r);!0===e.liveStyle?e.jump(n):e.hasAnimated||e.set(n)}else{let e=t.getStaticValue(r);t.addValue(r,to(void 0!==e?e:n,{owner:t}))}}}for(let r in i)void 0===e[r]&&t.removeValue(r);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){let e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){let i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);let e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return void 0===i&&void 0!==e&&(i=to(null===e?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){var i;let r=void 0===this.latestValues[t]&&this.current?null!==(i=this.getBaseTargetFromProps(this.props,t))&&void 0!==i?i:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];return null!=r&&("string"==typeof r&&(em(r)||tS(r))?r=parseFloat(r):!so(r)&&t2.test(e)&&(r=ee(t,e)),this.setBaseTarget(t,ta(r)?r.get():r)),ta(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;let i;let{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let n=u(this.props,r,null===(e=this.presenceContext)||void 0===e?void 0:e.custom);n&&(i=n[t])}if(r&&void 0!==i)return i;let n=this.getBaseTargetFromProps(this.props,t);return void 0===n||ta(n)?void 0!==this.initialValues[t]&&void 0===i?void 0:this.baseTarget[t]:n}on(t,e){return this.events[t]||(this.events[t]=new ti),this.events[t].add(e)}notify(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];this.events[t]&&this.events[t].notify(...i)}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:n,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ef,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let t=Q.now();this.renderScheduledAt<t&&(this.renderScheduledAt=t,Y.render(this.render,!1,!0))};let{latestValues:a,renderState:l,onUpdate:u}=s;this.onUpdate=u,this.latestValues=a,this.baseTarget={...a},this.initialValues=e.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!n,this.isControllingVariants=nL(e),this.isVariantNode=nV(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);let{willChange:h,...c}=this.scrapeMotionValuesFromProps(e,{},this);for(let t in c){let e=c[t];void 0!==a[t]&&ta(e)&&e.set(a[t],!1)}}}class sh extends su{sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,e){let{vars:i,style:r}=e;delete i[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:t}=this.props;ta(t)&&(this.childSubscription=t.on("change",t=>{this.current&&(this.current.textContent="".concat(t))}))}constructor(){super(...arguments),this.KeyframeResolver=eS}}class sc extends sh{readValueFromInstance(t,e){if(U.has(e)){let t=et(e);return t&&t.default||0}{let i=window.getComputedStyle(t),r=(eg(e)?i.getPropertyValue(e):i[e])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(t,e){let{transformPagePoint:i}=e;return i7(t,i)}build(t,e,i){nH(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return n4(t,e,i)}constructor(){super(...arguments),this.type="html",this.renderInstance=n0}}class sd extends sh{getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(U.has(e)){let t=et(e);return t&&t.default||0}return e=n1.has(e)?e:tu(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return n5(t,e,i)}build(t,e,i){nZ(t,e,this.isSVGTag,i.transformTemplate)}renderInstance(t,e,i,r){n2(t,e,i,r)}mount(t){this.isSVGTag=nQ(t.tagName),super.mount(t)}constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=iZ}}let sp=function(t){if("undefined"==typeof Proxy)return t;let e=new Map;return new Proxy(function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return t(...i)},{get:(i,r)=>"create"===r?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}((rl={animation:{Feature:iP},exit:{Feature:iS},inView:{Feature:nk},tap:{Feature:nP},focus:{Feature:nb},hover:{Feature:nx},pan:{Feature:ro},drag:{Feature:rn,ProjectionNode:ny,MeasureLayout:rT},layout:{ProjectionNode:ny,MeasureLayout:rT}},ru=(t,e)=>nW(t)?new sd(e):new sc(e,{allowProjection:t!==rc.Fragment}),function(t){let{forwardMotionProps:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return function(t){var e,i;let{preloadedFeatures:r,createVisualElement:n,useRender:s,useVisualState:o,Component:l}=t;function u(t,e){var i;let r;let u={...(0,rc.useContext)(nR),...t,layoutId:function(t){let{layoutId:e}=t,i=(0,rc.useContext)(rp).id;return i&&void 0!==e?i+"-"+e:e}(t)},{isStatic:h}=u,c=function(t){let{initial:e,animate:i}=function(t,e){if(nL(t)){let{initial:e,animate:i}=t;return{initial:!1===e||a(e)?e:void 0,animate:a(i)?i:void 0}}return!1!==t.inherit?e:{}}(t,(0,rc.useContext)(nI));return(0,rc.useMemo)(()=>({initial:e,animate:i}),[nF(e),nF(i)])}(t),d=o(t,h);if(!h){(0,rc.useContext)(nC).strict;let t=function(t){let{drag:e,layout:i}=nj;if(!e&&!i)return{};let r={...e,...i};return{MeasureLayout:(null==e?void 0:e.isEnabled(t))||(null==i?void 0:i.isEnabled(t))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(u);r=t.MeasureLayout,c.visualElement=function(t,e,i,r,n){var s,o;let{visualElement:a}=(0,rc.useContext)(nI),l=(0,rc.useContext)(nC),u=(0,rc.useContext)(rd),h=(0,rc.useContext)(nR).reducedMotion,c=(0,rc.useRef)(null);r=r||l.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:a,props:i,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:h}));let d=c.current,p=(0,rc.useContext)(rf);d&&!d.projection&&n&&("html"===d.type||"svg"===d.type)&&function(t,e,i,r){let{layoutId:n,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new i(t.latestValues,e["data-framer-portal-id"]?void 0:function t(e){if(e)return!1!==e.options.allowProjection?e.projection:t(e.parent)}(t.parent)),t.projection.setOptions({layoutId:n,layout:s,alwaysMeasureLayout:!!o||a&&iO(a),visualElement:t,animationType:"string"==typeof s?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}(c.current,i,n,p);let f=(0,rc.useRef)(!1);(0,rc.useInsertionEffect)(()=>{d&&f.current&&d.update(i,u)});let m=i[th],v=(0,rc.useRef)(!!m&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,m))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,m)));return nB(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),rw.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),(0,rc.useEffect)(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var t;null===(t=window.MotionHandoffMarkAsComplete)||void 0===t||t.call(window,m)}),v.current=!1))}),d}(l,d,u,n,t.ProjectionNode)}return(0,rh.jsxs)(nI.Provider,{value:c,children:[r&&c.visualElement?(0,rh.jsx)(r,{visualElement:c.visualElement,...u}):null,s(l,t,(i=c.visualElement,(0,rc.useCallback)(t=>{t&&d.onMount&&d.onMount(t),i&&(t?i.mount(t):i.unmount()),e&&("function"==typeof e?e(t):iO(e)&&(e.current=t))},[i])),d,h,c.visualElement)]})}r&&function(t){for(let e in t)nj[e]={...nj[e],...t[e]}}(r),u.displayName="motion.".concat("string"==typeof l?l:"create(".concat(null!==(i=null!==(e=l.displayName)&&void 0!==e?e:l.name)&&void 0!==i?i:"",")"));let h=(0,rc.forwardRef)(u);return h[nN]=l,h}({...nW(t)?n6:n9,preloadedFeatures:rl,useRender:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e,i,r,n,s)=>{let{latestValues:o}=n,a=(nW(e)?function(t,e,i,r){let n=(0,rc.useMemo)(()=>{let i=nJ();return nZ(i,e,nQ(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){let e={};n7(e,t.style,t),n.style={...e,...n.style}}return n}:function(t,e){let i={},r=function(t,e){let i=t.style||{},r={};return n7(r,i,t),Object.assign(r,function(t,e){let{transformTemplate:i}=t;return(0,rc.useMemo)(()=>{let t=n$();return nH(t,e,i),Object.assign({},t.vars,t.style)},[e])}(t,e)),r}(t,e);return t.drag&&!1!==t.dragListener&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===t.drag?"none":"pan-".concat("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i})(i,o,s,e),l=function(t,e,i){let r={};for(let n in t)("values"!==n||"object"!=typeof t.values)&&(si(n)||!0===i&&se(n)||!e&&!se(n)||t.draggable&&n.startsWith("onDrag"))&&(r[n]=t[n]);return r}(i,"string"==typeof e,t),u=e!==rc.Fragment?{...l,...a,ref:r}:{},{children:h}=i,c=(0,rc.useMemo)(()=>ta(h)?h.get():h,[h]);return(0,rc.createElement)(e,{...u,children:c})}}(e),createVisualElement:ru,Component:t})}))},158:function(t,e,i){i.d(e,{w_:function(){return h}});var r=i(4090),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=r.createContext&&r.createContext(n),o=["attr","size","title"];function a(){return(a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach(function(e){var r,n;r=e,n=i[e],(r=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function h(t){return e=>r.createElement(c,a({attr:u({},t.attr)},e),function t(e){return e&&e.map((e,i)=>r.createElement(e.tag,u({key:i},e.attr),t(e.child)))}(t.child))}function c(t){var e=e=>{var i,{attr:n,size:s,title:l}=t,h=function(t,e){if(null==t)return{};var i,r,n=function(t,e){if(null==t)return{};var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;i[r]=t[r]}return i}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}(t,o),c=s||e.size||"1em";return e.className&&(i=e.className),t.className&&(i=(i?i+" ":"")+t.className),r.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,h,{className:i,style:u(u({color:t.color||e.color},e.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&r.createElement("title",null,l),t.children)};return void 0!==s?r.createElement(s.Consumer,null,t=>e(t)):e(n)}},8685:function(t,e,i){let r,n,s;i.d(e,{y:function(){return $}});var o=i(6376),a={},l=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},u=function(t){return new Worker(t)};try{URL.revokeObjectURL(l(""))}catch(t){l=function(t){return"data:application/javascript;charset=UTF-8,"+encodeURI(t)},u=function(t){return new Worker(t,{type:"module"})}}var h=Uint8Array,c=Uint16Array,d=Uint32Array,p=new h([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f=new h([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m=new h([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v=function(t,e){for(var i=new c(31),r=0;r<31;++r)i[r]=e+=1<<t[r-1];for(var n=new d(i[30]),r=1;r<30;++r)for(var s=i[r];s<i[r+1];++s)n[s]=s-i[r]<<5|r;return[i,n]},g=v(p,2),y=g[0],w=g[1];y[28]=258,w[258]=28;for(var x=v(f,0),b=x[0],T=x[1],P=new c(32768),A=0;A<32768;++A){var S=(43690&A)>>>1|(21845&A)<<1;S=(61680&(S=(52428&S)>>>2|(13107&S)<<2))>>>4|(3855&S)<<4,P[A]=((65280&S)>>>8|(255&S)<<8)>>>1}for(var E=function(t,e,i){for(var r,n=t.length,s=0,o=new c(e);s<n;++s)++o[t[s]-1];var a=new c(e);for(s=0;s<e;++s)a[s]=a[s-1]+o[s-1]<<1;if(i){r=new c(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var u=s<<4|t[s],h=e-t[s],d=a[t[s]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)r[P[d]>>>l]=u}else for(s=0,r=new c(n);s<n;++s)t[s]&&(r[s]=P[a[t[s]-1]++]>>>15-t[s]);return r},D=new h(288),A=0;A<144;++A)D[A]=8;for(var A=144;A<256;++A)D[A]=9;for(var A=256;A<280;++A)D[A]=7;for(var A=280;A<288;++A)D[A]=8;for(var M=new h(32),A=0;A<32;++A)M[A]=5;var k=E(D,9,1),C=E(M,5,1),R=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},I=function(t,e,i){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&i},L=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},V=function(t){return(t/8|0)+(7&t&&1)},F=function(t,e,i){(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length);var r=new(t instanceof c?c:t instanceof d?d:h)(i-e);return r.set(t.subarray(e,i)),r},O=function(t,e,i){var r=t.length;if(!r||i&&!i.l&&r<5)return e||new h(0);var n=!e||i,s=!i||i.i;i||(i={}),e||(e=new h(3*r));var o=function(t){var i=e.length;if(t>i){var r=new h(Math.max(2*i,t));r.set(e),e=r}},a=i.f||0,l=i.p||0,u=i.b||0,c=i.l,d=i.d,v=i.m,g=i.n,w=8*r;do{if(!c){i.f=a=I(t,l,1);var x=I(t,l+1,3);if(l+=3,x){if(1==x)c=k,d=C,v=9,g=5;else if(2==x){var T=I(t,l,31)+257,P=I(t,l+10,15)+4,A=T+I(t,l+5,31)+1;l+=14;for(var S=new h(A),D=new h(19),M=0;M<P;++M)D[m[M]]=I(t,l+3*M,7);l+=3*P;for(var O=R(D),j=(1<<O)-1,N=E(D,O,1),M=0;M<A;){var B=N[I(t,l,j)];l+=15&B;var U=B>>>4;if(U<16)S[M++]=U;else{var W=0,G=0;for(16==U?(G=3+I(t,l,3),l+=2,W=S[M-1]):17==U?(G=3+I(t,l,7),l+=3):18==U&&(G=11+I(t,l,127),l+=7);G--;)S[M++]=W}}var z=S.subarray(0,T),X=S.subarray(T);v=R(z),g=R(X),c=E(z,v,1),d=E(X,g,1)}else throw"invalid block type"}else{var U=V(l)+4,_=t[U-4]|t[U-3]<<8,H=U+_;if(H>r){if(s)throw"unexpected EOF";break}n&&o(u+_),e.set(t.subarray(U,H),u),i.b=u+=_,i.p=l=8*H;continue}if(l>w){if(s)throw"unexpected EOF";break}}n&&o(u+131072);for(var K=(1<<v)-1,Y=(1<<g)-1,q=l;;q=l){var W=c[L(t,l)&K],Z=W>>>4;if((l+=15&W)>w){if(s)throw"unexpected EOF";break}if(!W)throw"invalid length/literal";if(Z<256)e[u++]=Z;else if(256==Z){q=l,c=null;break}else{var $=Z-254;if(Z>264){var M=Z-257,J=p[M];$=I(t,l,(1<<J)-1)+y[M],l+=J}var Q=d[L(t,l)&Y],tt=Q>>>4;if(!Q)throw"invalid distance";l+=15&Q;var X=b[tt];if(tt>3){var J=f[tt];X+=L(t,l)&(1<<J)-1,l+=J}if(l>w){if(s)throw"unexpected EOF";break}n&&o(u+131072);for(var te=u+$;u<te;u+=4)e[u]=e[u-X],e[u+1]=e[u+1-X],e[u+2]=e[u+2-X],e[u+3]=e[u+3-X];u=te}}i.l=c,i.p=q,i.b=u,c&&(a=1,i.m=v,i.d=d,i.n=g)}while(!a);return u==e.length?e:F(e,0,u)},j=function(t,e,i){i<<=7&e;var r=e/8|0;t[r]|=i,t[r+1]|=i>>>8},N=function(t,e,i){i<<=7&e;var r=e/8|0;t[r]|=i,t[r+1]|=i>>>8,t[r+2]|=i>>>16},B=function(t,e){for(var i=[],r=0;r<t.length;++r)t[r]&&i.push({s:r,f:t[r]});var n=i.length,s=i.slice();if(!n)return[H,0];if(1==n){var o=new h(i[0].s+1);return o[i[0].s]=1,[o,1]}i.sort(function(t,e){return t.f-e.f}),i.push({s:-1,f:25001});var a=i[0],l=i[1],u=0,d=1,p=2;for(i[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=n-1;)a=i[i[u].f<i[p].f?u++:p++],l=i[u!=d&&i[u].f<i[p].f?u++:p++],i[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=s[0].s,r=1;r<n;++r)s[r].s>f&&(f=s[r].s);var m=new c(f+1),v=U(i[d-1],m,0);if(v>e){var r=0,g=0,y=v-e,w=1<<y;for(s.sort(function(t,e){return m[e.s]-m[t.s]||t.f-e.f});r<n;++r){var x=s[r].s;if(m[x]>e)g+=w-(1<<v-m[x]),m[x]=e;else break}for(g>>>=y;g>0;){var b=s[r].s;m[b]<e?g-=1<<e-m[b]++-1:++r}for(;r>=0&&g;--r){var T=s[r].s;m[T]==e&&(--m[T],++g)}v=e}return[new h(m),v]},U=function(t,e,i){return -1==t.s?Math.max(U(t.l,e,i+1),U(t.r,e,i+1)):e[t.s]=i},W=function(t){for(var e=t.length;e&&!t[--e];);for(var i=new c(++e),r=0,n=t[0],s=1,o=function(t){i[r++]=t},a=1;a<=e;++a)if(t[a]==n&&a!=e)++s;else{if(!n&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(n),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(n);s=1,n=t[a]}return[i.subarray(0,r),e]},G=function(t,e){for(var i=0,r=0;r<e.length;++r)i+=t[r]*e[r];return i},z=function(t,e,i){var r=i.length,n=V(e+2);t[n]=255&r,t[n+1]=r>>>8,t[n+2]=255^t[n],t[n+3]=255^t[n+1];for(var s=0;s<r;++s)t[n+s+4]=i[s];return(n+4+r)*8},X=function(t,e,i,r,n,s,o,a,l,u,h){j(e,h++,i),++n[256];for(var d,v,g,y,w=B(n,15),x=w[0],b=w[1],T=B(s,15),P=T[0],A=T[1],S=W(x),k=S[0],C=S[1],R=W(P),I=R[0],L=R[1],V=new c(19),F=0;F<k.length;++F)V[31&k[F]]++;for(var F=0;F<I.length;++F)V[31&I[F]]++;for(var O=B(V,7),U=O[0],X=O[1],_=19;_>4&&!U[m[_-1]];--_);var H=u+5<<3,K=G(n,D)+G(s,M)+o,Y=G(n,x)+G(s,P)+o+14+3*_+G(V,U)+(2*V[16]+3*V[17]+7*V[18]);if(H<=K&&H<=Y)return z(e,h,t.subarray(l,l+u));if(j(e,h,1+(Y<K)),h+=2,Y<K){d=E(x,b,0),v=x,g=E(P,A,0),y=P;var q=E(U,X,0);j(e,h,C-257),j(e,h+5,L-1),j(e,h+10,_-4),h+=14;for(var F=0;F<_;++F)j(e,h+3*F,U[m[F]]);h+=3*_;for(var Z=[k,I],$=0;$<2;++$)for(var J=Z[$],F=0;F<J.length;++F){var Q=31&J[F];j(e,h,q[Q]),h+=U[Q],Q>15&&(j(e,h,J[F]>>>5&127),h+=J[F]>>>12)}}else d=null,v=D,g=null,y=M;for(var F=0;F<a;++F)if(r[F]>255){var Q=r[F]>>>18&31;N(e,h,d[Q+257]),h+=v[Q+257],Q>7&&(j(e,h,r[F]>>>23&31),h+=p[Q]);var tt=31&r[F];N(e,h,g[tt]),h+=y[tt],tt>3&&(N(e,h,r[F]>>>5&8191),h+=f[tt])}else N(e,h,d[r[F]]),h+=v[r[F]];return N(e,h,d[256]),h+v[256]},_=new d([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H=new h(0),K=function(t){if((15&t[0])!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"},Y="undefined"!=typeof TextDecoder&&new TextDecoder;try{Y.decode(H,{stream:!0})}catch(t){}function q(t,e,i){let r=i.length-t-1;if(e>=i[r])return r-1;if(e<=i[t])return t;let n=t,s=r,o=Math.floor((n+s)/2);for(;e<i[o]||e>=i[o+1];)e<i[o]?s=o:n=o,o=Math.floor((n+s)/2);return o}class Z extends o.Hyl{getPoint(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Pa4,i=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=function(t,e,i,r){let n=q(t,r,e),s=function(t,e,i,r){let n=[],s=[],o=[];n[0]=1;for(let a=1;a<=i;++a){s[a]=e-r[t+1-a],o[a]=r[t+a]-e;let i=0;for(let t=0;t<a;++t){let e=o[t+1],r=s[a-t],l=n[t]/(e+r);n[t]=i+e*l,i=r*l}n[a]=i}return n}(n,r,t,e),a=new o.Ltg(0,0,0,0);for(let e=0;e<=t;++e){let r=i[n-t+e],o=s[e],l=r.w*o;a.x+=r.x*l,a.y+=r.y*l,a.z+=r.z*l,a.w+=r.w*o}return a}(this.degree,this.knots,this.controlPoints,i);return 1!==r.w&&r.divideScalar(r.w),e.set(r.x,r.y,r.z)}getTangent(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Pa4,r=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),n=(e=this.degree,function(t){let e=t.length,i=[],r=[];for(let n=0;n<e;++n){let e=t[n];i[n]=new o.Pa4(e.x,e.y,e.z),r[n]=e.w}let n=[];for(let t=0;t<e;++t){let e=i[t].clone();for(let i=1;i<=t;++i)e.sub(n[t-i].clone().multiplyScalar(function(t,e){let i=1;for(let e=2;e<=t;++e)i*=e;let r=1;for(let t=2;t<=e;++t)r*=t;for(let i=2;i<=t-e;++i)r*=i;return i/r}(t,i)*r[i]));n[t]=e.divideScalar(r[0])}return n}(function(t,e,i,r,n){let s=n<t?n:t,a=[],l=q(t,r,e),u=function(t,e,i,r,n){let s=[];for(let t=0;t<=i;++t)s[t]=0;let o=[];for(let t=0;t<=r;++t)o[t]=s.slice(0);let a=[];for(let t=0;t<=i;++t)a[t]=s.slice(0);a[0][0]=1;let l=s.slice(0),u=s.slice(0);for(let r=1;r<=i;++r){l[r]=e-n[t+1-r],u[r]=n[t+r]-e;let i=0;for(let t=0;t<r;++t){let e=u[t+1],n=l[r-t];a[r][t]=e+n;let s=a[t][r-1]/a[r][t];a[t][r]=i+e*s,i=n*s}a[r][r]=i}for(let t=0;t<=i;++t)o[0][t]=a[t][i];for(let t=0;t<=i;++t){let e=0,n=1,l=[];for(let t=0;t<=i;++t)l[t]=s.slice(0);l[0][0]=1;for(let s=1;s<=r;++s){let r=0,u=t-s,h=i-s;t>=s&&(l[n][0]=l[e][0]/a[h+1][u],r=l[n][0]*a[u][h]);let c=u>=-1?1:-u,d=t-1<=h?s-1:i-t;for(let t=c;t<=d;++t)l[n][t]=(l[e][t]-l[e][t-1])/a[h+1][u+t],r+=l[n][t]*a[u+t][h];t<=h&&(l[n][s]=-l[e][s-1]/a[h+1][t],r+=l[n][s]*a[t][h]),o[s][t]=r;let p=e;e=n,n=p}}let h=i;for(let t=1;t<=r;++t){for(let e=0;e<=i;++e)o[t][e]*=h;h*=i-t}return o}(l,r,t,s,e),h=[];for(let t=0;t<i.length;++t){let e=i[t].clone(),r=e.w;e.x*=r,e.y*=r,e.z*=r,h[t]=e}for(let e=0;e<=s;++e){let i=h[l-t].clone().multiplyScalar(u[e][0]);for(let r=1;r<=t;++r)i.add(h[l-t+r].clone().multiplyScalar(u[e][r]));a[e]=i}for(let t=s+1;t<=n+1;++t)a[t]=new o.Ltg(0,0,0);return a}(e,this.knots,this.controlPoints,r,1)));return i.copy(n[1]).normalize(),i}constructor(t,e,i,r,n){super(),this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=r||0,this.endKnot=n||this.knots.length-1;for(let t=0;t<i.length;++t){let e=i[t];this.controlPoints[t]=new o.Ltg(e.x,e.y,e.z,e.w)}}}class $ extends o.aNw{load(t,e,i,r){let n=this,s=""===n.path?o.Zp0.extractUrlBase(t):n.path,a=new o.hH6(this.manager);a.setPath(n.path),a.setResponseType("arraybuffer"),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(t,function(i){try{e(n.parse(i,s))}catch(e){r?r(e):console.error(e),n.manager.itemError(t)}},i,r)}parse(t,e){if(function(t){let e="Kaydara FBX Binary  \x00";return t.byteLength>=e.length&&e===tf(t,0,e.length)}(t))r=new ti().parse(t);else{let e=tf(t);if(!function(t){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],i=0;for(let r=0;r<e.length;++r)if(function(e){let r=t[e-1];return t=t.slice(i+e),i++,r}(1)===e[r])return!1;return!0}(e))throw Error("THREE.FBXLoader: Unknown format.");if(7e3>ts(e))throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ts(e));r=new te().parse(e)}return new J(new o.dpR(this.manager).setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin),this.manager).parse(r)}constructor(t){super(t)}}class J{parse(){n=this.parseConnections();let t=this.parseImages(),e=this.parseTextures(t),i=this.parseMaterials(e),r=this.parseDeformers(),o=new Q().parse(r);return this.parseScene(r,o,i),s}parseConnections(){let t=new Map;return"Connections"in r&&r.Connections.connections.forEach(function(e){let i=e[0],r=e[1],n=e[2];t.has(i)||t.set(i,{parents:[],children:[]}),t.get(i).parents.push({ID:r,relationship:n}),t.has(r)||t.set(r,{parents:[],children:[]}),t.get(r).children.push({ID:i,relationship:n})}),t}parseImages(){let t={},e={};if("Video"in r.Objects){let i=r.Objects.Video;for(let r in i){let n=i[r];if(t[parseInt(r)]=n.RelativeFilename||n.Filename,"Content"in n){let t=n.Content instanceof ArrayBuffer&&n.Content.byteLength>0,s="string"==typeof n.Content&&""!==n.Content;if(t||s){let t=this.parseImage(i[r]);e[n.RelativeFilename||n.Filename]=t}}}}for(let i in t){let r=t[i];void 0!==e[r]?t[i]=e[r]:t[i]=t[i].split("\\").pop()}return t}parseImage(t){let e;let i=t.Content,r=t.RelativeFilename||t.Filename,n=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(n){case"bmp":e="image/bmp";break;case"jpg":case"jpeg":e="image/jpeg";break;case"png":e="image/png";break;case"tif":e="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),e="image/tga";break;default:console.warn('FBXLoader: Image type "'+n+'" is not supported.');return}if("string"==typeof i)return"data:"+e+";base64,"+i;{let t=new Uint8Array(i);return window.URL.createObjectURL(new Blob([t],{type:e}))}}parseTextures(t){let e=new Map;if("Texture"in r.Objects){let i=r.Objects.Texture;for(let r in i){let n=this.parseTexture(i[r],t);e.set(parseInt(r),n)}}return e}parseTexture(t,e){let i=this.loadTexture(t,e);i.ID=t.id,i.name=t.attrName;let r=t.WrapModeU,n=t.WrapModeV,s=void 0!==r?r.value:0,a=void 0!==n?n.value:0;if(i.wrapS=0===s?o.rpg:o.uWy,i.wrapT=0===a?o.rpg:o.uWy,"Scaling"in t){let e=t.Scaling.value;i.repeat.x=e[0],i.repeat.y=e[1]}if("Translation"in t){let e=t.Translation.value;i.offset.x=e[0],i.offset.y=e[1]}return i}loadTexture(t,e){let i,r;let s=this.textureLoader.path,a=n.get(t.id).children;void 0!==a&&a.length>0&&void 0!==e[a[0].ID]&&(0===(i=e[a[0].ID]).indexOf("blob:")||0===i.indexOf("data:"))&&this.textureLoader.setPath(void 0);let l=t.FileName.slice(-3).toLowerCase();if("tga"===l){let e=this.manager.getHandler(".tga");null===e?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),r=new o.xEZ):(e.setPath(this.textureLoader.path),r=e.load(i))}else if("dds"===l){let e=this.manager.getHandler(".dds");null===e?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",t.RelativeFilename),r=new o.xEZ):(e.setPath(this.textureLoader.path),r=e.load(i))}else"psd"===l?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),r=new o.xEZ):r=this.textureLoader.load(i);return this.textureLoader.setPath(s),r}parseMaterials(t){let e=new Map;if("Material"in r.Objects){let i=r.Objects.Material;for(let r in i){let n=this.parseMaterial(i[r],t);null!==n&&e.set(parseInt(r),n)}}return e}parseMaterial(t,e){let i;let r=t.id,s=t.attrName,a=t.ShadingModel;if("object"==typeof a&&(a=a.value),!n.has(r))return null;let l=this.parseParameters(t,e,r);switch(a.toLowerCase()){case"phong":i=new o.xoR;break;case"lambert":i=new o.YBo;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),i=new o.xoR}return i.setValues(l),i.name=s,i}parseParameters(t,e,i){let r={};t.BumpFactor&&(r.bumpScale=t.BumpFactor.value),t.Diffuse?r.color=new o.Ilk().fromArray(t.Diffuse.value).convertSRGBToLinear():t.DiffuseColor&&("Color"===t.DiffuseColor.type||"ColorRGB"===t.DiffuseColor.type)&&(r.color=new o.Ilk().fromArray(t.DiffuseColor.value).convertSRGBToLinear()),t.DisplacementFactor&&(r.displacementScale=t.DisplacementFactor.value),t.Emissive?r.emissive=new o.Ilk().fromArray(t.Emissive.value).convertSRGBToLinear():t.EmissiveColor&&("Color"===t.EmissiveColor.type||"ColorRGB"===t.EmissiveColor.type)&&(r.emissive=new o.Ilk().fromArray(t.EmissiveColor.value).convertSRGBToLinear()),t.EmissiveFactor&&(r.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(r.opacity=parseFloat(t.Opacity.value)),r.opacity<1&&(r.transparent=!0),t.ReflectionFactor&&(r.reflectivity=t.ReflectionFactor.value),t.Shininess&&(r.shininess=t.Shininess.value),t.Specular?r.specular=new o.Ilk().fromArray(t.Specular.value).convertSRGBToLinear():t.SpecularColor&&"Color"===t.SpecularColor.type&&(r.specular=new o.Ilk().fromArray(t.SpecularColor.value).convertSRGBToLinear());let s=this;return n.get(i).children.forEach(function(t){let i=t.relationship;switch(i){case"Bump":r.bumpMap=s.getTexture(e,t.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(e,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(e,t.ID),void 0!==r.map&&(r.map.colorSpace=o.KI_);break;case"DisplacementColor":r.displacementMap=s.getTexture(e,t.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(e,t.ID),void 0!==r.emissiveMap&&(r.emissiveMap.colorSpace=o.KI_);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(e,t.ID);break;case"ReflectionColor":r.envMap=s.getTexture(e,t.ID),void 0!==r.envMap&&(r.envMap.mapping=o.dSO,r.envMap.colorSpace=o.KI_);break;case"SpecularColor":r.specularMap=s.getTexture(e,t.ID),void 0!==r.specularMap&&(r.specularMap.colorSpace=o.KI_);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(e,t.ID),r.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",i)}}),r}getTexture(t,e){return"LayeredTexture"in r.Objects&&e in r.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),e=n.get(e).children[0].ID),t.get(e)}parseDeformers(){let t={},e={};if("Deformer"in r.Objects){let i=r.Objects.Deformer;for(let r in i){let s=i[r],o=n.get(parseInt(r));if("Skin"===s.attrType){let e=this.parseSkeleton(o,i);e.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),e.geometryID=o.parents[0].ID,t[r]=e}else if("BlendShape"===s.attrType){let t={id:r};t.rawTargets=this.parseMorphTargets(o,i),t.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),e[r]=t}}}return{skeletons:t,morphTargets:e}}parseSkeleton(t,e){let i=[];return t.children.forEach(function(t){let r=e[t.ID];if("Cluster"!==r.attrType)return;let n={ID:t.ID,indices:[],weights:[],transformLink:new o.yGw().fromArray(r.TransformLink.a)};"Indexes"in r&&(n.indices=r.Indexes.a,n.weights=r.Weights.a),i.push(n)}),{rawBones:i,bones:[]}}parseMorphTargets(t,e){let i=[];for(let r=0;r<t.children.length;r++){let s=t.children[r],o=e[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;a.geoID=n.get(parseInt(s.ID)).children.filter(function(t){return void 0===t.relationship})[0].ID,i.push(a)}return i}parseScene(t,e,i){s=new o.ZAu;let a=this.parseModels(t.skeletons,e,i),l=r.Objects.Model,u=this;a.forEach(function(t){let e=l[t.ID];u.setLookAtProperties(t,e),n.get(t.ID).parents.forEach(function(e){let i=a.get(e.ID);void 0!==i&&i.add(t)}),null===t.parent&&s.add(t)}),this.bindSkeleton(t.skeletons,e,a),this.addGlobalSceneSettings(),s.traverse(function(t){if(t.userData.transformData){t.parent&&(t.userData.transformData.parentMatrix=t.parent.matrix,t.userData.transformData.parentMatrixWorld=t.parent.matrixWorld);let e=tc(t.userData.transformData);t.applyMatrix4(e),t.updateWorldMatrix()}});let h=new tt().parse();1===s.children.length&&s.children[0].isGroup&&(s.children[0].animations=h,s=s.children[0]),s.animations=h}parseModels(t,e,i){let s=new Map,a=r.Objects.Model;for(let r in a){let l=parseInt(r),u=a[r],h=n.get(l),c=this.buildSkeleton(h,t,l,u.attrName);if(!c){switch(u.attrType){case"Camera":c=this.createCamera(h);break;case"Light":c=this.createLight(h);break;case"Mesh":c=this.createMesh(h,e,i);break;case"NurbsCurve":c=this.createCurve(h,e);break;case"LimbNode":case"Root":c=new o.N$j;break;default:c=new o.ZAu}c.name=u.attrName?o.iUV.sanitizeNodeName(u.attrName):"",c.userData.originalName=u.attrName,c.ID=l}this.getTransformData(c,u),s.set(l,c)}return s}buildSkeleton(t,e,i,r){let n=null;return t.parents.forEach(function(t){for(let s in e){let a=e[s];a.rawBones.forEach(function(e,s){if(e.ID===t.ID){let t=n;(n=new o.N$j).matrixWorld.copy(e.transformLink),n.name=r?o.iUV.sanitizeNodeName(r):"",n.userData.originalName=r,n.ID=i,a.bones[s]=n,null!==t&&n.add(t)}})}}),n}createCamera(t){let e,i;if(t.children.forEach(function(t){let e=r.Objects.NodeAttribute[t.ID];void 0!==e&&(i=e)}),void 0===i)e=new o.Tme;else{let t=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(t=1);let r=1;void 0!==i.NearPlane&&(r=i.NearPlane.value/1e3);let n=1e3;void 0!==i.FarPlane&&(n=i.FarPlane.value/1e3);let s=window.innerWidth,a=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(s=i.AspectWidth.value,a=i.AspectHeight.value);let l=s/a,u=45;void 0!==i.FieldOfView&&(u=i.FieldOfView.value);let h=i.FocalLength?i.FocalLength.value:null;switch(t){case 0:e=new o.cPb(u,l,r,n),null!==h&&e.setFocalLength(h);break;case 1:e=new o.iKG(-s/2,s/2,a/2,-a/2,r,n);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+t+"."),e=new o.Tme}}return e}createLight(t){let e,i;if(t.children.forEach(function(t){let e=r.Objects.NodeAttribute[t.ID];void 0!==e&&(i=e)}),void 0===i)e=new o.Tme;else{let t;t=void 0===i.LightType?0:i.LightType.value;let r=16777215;void 0!==i.Color&&(r=new o.Ilk().fromArray(i.Color.value).convertSRGBToLinear());let n=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(n=0);let s=0;switch(void 0!==i.FarAttenuationEnd&&(s=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value),t){case 0:e=new o.cek(r,n,s,1);break;case 1:e=new o.Ox3(r,n);break;case 2:let a=Math.PI/3;void 0!==i.InnerAngle&&(a=o.M8C.degToRad(i.InnerAngle.value));let l=0;void 0!==i.OuterAngle&&(l=Math.max(l=o.M8C.degToRad(i.OuterAngle.value),1)),e=new o.PMe(r,n,s,a,l,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),e=new o.cek(r,n)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(e.castShadow=!0)}return e}createMesh(t,e,i){let r;let n=null,s=null,a=[];return t.children.forEach(function(t){e.has(t.ID)&&(n=e.get(t.ID)),i.has(t.ID)&&a.push(i.get(t.ID))}),a.length>1?s=a:a.length>0?s=a[0]:(s=new o.xoR({name:o.aNw.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(s)),"color"in n.attributes&&a.forEach(function(t){t.vertexColors=!0}),n.FBX_Deformer?(r=new o.TUv(n,s)).normalizeSkinWeights():r=new o.Kj0(n,s),r}createCurve(t,e){let i=t.children.reduce(function(t,i){return e.has(i.ID)&&(t=e.get(i.ID)),t},null),r=new o.nls({name:o.aNw.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new o.x12(i,r)}getTransformData(t,e){let i={};"InheritType"in e&&(i.inheritType=parseInt(e.InheritType.value)),"RotationOrder"in e?i.eulerOrder=td(e.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in e&&(i.translation=e.Lcl_Translation.value),"PreRotation"in e&&(i.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(i.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(i.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(i.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(i.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(i.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(i.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(i.rotationPivot=e.RotationPivot.value),t.userData.transformData=i}setLookAtProperties(t,e){"LookAtProperty"in e&&n.get(t.ID).children.forEach(function(e){if("LookAtProperty"===e.relationship){let i=r.Objects.Model[e.ID];if("Lcl_Translation"in i){let e=i.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(e),s.add(t.target)):t.lookAt(new o.Pa4().fromArray(e))}}})}bindSkeleton(t,e,i){let r=this.parsePoseNodes();for(let s in t){let a=t[s];n.get(parseInt(a.ID)).parents.forEach(function(t){if(e.has(t.ID)){let e=t.ID;n.get(e).parents.forEach(function(t){i.has(t.ID)&&i.get(t.ID).bind(new o.OdW(a.bones),r[t.ID])})}})}}parsePoseNodes(){let t={};if("Pose"in r.Objects){let e=r.Objects.Pose;for(let i in e)if("BindPose"===e[i].attrType&&e[i].NbPoseNodes>0){let r=e[i].PoseNode;Array.isArray(r)?r.forEach(function(e){t[e.Node]=new o.yGw().fromArray(e.Matrix.a)}):t[r.Node]=new o.yGw().fromArray(r.Matrix.a)}}return t}addGlobalSceneSettings(){if("GlobalSettings"in r){if("AmbientColor"in r.GlobalSettings){let t=r.GlobalSettings.AmbientColor.value,e=t[0],i=t[1],n=t[2];if(0!==e||0!==i||0!==n){let t=new o.Ilk(e,i,n).convertSRGBToLinear();s.add(new o.Mig(t,1))}}"UnitScaleFactor"in r.GlobalSettings&&(s.userData.unitScaleFactor=r.GlobalSettings.UnitScaleFactor.value)}}constructor(t,e){this.textureLoader=t,this.manager=e}}class Q{parse(t){let e=new Map;if("Geometry"in r.Objects){let i=r.Objects.Geometry;for(let r in i){let s=n.get(parseInt(r)),o=this.parseGeometry(s,i[r],t);e.set(parseInt(r),o)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),e}parseGeometry(t,e,i){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,i);case"NurbsCurve":return this.parseNurbsGeometry(e)}}parseMeshGeometry(t,e,i){let n=i.skeletons,s=[],o=t.parents.map(function(t){return r.Objects.Model[t.ID]});if(0===o.length)return;let a=t.children.reduce(function(t,e){return void 0!==n[e.ID]&&(t=n[e.ID]),t},null);t.children.forEach(function(t){void 0!==i.morphTargets[t.ID]&&s.push(i.morphTargets[t.ID])});let l=o[0],u={};"RotationOrder"in l&&(u.eulerOrder=td(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);let h=tc(u);return this.genGeometry(e,a,s,h)}genGeometry(t,e,i,r){let n=new o.u9r;t.attrName&&(n.name=t.attrName);let s=this.parseGeoNode(t,e),a=this.genBuffers(s),l=new o.a$l(a.vertex,3);if(l.applyMatrix4(r),n.setAttribute("position",l),a.colors.length>0&&n.setAttribute("color",new o.a$l(a.colors,3)),e&&(n.setAttribute("skinIndex",new o.qlB(a.weightsIndices,4)),n.setAttribute("skinWeight",new o.a$l(a.vertexWeights,4)),n.FBX_Deformer=e),a.normal.length>0){let t=new o.Vkp().getNormalMatrix(r),e=new o.a$l(a.normal,3);e.applyNormalMatrix(t),n.setAttribute("normal",e)}if(a.uvs.forEach(function(t,e){n.setAttribute(0===e?"uv":"uv".concat(e),new o.a$l(a.uvs[e],2))}),s.material&&"AllSame"!==s.material.mappingType){let t=a.materialIndex[0],e=0;if(a.materialIndex.forEach(function(i,r){i!==t&&(n.addGroup(e,r-e,t),t=i,e=r)}),n.groups.length>0){let e=n.groups[n.groups.length-1],i=e.start+e.count;i!==a.materialIndex.length&&n.addGroup(i,a.materialIndex.length-i,t)}0===n.groups.length&&n.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(n,t,i,r),n}parseGeoNode(t,e){let i={};if(i.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],i.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(i.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(i.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(i.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){i.uv=[];let e=0;for(;t.LayerElementUV[e];)t.LayerElementUV[e].UV&&i.uv.push(this.parseUVs(t.LayerElementUV[e])),e++}return i.weightTable={},null!==e&&(i.skeleton=e,e.rawBones.forEach(function(t,e){t.indices.forEach(function(r,n){void 0===i.weightTable[r]&&(i.weightTable[r]=[]),i.weightTable[r].push({id:e,weight:t.weights[n]})})})),i}genBuffers(t){let e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,r=0,n=!1,s=[],o=[],a=[],l=[],u=[],h=[],c=this;return t.vertexIndices.forEach(function(d,p){let f;let m=!1;d<0&&(d^=-1,m=!0);let v=[],g=[];if(s.push(3*d,3*d+1,3*d+2),t.color){let e=tl(p,i,d,t.color);a.push(e[0],e[1],e[2])}if(t.skeleton){if(void 0!==t.weightTable[d]&&t.weightTable[d].forEach(function(t){g.push(t.weight),v.push(t.id)}),g.length>4){n||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),n=!0);let t=[0,0,0,0],e=[0,0,0,0];g.forEach(function(i,r){let n=i,s=v[r];e.forEach(function(e,i,r){if(n>e){r[i]=n,n=e;let o=t[i];t[i]=s,s=o}})}),v=t,g=e}for(;g.length<4;)g.push(0),v.push(0);for(let t=0;t<4;++t)u.push(g[t]),h.push(v[t])}if(t.normal){let e=tl(p,i,d,t.normal);o.push(e[0],e[1],e[2])}t.material&&"AllSame"!==t.material.mappingType&&(f=tl(p,i,d,t.material)[0])<0&&(c.negativeMaterialIndices=!0,f=0),t.uv&&t.uv.forEach(function(t,e){let r=tl(p,i,d,t);void 0===l[e]&&(l[e]=[]),l[e].push(r[0]),l[e].push(r[1])}),r++,m&&(c.genFace(e,t,s,f,o,a,l,u,h,r),i++,r=0,s=[],o=[],a=[],l=[],u=[],h=[])}),e}getNormalNewell(t){let e=new o.Pa4(0,0,0);for(let i=0;i<t.length;i++){let r=t[i],n=t[(i+1)%t.length];e.x+=(r.y-n.y)*(r.z+n.z),e.y+=(r.z-n.z)*(r.x+n.x),e.z+=(r.x-n.x)*(r.y+n.y)}return e.normalize(),e}getNormalTangentAndBitangent(t){let e=this.getNormalNewell(t),i=(Math.abs(e.z)>.5?new o.Pa4(0,1,0):new o.Pa4(0,0,1)).cross(e).normalize(),r=e.clone().cross(i).normalize();return{normal:e,tangent:i,bitangent:r}}flattenVertex(t,e,i){return new o.FM8(t.dot(e),t.dot(i))}genFace(t,e,i,r,n,s,a,l,u,h){let c;if(h>3){let t=[];for(let r=0;r<i.length;r+=3)t.push(new o.Pa4(e.vertexPositions[i[r]],e.vertexPositions[i[r+1]],e.vertexPositions[i[r+2]]));let{tangent:r,bitangent:n}=this.getNormalTangentAndBitangent(t),s=[];for(let e of t)s.push(this.flattenVertex(e,r,n));c=o.iDF.triangulateShape(s,[])}else c=[[0,1,2]];for(let[o,h,d]of c)t.vertex.push(e.vertexPositions[i[3*o]]),t.vertex.push(e.vertexPositions[i[3*o+1]]),t.vertex.push(e.vertexPositions[i[3*o+2]]),t.vertex.push(e.vertexPositions[i[3*h]]),t.vertex.push(e.vertexPositions[i[3*h+1]]),t.vertex.push(e.vertexPositions[i[3*h+2]]),t.vertex.push(e.vertexPositions[i[3*d]]),t.vertex.push(e.vertexPositions[i[3*d+1]]),t.vertex.push(e.vertexPositions[i[3*d+2]]),e.skeleton&&(t.vertexWeights.push(l[4*o]),t.vertexWeights.push(l[4*o+1]),t.vertexWeights.push(l[4*o+2]),t.vertexWeights.push(l[4*o+3]),t.vertexWeights.push(l[4*h]),t.vertexWeights.push(l[4*h+1]),t.vertexWeights.push(l[4*h+2]),t.vertexWeights.push(l[4*h+3]),t.vertexWeights.push(l[4*d]),t.vertexWeights.push(l[4*d+1]),t.vertexWeights.push(l[4*d+2]),t.vertexWeights.push(l[4*d+3]),t.weightsIndices.push(u[4*o]),t.weightsIndices.push(u[4*o+1]),t.weightsIndices.push(u[4*o+2]),t.weightsIndices.push(u[4*o+3]),t.weightsIndices.push(u[4*h]),t.weightsIndices.push(u[4*h+1]),t.weightsIndices.push(u[4*h+2]),t.weightsIndices.push(u[4*h+3]),t.weightsIndices.push(u[4*d]),t.weightsIndices.push(u[4*d+1]),t.weightsIndices.push(u[4*d+2]),t.weightsIndices.push(u[4*d+3])),e.color&&(t.colors.push(s[3*o]),t.colors.push(s[3*o+1]),t.colors.push(s[3*o+2]),t.colors.push(s[3*h]),t.colors.push(s[3*h+1]),t.colors.push(s[3*h+2]),t.colors.push(s[3*d]),t.colors.push(s[3*d+1]),t.colors.push(s[3*d+2])),e.material&&"AllSame"!==e.material.mappingType&&(t.materialIndex.push(r),t.materialIndex.push(r),t.materialIndex.push(r)),e.normal&&(t.normal.push(n[3*o]),t.normal.push(n[3*o+1]),t.normal.push(n[3*o+2]),t.normal.push(n[3*h]),t.normal.push(n[3*h+1]),t.normal.push(n[3*h+2]),t.normal.push(n[3*d]),t.normal.push(n[3*d+1]),t.normal.push(n[3*d+2])),e.uv&&e.uv.forEach(function(e,i){void 0===t.uvs[i]&&(t.uvs[i]=[]),t.uvs[i].push(a[i][2*o]),t.uvs[i].push(a[i][2*o+1]),t.uvs[i].push(a[i][2*h]),t.uvs[i].push(a[i][2*h+1]),t.uvs[i].push(a[i][2*d]),t.uvs[i].push(a[i][2*d+1])})}addMorphTargets(t,e,i,n){if(0===i.length)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];let s=this;i.forEach(function(i){i.rawTargets.forEach(function(i){let o=r.Objects.Geometry[i.geoID];void 0!==o&&s.genMorphGeometry(t,e,o,n,i.name)})})}genMorphGeometry(t,e,i,r,n){let s=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],a=void 0!==i.Vertices?i.Vertices.a:[],l=void 0!==i.Indexes?i.Indexes.a:[],u=3*t.attributes.position.count,h=new Float32Array(u);for(let t=0;t<l.length;t++){let e=3*l[t];h[e]=a[3*t],h[e+1]=a[3*t+1],h[e+2]=a[3*t+2]}let c=this.genBuffers({vertexIndices:s,vertexPositions:h}),d=new o.a$l(c.vertex,3);d.name=n||i.attrName,d.applyMatrix4(r),t.morphAttributes.position.push(d)}parseNormals(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,r=t.Normals.a,n=[];return"IndexToDirect"===i&&("NormalIndex"in t?n=t.NormalIndex.a:"NormalsIndex"in t&&(n=t.NormalsIndex.a)),{dataSize:3,buffer:r,indices:n,mappingType:e,referenceType:i}}parseUVs(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,r=t.UV.a,n=[];return"IndexToDirect"===i&&(n=t.UVIndex.a),{dataSize:2,buffer:r,indices:n,mappingType:e,referenceType:i}}parseVertexColors(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,r=t.Colors.a,n=[];"IndexToDirect"===i&&(n=t.ColorIndex.a);for(let t=0,e=new o.Ilk;t<r.length;t+=4)e.fromArray(r,t).convertSRGBToLinear().toArray(r,t);return{dataSize:4,buffer:r,indices:n,mappingType:e,referenceType:i}}parseMaterialIndices(t){let e=t.MappingInformationType,i=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};let r=t.Materials.a,n=[];for(let t=0;t<r.length;++t)n.push(t);return{dataSize:1,buffer:r,indices:n,mappingType:e,referenceType:i}}parseNurbsGeometry(t){let e,i;let r=parseInt(t.Order);if(isNaN(r))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new o.u9r;let n=r-1,s=t.KnotVector.a,a=[],l=t.Points.a;for(let t=0,e=l.length;t<e;t+=4)a.push(new o.Ltg().fromArray(l,t));if("Closed"===t.Form)a.push(a[0]);else if("Periodic"===t.Form){e=n,i=s.length-1-e;for(let t=0;t<n;++t)a.push(a[t])}let u=new Z(n,s,a,e,i).getPoints(12*a.length);return new o.u9r().setFromPoints(u)}constructor(){this.negativeMaterialIndices=!1}}class tt{parse(){let t=[],e=this.parseClips();if(void 0!==e)for(let i in e){let r=e[i],n=this.addClip(r);t.push(n)}return t}parseClips(){if(void 0===r.Objects.AnimationCurve)return;let t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);let e=this.parseAnimationLayers(t);return this.parseAnimStacks(e)}parseAnimationCurveNodes(){let t=r.Objects.AnimationCurveNode,e=new Map;for(let i in t){let r=t[i];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){let t={id:r.id,attr:r.attrName,curves:{}};e.set(t.id,t)}}return e}parseAnimationCurves(t){let e=r.Objects.AnimationCurve;for(let i in e){let r={id:e[i].id,times:e[i].KeyTime.a.map(to),values:e[i].KeyValueFloat.a},s=n.get(r.id);if(void 0!==s){let e=s.parents[0].ID,i=s.parents[0].relationship;i.match(/X/)?t.get(e).curves.x=r:i.match(/Y/)?t.get(e).curves.y=r:i.match(/Z/)?t.get(e).curves.z=r:i.match(/DeformPercent/)&&t.has(e)&&(t.get(e).curves.morph=r)}}}parseAnimationLayers(t){let e=r.Objects.AnimationLayer,i=new Map;for(let a in e){let e=[],l=n.get(parseInt(a));void 0!==l&&(l.children.forEach(function(i,a){if(t.has(i.ID)){let l=t.get(i.ID);if(void 0!==l.curves.x||void 0!==l.curves.y||void 0!==l.curves.z){if(void 0===e[a]){let t=n.get(i.ID).parents.filter(function(t){return void 0!==t.relationship})[0].ID;if(void 0!==t){let n=r.Objects.Model[t.toString()];if(void 0===n){console.warn("THREE.FBXLoader: Encountered a unused curve.",i);return}let l={modelName:n.attrName?o.iUV.sanitizeNodeName(n.attrName):"",ID:n.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};s.traverse(function(t){t.ID===n.id&&(l.transform=t.matrix,t.userData.transformData&&(l.eulerOrder=t.userData.transformData.eulerOrder))}),l.transform||(l.transform=new o.yGw),"PreRotation"in n&&(l.preRotation=n.PreRotation.value),"PostRotation"in n&&(l.postRotation=n.PostRotation.value),e[a]=l}}e[a]&&(e[a][l.attr]=l)}else if(void 0!==l.curves.morph){if(void 0===e[a]){let t=n.get(i.ID).parents.filter(function(t){return void 0!==t.relationship})[0].ID,s=n.get(t).parents[0].ID,l=n.get(s).parents[0].ID,u=n.get(l).parents[0].ID,h=r.Objects.Model[u],c={modelName:h.attrName?o.iUV.sanitizeNodeName(h.attrName):"",morphName:r.Objects.Deformer[t].attrName};e[a]=c}e[a][l.attr]=l}}}),i.set(parseInt(a),e))}return i}parseAnimStacks(t){let e=r.Objects.AnimationStack,i={};for(let r in e){let s=n.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let o=t.get(s[0].ID);i[r]={name:e[r].attrName,layer:o}}return i}addClip(t){let e=[],i=this;return t.layer.forEach(function(t){e=e.concat(i.generateTracks(t))}),new o.m7l(t.name,-1,e)}generateTracks(t){let e=[],i=new o.Pa4,r=new o.Pa4;if(t.transform&&t.transform.decompose(i,new o._fP,r),i=i.toArray(),r=r.toArray(),void 0!==t.T&&Object.keys(t.T.curves).length>0){let r=this.generateVectorTrack(t.modelName,t.T.curves,i,"position");void 0!==r&&e.push(r)}if(void 0!==t.R&&Object.keys(t.R.curves).length>0){let i=this.generateRotationTrack(t.modelName,t.R.curves,t.preRotation,t.postRotation,t.eulerOrder);void 0!==i&&e.push(i)}if(void 0!==t.S&&Object.keys(t.S.curves).length>0){let i=this.generateVectorTrack(t.modelName,t.S.curves,r,"scale");void 0!==i&&e.push(i)}if(void 0!==t.DeformPercent){let i=this.generateMorphTrack(t);void 0!==i&&e.push(i)}return e}generateVectorTrack(t,e,i,r){let n=this.getTimesForAllAxes(e),s=this.getKeyframeTrackValues(n,e,i);return new o.yC1(t+"."+r,n,s)}generateRotationTrack(t,e,i,r,n){let s,a;if(void 0!==e.x&&void 0!==e.y&&void 0!==e.z){let t=this.interpolateRotations(e.x,e.y,e.z,n);s=t[0],a=t[1]}void 0!==i&&((i=i.map(o.M8C.degToRad)).push(n),i=new o.USm().fromArray(i),i=new o._fP().setFromEuler(i)),void 0!==r&&((r=r.map(o.M8C.degToRad)).push(n),r=new o.USm().fromArray(r),r=new o._fP().setFromEuler(r).invert());let l=new o._fP,u=new o.USm,h=[];if(!a||!s)return new o.iLg(t+".quaternion",[],[]);for(let t=0;t<a.length;t+=3)u.set(a[t],a[t+1],a[t+2],n),l.setFromEuler(u),void 0!==i&&l.premultiply(i),void 0!==r&&l.multiply(r),t>2&&0>new o._fP().fromArray(h,(t-3)/3*4).dot(l)&&l.set(-l.x,-l.y,-l.z,-l.w),l.toArray(h,t/3*4);return new o.iLg(t+".quaternion",s,h)}generateMorphTrack(t){let e=t.DeformPercent.curves.morph,i=e.values.map(function(t){return t/100}),r=s.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new o.dUE(t.modelName+".morphTargetInfluences["+r+"]",e.times,i)}getTimesForAllAxes(t){let e=[];if(void 0!==t.x&&(e=e.concat(t.x.times)),void 0!==t.y&&(e=e.concat(t.y.times)),void 0!==t.z&&(e=e.concat(t.z.times)),(e=e.sort(function(t,e){return t-e})).length>1){let t=1,i=e[0];for(let r=1;r<e.length;r++){let n=e[r];n!==i&&(e[t]=n,i=n,t++)}e=e.slice(0,t)}return e}getKeyframeTrackValues(t,e,i){let r=[],n=-1,s=-1,o=-1;return t.forEach(function(t){if(e.x&&(n=e.x.times.indexOf(t)),e.y&&(s=e.y.times.indexOf(t)),e.z&&(o=e.z.times.indexOf(t)),-1!==n){let t=e.x.values[n];r.push(t),i[0]=t}else r.push(i[0]);if(-1!==s){let t=e.y.values[s];r.push(t),i[1]=t}else r.push(i[1]);if(-1!==o){let t=e.z.values[o];r.push(t),i[2]=t}else r.push(i[2])}),r}interpolateRotations(t,e,i,r){let n=[],s=[];n.push(t.times[0]),s.push(o.M8C.degToRad(t.values[0])),s.push(o.M8C.degToRad(e.values[0])),s.push(o.M8C.degToRad(i.values[0]));for(let a=1;a<t.values.length;a++){let l=[t.values[a-1],e.values[a-1],i.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let u=l.map(o.M8C.degToRad),h=[t.values[a],e.values[a],i.values[a]];if(isNaN(h[0])||isNaN(h[1])||isNaN(h[2]))continue;let c=h.map(o.M8C.degToRad),d=[h[0]-l[0],h[1]-l[1],h[2]-l[2]],p=[Math.abs(d[0]),Math.abs(d[1]),Math.abs(d[2])];if(p[0]>=180||p[1]>=180||p[2]>=180){let e=Math.max(...p)/180,i=new o.USm(...u,r),l=new o.USm(...c,r),h=new o._fP().setFromEuler(i),d=new o._fP().setFromEuler(l);h.dot(d)&&d.set(-d.x,-d.y,-d.z,-d.w);let f=t.times[a-1],m=t.times[a]-f,v=new o._fP,g=new o.USm;for(let t=0;t<1;t+=1/e)v.copy(h.clone().slerp(d.clone(),t)),n.push(f+t*m),g.setFromQuaternion(v,r),s.push(g.x),s.push(g.y),s.push(g.z)}else n.push(t.times[a]),s.push(o.M8C.degToRad(t.values[a])),s.push(o.M8C.degToRad(e.values[a])),s.push(o.M8C.degToRad(i.values[a]))}return[n,s]}}class te{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e}parse(t){this.currentIndent=0,this.allNodes=new tn,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let e=this,i=t.split(/[\r\n]+/);return i.forEach(function(t,r){let n=t.match(/^[\s\t]*;/),s=t.match(/^[\s\t]*$/);if(n||s)return;let o=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),a=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=t.match("^\\t{"+(e.currentIndent-1)+"}}");o?e.parseNodeBegin(t,o):a?e.parseNodeProperty(t,a,i[++r]):l?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)}),this.allNodes}parseNodeBegin(t,e){let i=e[1].trim().replace(/^"/,"").replace(/"$/,""),r=e[2].split(",").map(function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")}),n={name:i},s=this.parseNodeAttr(r),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,n):i in o?("PoseNode"===i?o.PoseNode.push(n):void 0!==o[i].id&&(o[i]={},o[i][o[i].id]=o[i]),""!==s.id&&(o[i][s.id]=n)):"number"==typeof s.id?(o[i]={},o[i][s.id]=n):"Properties70"!==i&&("PoseNode"===i?o[i]=[n]:o[i]=n),"number"==typeof s.id&&(n.id=s.id),""!==s.name&&(n.attrName=s.name),""!==s.type&&(n.attrType=s.type),this.pushStack(n)}parseNodeAttr(t){let e=t[0];""!==t[0]&&isNaN(e=parseInt(t[0]))&&(e=t[0]);let i="",r="";return t.length>1&&(i=t[1].replace(/^(\w+)::/,""),r=t[2]),{id:e,name:i,type:r}}parseNodeProperty(t,e,i){let r=e[1].replace(/^"/,"").replace(/"$/,"").trim(),n=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===n&&(n=i.replace(/"/g,"").replace(/,$/,"").trim());let s=this.getCurrentNode();if("Properties70"===s.name){this.parseNodeSpecialProperty(t,r,n);return}if("C"===r){let t=n.split(",").slice(1),e=parseInt(t[0]),i=parseInt(t[1]),o=n.split(",").slice(3);o=o.map(function(t){return t.trim().replace(/^"/,"")}),r="connections",function(t,e){for(let i=0,r=t.length,n=e.length;i<n;i++,r++)t[r]=e[i]}(n=[e,i],o),void 0===s[r]&&(s[r]=[])}"Node"===r&&(s.id=n),r in s&&Array.isArray(s[r])?s[r].push(n):"a"!==r?s[r]=n:s.a=n,this.setCurrentProp(s,r),"a"===r&&","!==n.slice(-1)&&(s.a=tp(n))}parseNodePropertyContinued(t){let e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=tp(e.a))}parseNodeSpecialProperty(t,e,i){let r=i.split('",').map(function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")}),n=r[0],s=r[1],o=r[2],a=r[3],l=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=tp(l)}this.getPrevNode()[n]={type:s,type2:o,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),n)}}class ti{parse(t){let e=new tr(t);e.skip(23);let i=e.getUint32();if(i<6400)throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);let r=new tn;for(;!this.endOfContent(e);){let t=this.parseNode(e,i);null!==t&&r.add(t.name,t)}return r}endOfContent(t){return t.size()%16==0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,e){let i={},r=e>=7500?t.getUint64():t.getUint32(),n=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();let s=t.getUint8(),o=t.getString(s);if(0===r)return null;let a=[];for(let e=0;e<n;e++)a.push(this.parseProperty(t));let l=a.length>0?a[0]:"",u=a.length>1?a[1]:"",h=a.length>2?a[2]:"";for(i.singleProperty=1===n&&t.getOffset()===r;r>t.getOffset();){let r=this.parseNode(t,e);null!==r&&this.parseSubNode(o,i,r)}return i.propertyList=a,"number"==typeof l&&(i.id=l),""!==u&&(i.attrName=u),""!==h&&(i.attrType=h),""!==o&&(i.name=o),i}parseSubNode(t,e,i){if(!0===i.singleProperty){let t=i.propertyList[0];Array.isArray(t)?(e[i.name]=i,i.a=t):e[i.name]=t}else if("Connections"===t&&"C"===i.name){let t=[];i.propertyList.forEach(function(e,i){0!==i&&t.push(e)}),void 0===e.connections&&(e.connections=[]),e.connections.push(t)}else if("Properties70"===i.name)Object.keys(i).forEach(function(t){e[t]=i[t]});else if("Properties70"===t&&"P"===i.name){let t,r=i.propertyList[0],n=i.propertyList[1],s=i.propertyList[2],o=i.propertyList[3];0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),t="Color"===n||"ColorRGB"===n||"Vector"===n||"Vector3D"===n||0===n.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],e[r]={type:n,type2:s,flag:o,value:t}}else void 0===e[i.name]?"number"==typeof i.id?(e[i.name]={},e[i.name][i.id]=i):e[i.name]=i:"PoseNode"===i.name?(Array.isArray(e[i.name])||(e[i.name]=[e[i.name]]),e[i.name].push(i)):void 0===e[i.name][i.id]&&(e[i.name][i.id]=i)}parseProperty(t){let e;let i=t.getString(1);switch(i){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return e=t.getUint32(),t.getArrayBuffer(e);case"S":return e=t.getUint32(),t.getString(e);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r;let n=t.getUint32(),s=t.getUint32(),o=t.getUint32();if(0===s)switch(i){case"b":case"c":return t.getBooleanArray(n);case"d":return t.getFloat64Array(n);case"f":return t.getFloat32Array(n);case"i":return t.getInt32Array(n);case"l":return t.getInt64Array(n)}let a=new tr(O((K(r=new Uint8Array(t.getArrayBuffer(o))),r.subarray(2,-4)),void 0).buffer);switch(i){case"b":case"c":return a.getBooleanArray(n);case"d":return a.getFloat64Array(n);case"f":return a.getFloat32Array(n);case"i":return a.getInt32Array(n);case"l":return a.getInt64Array(n)}break;default:throw Error("THREE.FBXLoader: Unknown property type "+i)}}}class tr{getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(1&this.getUint8())==1}getBooleanArray(t){let e=[];for(let i=0;i<t;i++)e.push(this.getBoolean());return e}getUint8(){let t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){let t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){let t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getInt32());return e}getUint32(){let t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,e;return(this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e)?(e=4294967295&~e,4294967295==(t=4294967295&~t)&&(e=e+1&4294967295),-(4294967296*e+(t=t+1&4294967295))):4294967296*e+t}getInt64Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getInt64());return e}getUint64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t}getFloat32(){let t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getFloat32());return e}getFloat64(){let t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getFloat64());return e}getArrayBuffer(t){let e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}getString(t){let e=this.offset,i=new Uint8Array(this.dv.buffer,e,t);this.skip(t);let r=i.indexOf(0);return r>=0&&(i=new Uint8Array(this.dv.buffer,e,r)),this._textDecoder.decode(i)}constructor(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e,this._textDecoder=new TextDecoder}}class tn{add(t,e){this[t]=e}}function ts(t){let e=t.match(/FBXVersion: (\d+)/);if(e)return parseInt(e[1]);throw Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function to(t){return t/46186158e3}let ta=[];function tl(t,e,i,r){let n;switch(r.mappingType){case"ByPolygonVertex":n=t;break;case"ByPolygon":n=e;break;case"ByVertice":n=i;break;case"AllSame":n=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(n=r.indices[n]);let s=n*r.dataSize,o=s+r.dataSize;return function(t,e,i,r){for(let n=i,s=0;n<r;n++,s++)t[s]=e[n];return t}(ta,r.buffer,s,o)}let tu=new o.USm,th=new o.Pa4;function tc(t){let e=new o.yGw,i=new o.yGw,r=new o.yGw,n=new o.yGw,s=new o.yGw,a=new o.yGw,l=new o.yGw,u=new o.yGw,h=new o.yGw,c=new o.yGw,d=new o.yGw,p=new o.yGw,f=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(th.fromArray(t.translation)),t.preRotation){let e=t.preRotation.map(o.M8C.degToRad);e.push(t.eulerOrder||o.USm.DEFAULT_ORDER),i.makeRotationFromEuler(tu.fromArray(e))}if(t.rotation){let e=t.rotation.map(o.M8C.degToRad);e.push(t.eulerOrder||o.USm.DEFAULT_ORDER),r.makeRotationFromEuler(tu.fromArray(e))}if(t.postRotation){let e=t.postRotation.map(o.M8C.degToRad);e.push(t.eulerOrder||o.USm.DEFAULT_ORDER),n.makeRotationFromEuler(tu.fromArray(e)),n.invert()}t.scale&&s.scale(th.fromArray(t.scale)),t.scalingOffset&&l.setPosition(th.fromArray(t.scalingOffset)),t.scalingPivot&&a.setPosition(th.fromArray(t.scalingPivot)),t.rotationOffset&&u.setPosition(th.fromArray(t.rotationOffset)),t.rotationPivot&&h.setPosition(th.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(d.copy(t.parentMatrix),c.copy(t.parentMatrixWorld));let m=i.clone().multiply(r).multiply(n),v=new o.yGw;v.extractRotation(c);let g=new o.yGw;g.copyPosition(c);let y=g.clone().invert().multiply(c),w=v.clone().invert().multiply(y),x=new o.yGw;if(0===f)x.copy(v).multiply(m).multiply(w).multiply(s);else if(1===f)x.copy(v).multiply(w).multiply(m).multiply(s);else{let t=new o.yGw().scale(new o.Pa4().setFromMatrixScale(d)).clone().invert(),e=w.clone().multiply(t);x.copy(v).multiply(m).multiply(e).multiply(s)}let b=h.clone().invert(),T=a.clone().invert(),P=e.clone().multiply(u).multiply(h).multiply(i).multiply(r).multiply(n).multiply(b).multiply(l).multiply(a).multiply(s).multiply(T),A=new o.yGw().copyPosition(P),S=c.clone().multiply(A);return p.copyPosition(S),(P=p.clone().multiply(x)).premultiply(c.invert()),P}function td(t){return 6===(t=t||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),"ZYX"):["ZYX","YZX","XZY","ZXY","YXZ","XYZ"][t]}function tp(t){return t.split(",").map(function(t){return parseFloat(t)})}function tf(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new TextDecoder().decode(new Uint8Array(t,e,i))}}}]);